[
    {
        "file": "platform-api/src/main/java/com/platform/api/ApiOrderController.java",
        "method_name": "detail",
        "old_function": "@ApiOperation(value = \"获取订单详情\")\n    @PostMapping(\"detail\")\n    public Object detail(Integer orderId) {\n        Map resultObj = new HashMap();\n        //\n        OrderVo orderInfo = orderService.queryObject(orderId);\n        if (null == orderInfo) {\n            return toResponsObject(400, \"订单不存在\", \"\");\n        }\n        Map orderGoodsParam = new HashMap();\n        orderGoodsParam.put(\"order_id\", orderId);\n        //订单的商品\n        List<OrderGoodsVo> orderGoods = orderGoodsService.queryList(orderGoodsParam);\n        //订单最后支付时间\n        if (orderInfo.getOrder_status() == 0) {\n            // if (moment().subtract(60, 'minutes') < moment(orderInfo.add_time)) {\n//            orderInfo.final_pay_time = moment(\"001234\", \"Hmmss\").format(\"mm:ss\")\n            // } else {\n            //     //超过时间不支付，更新订单状态为取消\n            // }\n        }\n\n        //订单可操作的选择,删除，支付，收货，评论，退换货\n        Map handleOption = orderInfo.getHandleOption();\n        //\n        resultObj.put(\"orderInfo\", orderInfo);\n        resultObj.put(\"orderGoods\", orderGoods);\n        resultObj.put(\"handleOption\", handleOption);\n        if (!StringUtils.isEmpty(orderInfo.getShipping_code()) && !StringUtils.isEmpty(orderInfo.getShipping_no())) {\n            // 快递\n            List Traces = apiKdniaoService.getOrderTracesByJson(orderInfo.getShipping_code(), orderInfo.getShipping_no());\n            resultObj.put(\"shippingList\", Traces);\n        }\n        return toResponseSuccess(resultObj);\n    }",
        "new_function": "@ApiOperation(value = \"获取订单详情\")\n    @PostMapping(\"detail\")\n    public Object detail(Integer orderId, @LoginUser UserVo loginUser) {\n        Map resultObj = new HashMap();\n        //\n        OrderVo orderInfo = orderService.queryObject(orderId);\n        if (null == orderInfo) {\n            return toResponsObject(400, \"订单不存在\", \"\");\n        }\n\n        if (!loginUser.getUserId().equals(orderInfo.getUser_id())) {\n            return toResponseFail(\"越权操作！\");\n        }\n        Map orderGoodsParam = new HashMap();\n        orderGoodsParam.put(\"order_id\", orderId);\n        //订单的商品\n        List<OrderGoodsVo> orderGoods = orderGoodsService.queryList(orderGoodsParam);\n        //订单最后支付时间\n        if (orderInfo.getOrder_status() == 0) {\n            // if (moment().subtract(60, 'minutes') < moment(orderInfo.add_time)) {\n//            orderInfo.final_pay_time = moment(\"001234\", \"Hmmss\").format(\"mm:ss\")\n            // } else {\n            //     //超过时间不支付，更新订单状态为取消\n            // }\n        }\n\n        //订单可操作的选择,删除，支付，收货，评论，退换货\n        Map handleOption = orderInfo.getHandleOption();\n        //\n        resultObj.put(\"orderInfo\", orderInfo);\n        resultObj.put(\"orderGoods\", orderGoods);\n        resultObj.put(\"handleOption\", handleOption);\n        if (!StringUtils.isEmpty(orderInfo.getShipping_code()) && !StringUtils.isEmpty(orderInfo.getShipping_no())) {\n            // 快递\n            List Traces = apiKdniaoService.getOrderTracesByJson(orderInfo.getShipping_code(), orderInfo.getShipping_no());\n            resultObj.put(\"shippingList\", Traces);\n        }\n        return toResponseSuccess(resultObj);\n    }",
        "commit": "e83819a9440c13a286fa3ba52ed133884b2da27c",
        "project_name": "platform"
    },
    {
        "file": "platform-api/src/main/java/com/platform/api/ApiOrderController.java",
        "method_name": "updateSuccess",
        "old_function": "@ApiOperation(value = \"修改订单\")\n    @PostMapping(\"updateSuccess\")\n    public Object updateSuccess(Integer orderId) {\n        OrderVo orderInfo = orderService.queryObject(orderId);\n        if (orderInfo == null) {\n            return toResponseFail(\"订单不存在\");\n        } else if (orderInfo.getOrder_status() != 0) {\n            return toResponseFail(\"订单状态不正确orderStatus\" + orderInfo.getOrder_status() + \"payStatus\" + orderInfo.getPay_status());\n        }\n\n        orderInfo.setId(orderId);\n        orderInfo.setPay_status(2);\n        orderInfo.setOrder_status(201);\n        orderInfo.setShipping_status(0);\n        orderInfo.setPay_time(new Date());\n        int num = orderService.update(orderInfo);\n        if (num > 0) {\n            return toResponseSuccess(\"修改订单成功\");\n        } else {\n            return toResponseFail(\"修改订单失败\");\n        }\n    }",
        "new_function": "@ApiOperation(value = \"修改订单\")\n    @PostMapping(\"updateSuccess\")\n    public Object updateSuccess(Integer orderId, @LoginUser UserVo loginUser) {\n        OrderVo orderInfo = orderService.queryObject(orderId);\n        if (orderInfo == null) {\n            return toResponseFail(\"订单不存在\");\n        } else if (orderInfo.getOrder_status() != 0) {\n            return toResponseFail(\"订单状态不正确orderStatus\" + orderInfo.getOrder_status() + \"payStatus\" + orderInfo.getPay_status());\n        }\n\n        if (!loginUser.getUserId().equals(orderInfo.getUser_id())) {\n            return toResponseFail(\"越权操作！\");\n        }\n        orderInfo.setId(orderId);\n        orderInfo.setPay_status(2);\n        orderInfo.setOrder_status(201);\n        orderInfo.setShipping_status(0);\n        orderInfo.setPay_time(new Date());\n        int num = orderService.update(orderInfo);\n        if (num > 0) {\n            return toResponseSuccess(\"修改订单成功\");\n        } else {\n            return toResponseFail(\"修改订单失败\");\n        }\n    }",
        "commit": "e83819a9440c13a286fa3ba52ed133884b2da27c",
        "project_name": "platform"
    },
    {
        "file": "platform-api/src/main/java/com/platform/api/ApiOrderController.java",
        "method_name": "cancelOrder",
        "old_function": "@ApiOperation(value = \"取消订单\")\n    @PostMapping(\"cancelOrder\")\n    public Object cancelOrder(Integer orderId) {\n        try {\n            OrderVo orderVo = orderService.queryObject(orderId);\n            if (orderVo.getOrder_status() == 300) {\n                return toResponseFail(\"已发货，不能取消\");\n            } else if (orderVo.getOrder_status() == 301) {\n                return toResponseFail(\"已收货，不能取消\");\n            }\n            // 需要退款\n            if (orderVo.getPay_status() == 2) {\n                WechatRefundApiResult result = WechatUtil.wxRefund(orderVo.getOrder_sn(),\n                        0.01, 0.01);\n                if (result.getResult_code().equals(\"SUCCESS\")) {\n                    if (orderVo.getOrder_status() == 201) {\n                        orderVo.setOrder_status(401);\n                    } else if (orderVo.getOrder_status() == 300) {\n                        orderVo.setOrder_status(402);\n                    }\n                    orderVo.setPay_status(4);\n                    orderService.update(orderVo);\n                    return toResponseSuccess(\"取消成功\");\n                } else {\n                    return toResponsObject(400, \"取消成失败\", \"\");\n                }\n            } else {\n                orderVo.setOrder_status(101);\n                orderService.update(orderVo);\n                return this.toResponseSuccess(\"取消成功\");\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return toResponseFail(\"提交失败\");\n    }",
        "new_function": "@ApiOperation(value = \"取消订单\")\n    @PostMapping(\"cancelOrder\")\n    public Object cancelOrder(Integer orderId, @LoginUser UserVo loginUser) {\n        try {\n            OrderVo orderVo = orderService.queryObject(orderId);\n            if (null == orderVo) {\n                return toResponseFail(\"订单不存在！\");\n            }\n            if (!loginUser.getUserId().equals(orderVo.getUser_id())) {\n                return toResponseFail(\"越权操作！\");\n            }\n            if (orderVo.getOrder_status() == 300) {\n                return toResponseFail(\"已发货，不能取消\");\n            } else if (orderVo.getOrder_status() == 301) {\n                return toResponseFail(\"已收货，不能取消\");\n            }\n            // 需要退款\n            if (orderVo.getPay_status() == 2) {\n                WechatRefundApiResult result = WechatUtil.wxRefund(orderVo.getOrder_sn(),\n                        0.01, 0.01);\n                if (result.getResult_code().equals(\"SUCCESS\")) {\n                    if (orderVo.getOrder_status() == 201) {\n                        orderVo.setOrder_status(401);\n                    } else if (orderVo.getOrder_status() == 300) {\n                        orderVo.setOrder_status(402);\n                    }\n                    orderVo.setPay_status(4);\n                    orderService.update(orderVo);\n                    return toResponseSuccess(\"取消成功\");\n                } else {\n                    return toResponsObject(400, \"取消成失败\", \"\");\n                }\n            } else {\n                orderVo.setOrder_status(101);\n                orderService.update(orderVo);\n                return this.toResponseSuccess(\"取消成功\");\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return toResponseFail(\"提交失败\");\n    }",
        "commit": "e83819a9440c13a286fa3ba52ed133884b2da27c",
        "project_name": "platform"
    },
    {
        "file": "platform-api/src/main/java/com/platform/api/ApiOrderController.java",
        "method_name": "confirmOrder",
        "old_function": "@ApiOperation(value = \"确认收货\")\n    @PostMapping(\"confirmOrder\")\n    public Object confirmOrder(Integer orderId) {\n        try {\n            OrderVo orderVo = orderService.queryObject(orderId);\n            orderVo.setOrder_status(301);\n            orderVo.setShipping_status(2);\n            orderVo.setConfirm_time(new Date());\n            orderService.update(orderVo);\n            return this.toResponseSuccess(\"确认收货成功\");\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return toResponseFail(\"提交失败\");\n    }",
        "new_function": "@ApiOperation(value = \"确认收货\")\n    @PostMapping(\"confirmOrder\")\n    public Object confirmOrder(Integer orderId, @LoginUser UserVo loginUser) {\n        try {\n            OrderVo orderVo = orderService.queryObject(orderId);\n            if (null == orderVo) {\n                return toResponseFail(\"订单不存在！\");\n            }\n            if (!loginUser.getUserId().equals(orderVo.getUser_id())) {\n                return toResponseFail(\"越权操作！\");\n            }\n            orderVo.setOrder_status(301);\n            orderVo.setShipping_status(2);\n            orderVo.setConfirm_time(new Date());\n            orderService.update(orderVo);\n            return this.toResponseSuccess(\"确认收货成功\");\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return toResponseFail(\"提交失败\");\n    }",
        "commit": "e83819a9440c13a286fa3ba52ed133884b2da27c",
        "project_name": "platform"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/oss/controller/OssFileController.java",
        "method_name": "upload",
        "old_function": "@ResponseBody\n\t@PostMapping(\"/upload\")\n\t//@RequiresRoles(\"admin\")\n    //@RequiresPermissions(\"system:ossFile:upload\")\n\tpublic Result upload(@RequestParam(\"file\") MultipartFile multipartFile) {\n\t\tResult result = new Result();\n\t\ttry {\n\t\t\tossFileService.upload(multipartFile);\n\t\t\tresult.success(\"上传成功！\");\n\t\t}\n\t\tcatch (Exception ex) {\n\t\t\tlog.info(ex.getMessage(), ex);\n\t\t\tresult.error500(\"上传失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@ResponseBody\n\t@PostMapping(\"/upload\")\n\t//@RequiresRoles(\"admin\")\n    @RequiresPermissions(\"system:ossFile:upload\")\n\tpublic Result upload(@RequestParam(\"file\") MultipartFile multipartFile) {\n\t\tResult result = new Result();\n\t\ttry {\n\t\t\tossFileService.upload(multipartFile);\n\t\t\tresult.success(\"上传成功！\");\n\t\t}\n\t\tcatch (Exception ex) {\n\t\t\tlog.info(ex.getMessage(), ex);\n\t\t\tresult.error500(\"上传失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/quartz/controller/QuartzJobController.java",
        "method_name": "add",
        "old_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<?> add(@RequestBody QuartzJob quartzJob) {\n\t\tquartzJobService.saveAndScheduleJob(quartzJob);\n\t\treturn Result.ok(\"创建定时任务成功\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:quartzJob:add\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<?> add(@RequestBody QuartzJob quartzJob) {\n\t\tquartzJobService.saveAndScheduleJob(quartzJob);\n\t\treturn Result.ok(\"创建定时任务成功\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/quartz/controller/QuartzJobController.java",
        "method_name": "eidt",
        "old_function": "@RequestMapping(value = \"/edit\", method ={RequestMethod.PUT, RequestMethod.POST})\n\tpublic Result<?> eidt(@RequestBody QuartzJob quartzJob) {\n\t\ttry {\n\t\t\tquartzJobService.editAndScheduleJob(quartzJob);\n\t\t} catch (SchedulerException e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\treturn Result.error(\"更新定时任务失败!\");\n\t\t}\n\t    return Result.ok(\"更新定时任务成功!\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:quartzJob:edit\")\n\t@RequestMapping(value = \"/edit\", method ={RequestMethod.PUT, RequestMethod.POST})\n\tpublic Result<?> eidt(@RequestBody QuartzJob quartzJob) {\n\t\ttry {\n\t\t\tquartzJobService.editAndScheduleJob(quartzJob);\n\t\t} catch (SchedulerException e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\treturn Result.error(\"更新定时任务失败!\");\n\t\t}\n\t    return Result.ok(\"更新定时任务成功!\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/quartz/controller/QuartzJobController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<?> delete(@RequestParam(name = \"id\", required = true) String id) {\n\t\tQuartzJob quartzJob = quartzJobService.getById(id);\n\t\tif (quartzJob == null) {\n\t\t\treturn Result.error(\"未找到对应实体\");\n\t\t}\n\t\tquartzJobService.deleteAndStopJob(quartzJob);\n        return Result.ok(\"删除成功!\");\n\n\t}",
        "new_function": "@RequiresPermissions(\"system:quartzJob:delete\")\n\t@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<?> delete(@RequestParam(name = \"id\", required = true) String id) {\n\t\tQuartzJob quartzJob = quartzJobService.getById(id);\n\t\tif (quartzJob == null) {\n\t\t\treturn Result.error(\"未找到对应实体\");\n\t\t}\n\t\tquartzJobService.deleteAndStopJob(quartzJob);\n        return Result.ok(\"删除成功!\");\n\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/quartz/controller/QuartzJobController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<?> deleteBatch(@RequestParam(name = \"ids\", required = true) String ids) {\n\t\tif (ids == null || \"\".equals(ids.trim())) {\n\t\t\treturn Result.error(\"参数不识别！\");\n\t\t}\n\t\tfor (String id : Arrays.asList(ids.split(SymbolConstant.COMMA))) {\n\t\t\tQuartzJob job = quartzJobService.getById(id);\n\t\t\tquartzJobService.deleteAndStopJob(job);\n\t\t}\n        return Result.ok(\"删除定时任务成功!\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:quartzJob:deleteBatch\")\n\t@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<?> deleteBatch(@RequestParam(name = \"ids\", required = true) String ids) {\n\t\tif (ids == null || \"\".equals(ids.trim())) {\n\t\t\treturn Result.error(\"参数不识别！\");\n\t\t}\n\t\tfor (String id : Arrays.asList(ids.split(SymbolConstant.COMMA))) {\n\t\t\tQuartzJob job = quartzJobService.getById(id);\n\t\t\tquartzJobService.deleteAndStopJob(job);\n\t\t}\n        return Result.ok(\"删除定时任务成功!\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/quartz/controller/QuartzJobController.java",
        "method_name": "pauseJob",
        "old_function": "@GetMapping(value = \"/pause\")\n\t@ApiOperation(value = \"停止定时任务\")\n\tpublic Result<Object> pauseJob(@RequestParam(name = \"id\") String id) {\n\t\tQuartzJob job = quartzJobService.getById(id);\n\t\tif (job == null) {\n\t\t\treturn Result.error(\"定时任务不存在！\");\n\t\t}\n\t\tquartzJobService.pause(job);\n\t\treturn Result.ok(\"停止定时任务成功\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:quartzJob:pause\")\n\t@GetMapping(value = \"/pause\")\n\t@ApiOperation(value = \"停止定时任务\")\n\tpublic Result<Object> pauseJob(@RequestParam(name = \"id\") String id) {\n\t\tQuartzJob job = quartzJobService.getById(id);\n\t\tif (job == null) {\n\t\t\treturn Result.error(\"定时任务不存在！\");\n\t\t}\n\t\tquartzJobService.pause(job);\n\t\treturn Result.ok(\"停止定时任务成功\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/quartz/controller/QuartzJobController.java",
        "method_name": "resumeJob",
        "old_function": "@GetMapping(value = \"/resume\")\n\t@ApiOperation(value = \"启动定时任务\")\n\tpublic Result<Object> resumeJob(@RequestParam(name = \"id\") String id) {\n\t\tQuartzJob job = quartzJobService.getById(id);\n\t\tif (job == null) {\n\t\t\treturn Result.error(\"定时任务不存在！\");\n\t\t}\n\t\tquartzJobService.resumeJob(job);\n\t\t//scheduler.resumeJob(JobKey.jobKey(job.getJobClassName().trim()));\n\t\treturn Result.ok(\"启动定时任务成功\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:quartzJob:resume\")\n\t@GetMapping(value = \"/resume\")\n\t@ApiOperation(value = \"启动定时任务\")\n\tpublic Result<Object> resumeJob(@RequestParam(name = \"id\") String id) {\n\t\tQuartzJob job = quartzJobService.getById(id);\n\t\tif (job == null) {\n\t\t\treturn Result.error(\"定时任务不存在！\");\n\t\t}\n\t\tquartzJobService.resumeJob(job);\n\t\t//scheduler.resumeJob(JobKey.jobKey(job.getJobClassName().trim()));\n\t\treturn Result.ok(\"启动定时任务成功\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/quartz/controller/QuartzJobController.java",
        "method_name": "execute",
        "old_function": "@GetMapping(\"/execute\")\n\tpublic Result<?> execute(@RequestParam(name = \"id\", required = true) String id) {\n\t\tQuartzJob quartzJob = quartzJobService.getById(id);\n\t\tif (quartzJob == null) {\n\t\t\treturn Result.error(\"未找到对应实体\");\n\t\t}\n\t\ttry {\n\t\t\tquartzJobService.execute(quartzJob);\n\t\t} catch (Exception e) {\n\t\t\t//e.printStackTrace();\n\t\t\tlog.info(\"定时任务 立即执行失败>>\"+e.getMessage());\n\t\t\treturn Result.error(\"执行失败!\");\n\t\t}\n\t\treturn Result.ok(\"执行成功!\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:quartzJob:execute\")\n\t@GetMapping(\"/execute\")\n\tpublic Result<?> execute(@RequestParam(name = \"id\", required = true) String id) {\n\t\tQuartzJob quartzJob = quartzJobService.getById(id);\n\t\tif (quartzJob == null) {\n\t\t\treturn Result.error(\"未找到对应实体\");\n\t\t}\n\t\ttry {\n\t\t\tquartzJobService.execute(quartzJob);\n\t\t} catch (Exception e) {\n\t\t\t//e.printStackTrace();\n\t\t\tlog.info(\"定时任务 立即执行失败>>\"+e.getMessage());\n\t\t\treturn Result.error(\"执行失败!\");\n\t\t}\n\t\treturn Result.ok(\"执行成功!\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDataSourceController.java",
        "method_name": "queryPageList",
        "old_function": "@AutoLog(value = \"多数据源管理-分页列表查询\")\n    @ApiOperation(value = \"多数据源管理-分页列表查询\", notes = \"多数据源管理-分页列表查询\")\n    //@RequiresPermissions(\"system:datasource:list\")\n    @GetMapping(value = \"/list\")\n    public Result<?> queryPageList(\n            SysDataSource sysDataSource,\n            @RequestParam(name = \"pageNo\", defaultValue = \"1\") Integer pageNo,\n            @RequestParam(name = \"pageSize\", defaultValue = \"10\") Integer pageSize,\n            HttpServletRequest req) {\n        //------------------------------------------------------------------------------------------------\n        //是否开启系统管理模块的多租户数据隔离【SAAS多租户模式】\n        if(MybatisPlusSaasConfig.OPEN_SYSTEM_TENANT_CONTROL){\n            sysDataSource.setTenantId(oConvertUtils.getInt(TenantContext.getTenant(), 0));\n        }\n        //------------------------------------------------------------------------------------------------\n        QueryWrapper<SysDataSource> queryWrapper = QueryGenerator.initQueryWrapper(sysDataSource, req.getParameterMap());\n        Page<SysDataSource> page = new Page<>(pageNo, pageSize);\n        IPage<SysDataSource> pageList = sysDataSourceService.page(page, queryWrapper);\n        return Result.ok(pageList);\n    }",
        "new_function": "@AutoLog(value = \"多数据源管理-分页列表查询\")\n    @ApiOperation(value = \"多数据源管理-分页列表查询\", notes = \"多数据源管理-分页列表查询\")\n    @RequiresPermissions(\"system:datasource:list\")\n    @GetMapping(value = \"/list\")\n    public Result<?> queryPageList(\n            SysDataSource sysDataSource,\n            @RequestParam(name = \"pageNo\", defaultValue = \"1\") Integer pageNo,\n            @RequestParam(name = \"pageSize\", defaultValue = \"10\") Integer pageSize,\n            HttpServletRequest req) {\n        //------------------------------------------------------------------------------------------------\n        //是否开启系统管理模块的多租户数据隔离【SAAS多租户模式】\n        if(MybatisPlusSaasConfig.OPEN_SYSTEM_TENANT_CONTROL){\n            sysDataSource.setTenantId(oConvertUtils.getInt(TenantContext.getTenant(), 0));\n        }\n        //------------------------------------------------------------------------------------------------\n        QueryWrapper<SysDataSource> queryWrapper = QueryGenerator.initQueryWrapper(sysDataSource, req.getParameterMap());\n        Page<SysDataSource> page = new Page<>(pageNo, pageSize);\n        IPage<SysDataSource> pageList = sysDataSourceService.page(page, queryWrapper);\n        return Result.ok(pageList);\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartController.java",
        "method_name": "add",
        "old_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n\tpublic Result<SysDepart> add(@RequestBody SysDepart sysDepart, HttpServletRequest request) {\n\t\tResult<SysDepart> result = new Result<SysDepart>();\n\t\tString username = JwtUtil.getUserNameByToken(request);\n\t\ttry {\n\t\t\tsysDepart.setCreateBy(username);\n\t\t\tsysDepartService.saveDepartData(sysDepart, username);\n\t\t\t//清除部门树内存\n\t\t\t// FindsDepartsChildrenUtil.clearSysDepartTreeList();\n\t\t\t// FindsDepartsChildrenUtil.clearDepartIdModel();\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:depart:add\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n\tpublic Result<SysDepart> add(@RequestBody SysDepart sysDepart, HttpServletRequest request) {\n\t\tResult<SysDepart> result = new Result<SysDepart>();\n\t\tString username = JwtUtil.getUserNameByToken(request);\n\t\ttry {\n\t\t\tsysDepart.setCreateBy(username);\n\t\t\tsysDepartService.saveDepartData(sysDepart, username);\n\t\t\t//清除部门树内存\n\t\t\t// FindsDepartsChildrenUtil.clearSysDepartTreeList();\n\t\t\t// FindsDepartsChildrenUtil.clearDepartIdModel();\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartController.java",
        "method_name": "edit",
        "old_function": "@RequestMapping(value = \"/edit\", method = {RequestMethod.PUT,RequestMethod.POST})\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n\tpublic Result<SysDepart> edit(@RequestBody SysDepart sysDepart, HttpServletRequest request) {\n\t\tString username = JwtUtil.getUserNameByToken(request);\n\t\tsysDepart.setUpdateBy(username);\n\t\tResult<SysDepart> result = new Result<SysDepart>();\n\t\tSysDepart sysDepartEntity = sysDepartService.getById(sysDepart.getId());\n\t\tif (sysDepartEntity == null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t} else {\n\t\t\tboolean ok = sysDepartService.updateDepartDataById(sysDepart, username);\n\t\t\t// TODO 返回false说明什么？\n\t\t\tif (ok) {\n\t\t\t\t//清除部门树内存\n\t\t\t\t//FindsDepartsChildrenUtil.clearSysDepartTreeList();\n\t\t\t\t//FindsDepartsChildrenUtil.clearDepartIdModel();\n\t\t\t\tresult.success(\"修改成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:depart:edit\")\n\t@RequestMapping(value = \"/edit\", method = {RequestMethod.PUT,RequestMethod.POST})\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n\tpublic Result<SysDepart> edit(@RequestBody SysDepart sysDepart, HttpServletRequest request) {\n\t\tString username = JwtUtil.getUserNameByToken(request);\n\t\tsysDepart.setUpdateBy(username);\n\t\tResult<SysDepart> result = new Result<SysDepart>();\n\t\tSysDepart sysDepartEntity = sysDepartService.getById(sysDepart.getId());\n\t\tif (sysDepartEntity == null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t} else {\n\t\t\tboolean ok = sysDepartService.updateDepartDataById(sysDepart, username);\n\t\t\t// TODO 返回false说明什么？\n\t\t\tif (ok) {\n\t\t\t\t//清除部门树内存\n\t\t\t\t//FindsDepartsChildrenUtil.clearSysDepartTreeList();\n\t\t\t\t//FindsDepartsChildrenUtil.clearDepartIdModel();\n\t\t\t\tresult.success(\"修改成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n   public Result<SysDepart> delete(@RequestParam(name=\"id\",required=true) String id) {\n\n       Result<SysDepart> result = new Result<SysDepart>();\n       SysDepart sysDepart = sysDepartService.getById(id);\n       if(sysDepart==null) {\n           result.error500(\"未找到对应实体\");\n       }else {\n           sysDepartService.deleteDepart(id);\n\t\t\t//清除部门树内存\n\t\t   //FindsDepartsChildrenUtil.clearSysDepartTreeList();\n\t\t   // FindsDepartsChildrenUtil.clearDepartIdModel();\n\t\t   result.success(\"删除成功!\");\n       }\n       return result;\n   }",
        "new_function": "@RequiresPermissions(\"system:depart:delete\")\n    @RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n   public Result<SysDepart> delete(@RequestParam(name=\"id\",required=true) String id) {\n\n       Result<SysDepart> result = new Result<SysDepart>();\n       SysDepart sysDepart = sysDepartService.getById(id);\n       if(sysDepart==null) {\n           result.error500(\"未找到对应实体\");\n       }else {\n           sysDepartService.deleteDepart(id);\n\t\t\t//清除部门树内存\n\t\t   //FindsDepartsChildrenUtil.clearSysDepartTreeList();\n\t\t   // FindsDepartsChildrenUtil.clearDepartIdModel();\n\t\t   result.success(\"删除成功!\");\n       }\n       return result;\n   }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n\tpublic Result<SysDepart> deleteBatch(@RequestParam(name = \"ids\", required = true) String ids) {\n\n\t\tResult<SysDepart> result = new Result<SysDepart>();\n\t\tif (ids == null || \"\".equals(ids.trim())) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t} else {\n\t\t\tthis.sysDepartService.deleteBatchWithChildren(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:depart:deleteBatch\")\n\t@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n\tpublic Result<SysDepart> deleteBatch(@RequestParam(name = \"ids\", required = true) String ids) {\n\n\t\tResult<SysDepart> result = new Result<SysDepart>();\n\t\tif (ids == null || \"\".equals(ids.trim())) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t} else {\n\t\t\tthis.sysDepartService.deleteBatchWithChildren(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartController.java",
        "method_name": "importExcel",
        "old_function": "@RequestMapping(value = \"/importExcel\", method = RequestMethod.POST)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n    public Result<?> importExcel(HttpServletRequest request, HttpServletResponse response) {\n        MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;\n\t\tList<String> errorMessageList = new ArrayList<>();\n\t\tList<SysDepart> listSysDeparts = null;\n        Map<String, MultipartFile> fileMap = multipartRequest.getFileMap();\n        for (Map.Entry<String, MultipartFile> entity : fileMap.entrySet()) {\n            // 获取上传文件对象\n            MultipartFile file = entity.getValue();\n            ImportParams params = new ImportParams();\n            params.setTitleRows(2);\n            params.setHeadRows(1);\n            params.setNeedSave(true);\n            try {\n            \t// orgCode编码长度\n            \tint codeLength = YouBianCodeUtil.ZHANWEI_LENGTH;\n                listSysDeparts = ExcelImportUtil.importExcel(file.getInputStream(), SysDepart.class, params);\n                //按长度排序\n                Collections.sort(listSysDeparts, new Comparator<SysDepart>() {\n                    @Override\n\t\t\t\t\tpublic int compare(SysDepart arg0, SysDepart arg1) {\n                    \treturn arg0.getOrgCode().length() - arg1.getOrgCode().length();\n                    }\n                });\n\n                int num = 0;\n                for (SysDepart sysDepart : listSysDeparts) {\n                \tString orgCode = sysDepart.getOrgCode();\n                \tif(orgCode.length() > codeLength) {\n                \t\tString parentCode = orgCode.substring(0, orgCode.length()-codeLength);\n                \t\tQueryWrapper<SysDepart> queryWrapper = new QueryWrapper<SysDepart>();\n                \t\tqueryWrapper.eq(\"org_code\", parentCode);\n                \t\ttry {\n                \t\tSysDepart parentDept = sysDepartService.getOne(queryWrapper);\n                \t\tif(!parentDept.equals(null)) {\n\t\t\t\t\t\t\tsysDepart.setParentId(parentDept.getId());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsysDepart.setParentId(\"\");\n\t\t\t\t\t\t}\n                \t\t}catch (Exception e) {\n                \t\t\t//没有查找到parentDept\n                \t\t}\n                \t}else{\n                \t\tsysDepart.setParentId(\"\");\n\t\t\t\t\t}\n                    //update-begin---author:liusq   Date:20210223  for：批量导入部门以后，不能追加下一级部门 #2245------------\n\t\t\t\t\tsysDepart.setOrgType(sysDepart.getOrgCode().length()/codeLength+\"\");\n                    //update-end---author:liusq   Date:20210223  for：批量导入部门以后，不能追加下一级部门 #2245------------\n\t\t\t\t\tsysDepart.setDelFlag(CommonConstant.DEL_FLAG_0.toString());\n                    //update-begin---author:wangshuai ---date:20220105  for：[JTC-363]部门导入 机构类别没有时导入失败，赋默认值------------\n\t\t\t\t\tif(oConvertUtils.isEmpty(sysDepart.getOrgCategory())){\n\t\t\t\t\t    sysDepart.setOrgCategory(\"1\");\n                    }\n                    //update-end---author:wangshuai ---date:20220105  for：[JTC-363]部门导入 机构类别没有时导入失败，赋默认值------------\n\t\t\t\t\tImportExcelUtil.importDateSaveOne(sysDepart, ISysDepartService.class, errorMessageList, num, CommonConstant.SQL_INDEX_UNIQ_DEPART_ORG_CODE);\n\t\t\t\t\tnum++;\n                }\n\t\t\t\t//清空部门缓存\n\t\t\t\tSet keys3 = redisTemplate.keys(CacheConstant.SYS_DEPARTS_CACHE + \"*\");\n\t\t\t\tSet keys4 = redisTemplate.keys(CacheConstant.SYS_DEPART_IDS_CACHE + \"*\");\n\t\t\t\tredisTemplate.delete(keys3);\n\t\t\t\tredisTemplate.delete(keys4);\n\t\t\t\treturn ImportExcelUtil.imporReturnRes(errorMessageList.size(), listSysDeparts.size() - errorMessageList.size(), errorMessageList);\n            } catch (Exception e) {\n                log.error(e.getMessage(),e);\n                return Result.error(\"文件导入失败:\"+e.getMessage());\n            } finally {\n                try {\n                    file.getInputStream().close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n        return Result.error(\"文件导入失败！\");\n    }",
        "new_function": "@RequiresPermissions(\"system:depart:importExcel\")\n    @RequestMapping(value = \"/importExcel\", method = RequestMethod.POST)\n\t@CacheEvict(value= {CacheConstant.SYS_DEPARTS_CACHE,CacheConstant.SYS_DEPART_IDS_CACHE}, allEntries=true)\n    public Result<?> importExcel(HttpServletRequest request, HttpServletResponse response) {\n        MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;\n\t\tList<String> errorMessageList = new ArrayList<>();\n\t\tList<SysDepart> listSysDeparts = null;\n        Map<String, MultipartFile> fileMap = multipartRequest.getFileMap();\n        for (Map.Entry<String, MultipartFile> entity : fileMap.entrySet()) {\n            // 获取上传文件对象\n            MultipartFile file = entity.getValue();\n            ImportParams params = new ImportParams();\n            params.setTitleRows(2);\n            params.setHeadRows(1);\n            params.setNeedSave(true);\n            try {\n            \t// orgCode编码长度\n            \tint codeLength = YouBianCodeUtil.ZHANWEI_LENGTH;\n                listSysDeparts = ExcelImportUtil.importExcel(file.getInputStream(), SysDepart.class, params);\n                //按长度排序\n                Collections.sort(listSysDeparts, new Comparator<SysDepart>() {\n                    @Override\n\t\t\t\t\tpublic int compare(SysDepart arg0, SysDepart arg1) {\n                    \treturn arg0.getOrgCode().length() - arg1.getOrgCode().length();\n                    }\n                });\n\n                int num = 0;\n                for (SysDepart sysDepart : listSysDeparts) {\n                \tString orgCode = sysDepart.getOrgCode();\n                \tif(orgCode.length() > codeLength) {\n                \t\tString parentCode = orgCode.substring(0, orgCode.length()-codeLength);\n                \t\tQueryWrapper<SysDepart> queryWrapper = new QueryWrapper<SysDepart>();\n                \t\tqueryWrapper.eq(\"org_code\", parentCode);\n                \t\ttry {\n                \t\tSysDepart parentDept = sysDepartService.getOne(queryWrapper);\n                \t\tif(!parentDept.equals(null)) {\n\t\t\t\t\t\t\tsysDepart.setParentId(parentDept.getId());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsysDepart.setParentId(\"\");\n\t\t\t\t\t\t}\n                \t\t}catch (Exception e) {\n                \t\t\t//没有查找到parentDept\n                \t\t}\n                \t}else{\n                \t\tsysDepart.setParentId(\"\");\n\t\t\t\t\t}\n                    //update-begin---author:liusq   Date:20210223  for：批量导入部门以后，不能追加下一级部门 #2245------------\n\t\t\t\t\tsysDepart.setOrgType(sysDepart.getOrgCode().length()/codeLength+\"\");\n                    //update-end---author:liusq   Date:20210223  for：批量导入部门以后，不能追加下一级部门 #2245------------\n\t\t\t\t\tsysDepart.setDelFlag(CommonConstant.DEL_FLAG_0.toString());\n                    //update-begin---author:wangshuai ---date:20220105  for：[JTC-363]部门导入 机构类别没有时导入失败，赋默认值------------\n\t\t\t\t\tif(oConvertUtils.isEmpty(sysDepart.getOrgCategory())){\n\t\t\t\t\t    sysDepart.setOrgCategory(\"1\");\n                    }\n                    //update-end---author:wangshuai ---date:20220105  for：[JTC-363]部门导入 机构类别没有时导入失败，赋默认值------------\n\t\t\t\t\tImportExcelUtil.importDateSaveOne(sysDepart, ISysDepartService.class, errorMessageList, num, CommonConstant.SQL_INDEX_UNIQ_DEPART_ORG_CODE);\n\t\t\t\t\tnum++;\n                }\n\t\t\t\t//清空部门缓存\n\t\t\t\tSet keys3 = redisTemplate.keys(CacheConstant.SYS_DEPARTS_CACHE + \"*\");\n\t\t\t\tSet keys4 = redisTemplate.keys(CacheConstant.SYS_DEPART_IDS_CACHE + \"*\");\n\t\t\t\tredisTemplate.delete(keys3);\n\t\t\t\tredisTemplate.delete(keys4);\n\t\t\t\treturn ImportExcelUtil.imporReturnRes(errorMessageList.size(), listSysDeparts.size() - errorMessageList.size(), errorMessageList);\n            } catch (Exception e) {\n                log.error(e.getMessage(),e);\n                return Result.error(\"文件导入失败:\"+e.getMessage());\n            } finally {\n                try {\n                    file.getInputStream().close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n        return Result.error(\"文件导入失败！\");\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartRoleController.java",
        "method_name": "add",
        "old_function": "@ApiOperation(value=\"部门角色-添加\", notes=\"部门角色-添加\")\n\t@PostMapping(value = \"/add\")\n\tpublic Result<?> add(@RequestBody SysDepartRole sysDepartRole) {\n\t\tsysDepartRoleService.save(sysDepartRole);\n\t\treturn Result.ok(\"添加成功！\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:depart:role:add\")\n\t@ApiOperation(value=\"部门角色-添加\", notes=\"部门角色-添加\")\n\t@PostMapping(value = \"/add\")\n\tpublic Result<?> add(@RequestBody SysDepartRole sysDepartRole) {\n\t\tsysDepartRoleService.save(sysDepartRole);\n\t\treturn Result.ok(\"添加成功！\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartRoleController.java",
        "method_name": "edit",
        "old_function": "@ApiOperation(value=\"部门角色-编辑\", notes=\"部门角色-编辑\")\n    //@RequiresPermissions(\"system:depart:role:edit\")\n\t@RequestMapping(value = \"/edit\", method = {RequestMethod.PUT,RequestMethod.POST})\n\tpublic Result<?> edit(@RequestBody SysDepartRole sysDepartRole) {\n\t\tsysDepartRoleService.updateById(sysDepartRole);\n\t\treturn Result.ok(\"编辑成功!\");\n\t}",
        "new_function": "@ApiOperation(value=\"部门角色-编辑\", notes=\"部门角色-编辑\")\n    @RequiresPermissions(\"system:depart:role:edit\")\n\t@RequestMapping(value = \"/edit\", method = {RequestMethod.PUT,RequestMethod.POST})\n\tpublic Result<?> edit(@RequestBody SysDepartRole sysDepartRole) {\n\t\tsysDepartRoleService.updateById(sysDepartRole);\n\t\treturn Result.ok(\"编辑成功!\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartRoleController.java",
        "method_name": "delete",
        "old_function": "@AutoLog(value = \"部门角色-通过id删除\")\n\t@ApiOperation(value=\"部门角色-通过id删除\", notes=\"部门角色-通过id删除\")\n    //@RequiresPermissions(\"system:depart:role:delete\")\n\t@DeleteMapping(value = \"/delete\")\n\tpublic Result<?> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tsysDepartRoleService.removeById(id);\n\t\treturn Result.ok(\"删除成功!\");\n\t}",
        "new_function": "@AutoLog(value = \"部门角色-通过id删除\")\n\t@ApiOperation(value=\"部门角色-通过id删除\", notes=\"部门角色-通过id删除\")\n    @RequiresPermissions(\"system:depart:role:delete\")\n\t@DeleteMapping(value = \"/delete\")\n\tpublic Result<?> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tsysDepartRoleService.removeById(id);\n\t\treturn Result.ok(\"删除成功!\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartRoleController.java",
        "method_name": "deleteBatch",
        "old_function": "@AutoLog(value = \"部门角色-批量删除\")\n\t@ApiOperation(value=\"部门角色-批量删除\", notes=\"部门角色-批量删除\")\n    //@RequiresPermissions(\"system:depart:role:deleteBatch\")\n\t@DeleteMapping(value = \"/deleteBatch\")\n\tpublic Result<?> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tthis.sysDepartRoleService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\treturn Result.ok(\"批量删除成功！\");\n\t}",
        "new_function": "@AutoLog(value = \"部门角色-批量删除\")\n\t@ApiOperation(value=\"部门角色-批量删除\", notes=\"部门角色-批量删除\")\n    @RequiresPermissions(\"system:depart:role:deleteBatch\")\n\t@DeleteMapping(value = \"/deleteBatch\")\n\tpublic Result<?> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tthis.sysDepartRoleService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\treturn Result.ok(\"批量删除成功！\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDepartRoleController.java",
        "method_name": "deptRoleAdd",
        "old_function": "@RequestMapping(value = \"/deptRoleUserAdd\", method = RequestMethod.POST)\n\t public Result<?> deptRoleAdd(@RequestBody JSONObject json) {\n\t\t String newRoleId = json.getString(\"newRoleId\");\n\t\t String oldRoleId = json.getString(\"oldRoleId\");\n\t\t String userId = json.getString(\"userId\");\n\t\t departRoleUserService.deptRoleUserAdd(userId,newRoleId,oldRoleId);\n         //update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]部门角色分配添加敏感日志------------\n         LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n         baseCommonService.addLog(\"给部门用户ID：\"+userId+\"分配角色，操作人： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n         //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]部门角色分配添加敏感日志------------\n         return Result.ok(\"添加成功！\");\n\t }",
        "new_function": "@RequiresPermissions(\"system:depart:role:userAdd\")\n\t @RequestMapping(value = \"/deptRoleUserAdd\", method = RequestMethod.POST)\n\t public Result<?> deptRoleAdd(@RequestBody JSONObject json) {\n\t\t String newRoleId = json.getString(\"newRoleId\");\n\t\t String oldRoleId = json.getString(\"oldRoleId\");\n\t\t String userId = json.getString(\"userId\");\n\t\t departRoleUserService.deptRoleUserAdd(userId,newRoleId,oldRoleId);\n         //update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]部门角色分配添加敏感日志------------\n         LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n         baseCommonService.addLog(\"给部门用户ID：\"+userId+\"分配角色，操作人： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n         //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]部门角色分配添加敏感日志------------\n         return Result.ok(\"添加成功！\");\n\t }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictController.java",
        "method_name": "add",
        "old_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<SysDict> add(@RequestBody SysDict sysDict) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\ttry {\n\t\t\tsysDict.setCreateTime(new Date());\n\t\t\tsysDict.setDelFlag(CommonConstant.DEL_FLAG_0);\n\t\t\tsysDictService.save(sysDict);\n\t\t\tresult.success(\"保存成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:add\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<SysDict> add(@RequestBody SysDict sysDict) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\ttry {\n\t\t\tsysDict.setCreateTime(new Date());\n\t\t\tsysDict.setDelFlag(CommonConstant.DEL_FLAG_0);\n\t\t\tsysDictService.save(sysDict);\n\t\t\tresult.success(\"保存成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictController.java",
        "method_name": "edit",
        "old_function": "@RequestMapping(value = \"/edit\", method = { RequestMethod.PUT,RequestMethod.POST })\n\tpublic Result<SysDict> edit(@RequestBody SysDict sysDict) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\tSysDict sysdict = sysDictService.getById(sysDict.getId());\n\t\tif(sysdict==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tsysDict.setUpdateTime(new Date());\n\t\t\tboolean ok = sysDictService.updateById(sysDict);\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"编辑成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:edit\")\n\t@RequestMapping(value = \"/edit\", method = { RequestMethod.PUT,RequestMethod.POST })\n\tpublic Result<SysDict> edit(@RequestBody SysDict sysDict) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\tSysDict sysdict = sysDictService.getById(sysDict.getId());\n\t\tif(sysdict==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tsysDict.setUpdateTime(new Date());\n\t\t\tboolean ok = sysDictService.updateById(sysDict);\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"编辑成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDict> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\tboolean ok = sysDictService.removeById(id);\n\t\tif(ok) {\n\t\t\tresult.success(\"删除成功!\");\n\t\t}else{\n\t\t\tresult.error500(\"删除失败!\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:delete\")\n\t@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDict> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\tboolean ok = sysDictService.removeById(id);\n\t\tif(ok) {\n\t\t\tresult.success(\"删除成功!\");\n\t\t}else{\n\t\t\tresult.error500(\"删除失败!\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\t@CacheEvict(value= {CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDict> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\tif(oConvertUtils.isEmpty(ids)) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t}else {\n\t\t\tsysDictService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:deleteBatch\")\n\t@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\t@CacheEvict(value= {CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDict> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysDict> result = new Result<SysDict>();\n\t\tif(oConvertUtils.isEmpty(ids)) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t}else {\n\t\t\tsysDictService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictController.java",
        "method_name": "importExcel",
        "old_function": "@RequestMapping(value = \"/importExcel\", method = RequestMethod.POST)\n\tpublic Result<?> importExcel(HttpServletRequest request, HttpServletResponse response) {\n \t\tMultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;\n\t\tMap<String, MultipartFile> fileMap = multipartRequest.getFileMap();\n\t\tfor (Map.Entry<String, MultipartFile> entity : fileMap.entrySet()) {\n            // 获取上传文件对象\n\t\t\tMultipartFile file = entity.getValue();\n\t\t\tImportParams params = new ImportParams();\n\t\t\tparams.setTitleRows(2);\n\t\t\tparams.setHeadRows(2);\n\t\t\tparams.setNeedSave(true);\n\t\t\ttry {\n\t\t\t\t//导入Excel格式校验，看匹配的字段文本概率\n\t\t\t\tBoolean t = ExcelImportCheckUtil.check(file.getInputStream(), SysDictPage.class, params);\n\t\t\t\tif(t!=null && !t){\n\t\t\t\t\tthrow new RuntimeException(\"导入Excel校验失败 ！\");\n\t\t\t\t}\n\t\t\t\tList<SysDictPage> list = ExcelImportUtil.importExcel(file.getInputStream(), SysDictPage.class, params);\n\t\t\t\t// 错误信息\n\t\t\t\tList<String> errorMessage = new ArrayList<>();\n\t\t\t\tint successLines = 0, errorLines = 0;\n\t\t\t\tfor (int i=0;i< list.size();i++) {\n\t\t\t\t\tSysDict po = new SysDict();\n\t\t\t\t\tBeanUtils.copyProperties(list.get(i), po);\n\t\t\t\t\tpo.setDelFlag(CommonConstant.DEL_FLAG_0);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tInteger integer = sysDictService.saveMain(po, list.get(i).getSysDictItemList());\n\t\t\t\t\t\tif(integer>0){\n\t\t\t\t\t\t\tsuccessLines++;\n                        //update-begin---author:wangshuai ---date:20220211  for：[JTC-1168]如果字典项值为空，则字典项忽略导入------------\n\t\t\t\t\t\t}else if(integer == -1){\n                            errorLines++;\n                            errorMessage.add(\"字典名称：\" + po.getDictName() + \"，对应字典列表的字典项值不能为空，忽略导入。\");\n                        }else{\n                        //update-end---author:wangshuai ---date:20220211  for：[JTC-1168]如果字典项值为空，则字典项忽略导入------------\n\t\t\t\t\t\t\terrorLines++;\n\t\t\t\t\t\t\tint lineNumber = i + 1;\n                            //update-begin---author:wangshuai ---date:20220209  for：[JTC-1168]字典编号不能为空------------\n                            if(oConvertUtils.isEmpty(po.getDictCode())){\n                                errorMessage.add(\"第 \" + lineNumber + \" 行：字典编码不能为空，忽略导入。\");\n                            }else{\n                                errorMessage.add(\"第 \" + lineNumber + \" 行：字典编码已经存在，忽略导入。\");\n                            }\n                            //update-end---author:wangshuai ---date:20220209  for：[JTC-1168]字典编号不能为空------------\n                        }\n\t\t\t\t\t}  catch (Exception e) {\n\t\t\t\t\t\terrorLines++;\n\t\t\t\t\t\tint lineNumber = i + 1;\n\t\t\t\t\t\terrorMessage.add(\"第 \" + lineNumber + \" 行：字典编码已经存在，忽略导入。\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ImportExcelUtil.imporReturnRes(errorLines,successLines,errorMessage);\n\t\t\t} catch (Exception e) {\n\t\t\t\tlog.error(e.getMessage(),e);\n\t\t\t\treturn Result.error(\"文件导入失败:\"+e.getMessage());\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tfile.getInputStream().close();\n\t\t\t\t} catch (Exception e) {\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Result.error(\"文件导入失败！\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:importExcel\")\n\t@RequestMapping(value = \"/importExcel\", method = RequestMethod.POST)\n\tpublic Result<?> importExcel(HttpServletRequest request, HttpServletResponse response) {\n \t\tMultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;\n\t\tMap<String, MultipartFile> fileMap = multipartRequest.getFileMap();\n\t\tfor (Map.Entry<String, MultipartFile> entity : fileMap.entrySet()) {\n            // 获取上传文件对象\n\t\t\tMultipartFile file = entity.getValue();\n\t\t\tImportParams params = new ImportParams();\n\t\t\tparams.setTitleRows(2);\n\t\t\tparams.setHeadRows(2);\n\t\t\tparams.setNeedSave(true);\n\t\t\ttry {\n\t\t\t\t//导入Excel格式校验，看匹配的字段文本概率\n\t\t\t\tBoolean t = ExcelImportCheckUtil.check(file.getInputStream(), SysDictPage.class, params);\n\t\t\t\tif(t!=null && !t){\n\t\t\t\t\tthrow new RuntimeException(\"导入Excel校验失败 ！\");\n\t\t\t\t}\n\t\t\t\tList<SysDictPage> list = ExcelImportUtil.importExcel(file.getInputStream(), SysDictPage.class, params);\n\t\t\t\t// 错误信息\n\t\t\t\tList<String> errorMessage = new ArrayList<>();\n\t\t\t\tint successLines = 0, errorLines = 0;\n\t\t\t\tfor (int i=0;i< list.size();i++) {\n\t\t\t\t\tSysDict po = new SysDict();\n\t\t\t\t\tBeanUtils.copyProperties(list.get(i), po);\n\t\t\t\t\tpo.setDelFlag(CommonConstant.DEL_FLAG_0);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tInteger integer = sysDictService.saveMain(po, list.get(i).getSysDictItemList());\n\t\t\t\t\t\tif(integer>0){\n\t\t\t\t\t\t\tsuccessLines++;\n                        //update-begin---author:wangshuai ---date:20220211  for：[JTC-1168]如果字典项值为空，则字典项忽略导入------------\n\t\t\t\t\t\t}else if(integer == -1){\n                            errorLines++;\n                            errorMessage.add(\"字典名称：\" + po.getDictName() + \"，对应字典列表的字典项值不能为空，忽略导入。\");\n                        }else{\n                        //update-end---author:wangshuai ---date:20220211  for：[JTC-1168]如果字典项值为空，则字典项忽略导入------------\n\t\t\t\t\t\t\terrorLines++;\n\t\t\t\t\t\t\tint lineNumber = i + 1;\n                            //update-begin---author:wangshuai ---date:20220209  for：[JTC-1168]字典编号不能为空------------\n                            if(oConvertUtils.isEmpty(po.getDictCode())){\n                                errorMessage.add(\"第 \" + lineNumber + \" 行：字典编码不能为空，忽略导入。\");\n                            }else{\n                                errorMessage.add(\"第 \" + lineNumber + \" 行：字典编码已经存在，忽略导入。\");\n                            }\n                            //update-end---author:wangshuai ---date:20220209  for：[JTC-1168]字典编号不能为空------------\n                        }\n\t\t\t\t\t}  catch (Exception e) {\n\t\t\t\t\t\terrorLines++;\n\t\t\t\t\t\tint lineNumber = i + 1;\n\t\t\t\t\t\terrorMessage.add(\"第 \" + lineNumber + \" 行：字典编码已经存在，忽略导入。\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ImportExcelUtil.imporReturnRes(errorLines,successLines,errorMessage);\n\t\t\t} catch (Exception e) {\n\t\t\t\tlog.error(e.getMessage(),e);\n\t\t\t\treturn Result.error(\"文件导入失败:\"+e.getMessage());\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tfile.getInputStream().close();\n\t\t\t\t} catch (Exception e) {\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Result.error(\"文件导入失败！\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictItemController.java",
        "method_name": "add",
        "old_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\t@CacheEvict(value= {CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> add(@RequestBody SysDictItem sysDictItem) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\ttry {\n\t\t\tsysDictItem.setCreateTime(new Date());\n\t\t\tsysDictItemService.save(sysDictItem);\n\t\t\tresult.success(\"保存成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:item:add\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\t@CacheEvict(value= {CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> add(@RequestBody SysDictItem sysDictItem) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\ttry {\n\t\t\tsysDictItem.setCreateTime(new Date());\n\t\t\tsysDictItemService.save(sysDictItem);\n\t\t\tresult.success(\"保存成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(),e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictItemController.java",
        "method_name": "edit",
        "old_function": "@RequestMapping(value = \"/edit\",  method = { RequestMethod.PUT,RequestMethod.POST })\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> edit(@RequestBody SysDictItem sysDictItem) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\tSysDictItem sysdict = sysDictItemService.getById(sysDictItem.getId());\n\t\tif(sysdict==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tsysDictItem.setUpdateTime(new Date());\n\t\t\tboolean ok = sysDictItemService.updateById(sysDictItem);\n\t\t\t//TODO 返回false说明什么？\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"编辑成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:item:edit\")\n\t@RequestMapping(value = \"/edit\",  method = { RequestMethod.PUT,RequestMethod.POST })\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> edit(@RequestBody SysDictItem sysDictItem) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\tSysDictItem sysdict = sysDictItemService.getById(sysDictItem.getId());\n\t\tif(sysdict==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tsysDictItem.setUpdateTime(new Date());\n\t\t\tboolean ok = sysDictItemService.updateById(sysDictItem);\n\t\t\t//TODO 返回false说明什么？\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"编辑成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictItemController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\tSysDictItem joinSystem = sysDictItemService.getById(id);\n\t\tif(joinSystem==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tboolean ok = sysDictItemService.removeById(id);\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"删除成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:item:delete\")\n\t@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\tSysDictItem joinSystem = sysDictItemService.getById(id);\n\t\tif(joinSystem==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tboolean ok = sysDictItemService.removeById(id);\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"删除成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysDictItemController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\tif(ids==null || \"\".equals(ids.trim())) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t}else {\n\t\t\tthis.sysDictItemService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:dict:item:deleteBatch\")\n\t@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\t@CacheEvict(value={CacheConstant.SYS_DICT_CACHE, CacheConstant.SYS_ENABLE_DICT_CACHE}, allEntries=true)\n\tpublic Result<SysDictItem> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysDictItem> result = new Result<SysDictItem>();\n\t\tif(ids==null || \"\".equals(ids.trim())) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t}else {\n\t\t\tthis.sysDictItemService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysGatewayRouteController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n    public Result<?> delete(@RequestParam(name = \"id\", required = true) String id) {\n        sysGatewayRouteService.deleteById(id);\n        return Result.ok(\"删除路由成功\");\n    }",
        "new_function": "@RequiresPermissions(\"system:getway:delete\")\n    @RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n    public Result<?> delete(@RequestParam(name = \"id\", required = true) String id) {\n        sysGatewayRouteService.deleteById(id);\n        return Result.ok(\"删除路由成功\");\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "add",
        "old_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<SysPermission> add(@RequestBody SysPermission permission) {\n\t\tResult<SysPermission> result = new Result<SysPermission>();\n\t\ttry {\n\t\t\tpermission = PermissionDataUtil.intelligentProcessData(permission);\n\t\t\tsysPermissionService.addPermission(permission);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:add\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<SysPermission> add(@RequestBody SysPermission permission) {\n\t\tResult<SysPermission> result = new Result<SysPermission>();\n\t\ttry {\n\t\t\tpermission = PermissionDataUtil.intelligentProcessData(permission);\n\t\t\tsysPermissionService.addPermission(permission);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "edit",
        "old_function": "@RequestMapping(value = \"/edit\", method = { RequestMethod.PUT, RequestMethod.POST })\n\tpublic Result<SysPermission> edit(@RequestBody SysPermission permission) {\n\t\tResult<SysPermission> result = new Result<>();\n\t\ttry {\n\t\t\tpermission = PermissionDataUtil.intelligentProcessData(permission);\n\t\t\tsysPermissionService.editPermission(permission);\n\t\t\tresult.success(\"修改成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:edit\")\n\t@RequestMapping(value = \"/edit\", method = { RequestMethod.PUT, RequestMethod.POST })\n\tpublic Result<SysPermission> edit(@RequestBody SysPermission permission) {\n\t\tResult<SysPermission> result = new Result<>();\n\t\ttry {\n\t\t\tpermission = PermissionDataUtil.intelligentProcessData(permission);\n\t\t\tsysPermissionService.editPermission(permission);\n\t\t\tresult.success(\"修改成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<SysPermission> delete(@RequestParam(name = \"id\", required = true) String id) {\n\t\tResult<SysPermission> result = new Result<>();\n\t\ttry {\n\t\t\tsysPermissionService.deletePermission(id);\n\t\t\tresult.success(\"删除成功!\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(e.getMessage());\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:delete\")\n\t@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<SysPermission> delete(@RequestParam(name = \"id\", required = true) String id) {\n\t\tResult<SysPermission> result = new Result<>();\n\t\ttry {\n\t\t\tsysPermissionService.deletePermission(id);\n\t\t\tresult.success(\"删除成功!\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(e.getMessage());\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<SysPermission> deleteBatch(@RequestParam(name = \"ids\", required = true) String ids) {\n\t\tResult<SysPermission> result = new Result<>();\n\t\ttry {\n            String[] arr = ids.split(\",\");\n\t\t\tfor (String id : arr) {\n\t\t\t\tif (oConvertUtils.isNotEmpty(id)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsysPermissionService.deletePermission(id);\n\t\t\t\t\t} catch (JeecgBootException e) {\n\t\t\t\t\t\tif(e.getMessage()!=null && e.getMessage().contains(\"未找到菜单信息\")){\n\t\t\t\t\t\t\tlog.warn(e.getMessage());\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.success(\"删除成功!\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"删除失败!\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:deleteBatch\")\n\t@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<SysPermission> deleteBatch(@RequestParam(name = \"ids\", required = true) String ids) {\n\t\tResult<SysPermission> result = new Result<>();\n\t\ttry {\n            String[] arr = ids.split(\",\");\n\t\t\tfor (String id : arr) {\n\t\t\t\tif (oConvertUtils.isNotEmpty(id)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsysPermissionService.deletePermission(id);\n\t\t\t\t\t} catch (JeecgBootException e) {\n\t\t\t\t\t\tif(e.getMessage()!=null && e.getMessage().contains(\"未找到菜单信息\")){\n\t\t\t\t\t\t\tlog.warn(e.getMessage());\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.success(\"删除成功!\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"删除失败!\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "saveRolePermission",
        "old_function": "@RequestMapping(value = \"/saveRolePermission\", method = RequestMethod.POST)\n\tpublic Result<String> saveRolePermission(@RequestBody JSONObject json) {\n\t\tlong start = System.currentTimeMillis();\n\t\tResult<String> result = new Result<>();\n\t\ttry {\n\t\t\tString roleId = json.getString(\"roleId\");\n\t\t\tString permissionIds = json.getString(\"permissionIds\");\n\t\t\tString lastPermissionIds = json.getString(\"lastpermissionIds\");\n\t\t\tthis.sysRolePermissionService.saveRolePermission(roleId, permissionIds, lastPermissionIds);\n\t\t\t//update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]用户管理角色授权添加敏感日志------------\n            LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n\t\t\tbaseCommonService.addLog(\"修改角色ID: \"+roleId+\" 的权限配置，操作人： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n            //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]用户管理角色授权添加敏感日志------------\n\t\t\tresult.success(\"保存成功！\");\n\t\t\tlog.info(\"======角色授权成功=====耗时:\" + (System.currentTimeMillis() - start) + \"毫秒\");\n\t\t} catch (Exception e) {\n\t\t\tresult.error500(\"授权失败！\");\n\t\t\tlog.error(e.getMessage(), e);\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:saveRole\")\n\t@RequestMapping(value = \"/saveRolePermission\", method = RequestMethod.POST)\n\tpublic Result<String> saveRolePermission(@RequestBody JSONObject json) {\n\t\tlong start = System.currentTimeMillis();\n\t\tResult<String> result = new Result<>();\n\t\ttry {\n\t\t\tString roleId = json.getString(\"roleId\");\n\t\t\tString permissionIds = json.getString(\"permissionIds\");\n\t\t\tString lastPermissionIds = json.getString(\"lastpermissionIds\");\n\t\t\tthis.sysRolePermissionService.saveRolePermission(roleId, permissionIds, lastPermissionIds);\n\t\t\t//update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]用户管理角色授权添加敏感日志------------\n            LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n\t\t\tbaseCommonService.addLog(\"修改角色ID: \"+roleId+\" 的权限配置，操作人： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n            //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]用户管理角色授权添加敏感日志------------\n\t\t\tresult.success(\"保存成功！\");\n\t\t\tlog.info(\"======角色授权成功=====耗时:\" + (System.currentTimeMillis() - start) + \"毫秒\");\n\t\t} catch (Exception e) {\n\t\t\tresult.error500(\"授权失败！\");\n\t\t\tlog.error(e.getMessage(), e);\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "addPermissionRule",
        "old_function": "@RequestMapping(value = \"/addPermissionRule\", method = RequestMethod.POST)\n\tpublic Result<SysPermissionDataRule> addPermissionRule(@RequestBody SysPermissionDataRule sysPermissionDataRule) {\n\t\tResult<SysPermissionDataRule> result = new Result<SysPermissionDataRule>();\n\t\ttry {\n\t\t\tsysPermissionDataRule.setCreateTime(new Date());\n\t\t\tsysPermissionDataRuleService.savePermissionDataRule(sysPermissionDataRule);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:addRule\")\n\t@RequestMapping(value = \"/addPermissionRule\", method = RequestMethod.POST)\n\tpublic Result<SysPermissionDataRule> addPermissionRule(@RequestBody SysPermissionDataRule sysPermissionDataRule) {\n\t\tResult<SysPermissionDataRule> result = new Result<SysPermissionDataRule>();\n\t\ttry {\n\t\t\tsysPermissionDataRule.setCreateTime(new Date());\n\t\t\tsysPermissionDataRuleService.savePermissionDataRule(sysPermissionDataRule);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "editPermissionRule",
        "old_function": "@RequestMapping(value = \"/editPermissionRule\", method = { RequestMethod.PUT, RequestMethod.POST })\n\tpublic Result<SysPermissionDataRule> editPermissionRule(@RequestBody SysPermissionDataRule sysPermissionDataRule) {\n\t\tResult<SysPermissionDataRule> result = new Result<SysPermissionDataRule>();\n\t\ttry {\n\t\t\tsysPermissionDataRuleService.saveOrUpdate(sysPermissionDataRule);\n\t\t\tresult.success(\"更新成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:editRule\")\n\t@RequestMapping(value = \"/editPermissionRule\", method = { RequestMethod.PUT, RequestMethod.POST })\n\tpublic Result<SysPermissionDataRule> editPermissionRule(@RequestBody SysPermissionDataRule sysPermissionDataRule) {\n\t\tResult<SysPermissionDataRule> result = new Result<SysPermissionDataRule>();\n\t\ttry {\n\t\t\tsysPermissionDataRuleService.saveOrUpdate(sysPermissionDataRule);\n\t\t\tresult.success(\"更新成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "deletePermissionRule",
        "old_function": "@RequestMapping(value = \"/deletePermissionRule\", method = RequestMethod.DELETE)\n\tpublic Result<SysPermissionDataRule> deletePermissionRule(@RequestParam(name = \"id\", required = true) String id) {\n\t\tResult<SysPermissionDataRule> result = new Result<SysPermissionDataRule>();\n\t\ttry {\n\t\t\tsysPermissionDataRuleService.deletePermissionDataRule(id);\n\t\t\tresult.success(\"删除成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:permission:deleteRule\")\n\t@RequestMapping(value = \"/deletePermissionRule\", method = RequestMethod.DELETE)\n\tpublic Result<SysPermissionDataRule> deletePermissionRule(@RequestParam(name = \"id\", required = true) String id) {\n\t\tResult<SysPermissionDataRule> result = new Result<SysPermissionDataRule>();\n\t\ttry {\n\t\t\tsysPermissionDataRuleService.deletePermissionDataRule(id);\n\t\t\tresult.success(\"删除成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysPermissionController.java",
        "method_name": "saveDepartPermission",
        "old_function": "@RequestMapping(value = \"/saveDepartPermission\", method = RequestMethod.POST)\n    //@RequiresPermissions(\"system:permission:saveDepart\")\n\tpublic Result<String> saveDepartPermission(@RequestBody JSONObject json) {\n\t\tlong start = System.currentTimeMillis();\n\t\tResult<String> result = new Result<>();\n\t\ttry {\n\t\t\tString departId = json.getString(\"departId\");\n\t\t\tString permissionIds = json.getString(\"permissionIds\");\n\t\t\tString lastPermissionIds = json.getString(\"lastpermissionIds\");\n\t\t\tthis.sysDepartPermissionService.saveDepartPermission(departId, permissionIds, lastPermissionIds);\n\t\t\tresult.success(\"保存成功！\");\n\t\t\tlog.info(\"======部门授权成功=====耗时:\" + (System.currentTimeMillis() - start) + \"毫秒\");\n\t\t} catch (Exception e) {\n\t\t\tresult.error500(\"授权失败！\");\n\t\t\tlog.error(e.getMessage(), e);\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequestMapping(value = \"/saveDepartPermission\", method = RequestMethod.POST)\n    @RequiresPermissions(\"system:permission:saveDepart\")\n\tpublic Result<String> saveDepartPermission(@RequestBody JSONObject json) {\n\t\tlong start = System.currentTimeMillis();\n\t\tResult<String> result = new Result<>();\n\t\ttry {\n\t\t\tString departId = json.getString(\"departId\");\n\t\t\tString permissionIds = json.getString(\"permissionIds\");\n\t\t\tString lastPermissionIds = json.getString(\"lastpermissionIds\");\n\t\t\tthis.sysDepartPermissionService.saveDepartPermission(departId, permissionIds, lastPermissionIds);\n\t\t\tresult.success(\"保存成功！\");\n\t\t\tlog.info(\"======部门授权成功=====耗时:\" + (System.currentTimeMillis() - start) + \"毫秒\");\n\t\t} catch (Exception e) {\n\t\t\tresult.error500(\"授权失败！\");\n\t\t\tlog.error(e.getMessage(), e);\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysRoleController.java",
        "method_name": "add",
        "old_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n    //@RequiresPermissions(\"system:role:add\")\n\tpublic Result<SysRole> add(@RequestBody SysRole role) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\ttry {\n\t\t\trole.setCreateTime(new Date());\n\t\t\tsysRoleService.save(role);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n    @RequiresPermissions(\"system:role:add\")\n\tpublic Result<SysRole> add(@RequestBody SysRole role) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\ttry {\n\t\t\trole.setCreateTime(new Date());\n\t\t\tsysRoleService.save(role);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysRoleController.java",
        "method_name": "edit",
        "old_function": "@RequestMapping(value = \"/edit\",method = {RequestMethod.PUT,RequestMethod.POST})\n\tpublic Result<SysRole> edit(@RequestBody SysRole role) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\tSysRole sysrole = sysRoleService.getById(role.getId());\n\t\tif(sysrole==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\trole.setUpdateTime(new Date());\n\t\t\tboolean ok = sysRoleService.updateById(role);\n\t\t\t//TODO 返回false说明什么？\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"修改成功!\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:role:edit\")\n\t@RequestMapping(value = \"/edit\",method = {RequestMethod.PUT,RequestMethod.POST})\n\tpublic Result<SysRole> edit(@RequestBody SysRole role) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\tSysRole sysrole = sysRoleService.getById(role.getId());\n\t\tif(sysrole==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\trole.setUpdateTime(new Date());\n\t\t\tboolean ok = sysRoleService.updateById(role);\n\t\t\t//TODO 返回false说明什么？\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"修改成功!\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysRoleController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<?> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tsysRoleService.deleteRole(id);\n\t\treturn Result.ok(\"删除角色成功\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:role:delete\")\n\t@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<?> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tsysRoleService.deleteRole(id);\n\t\treturn Result.ok(\"删除角色成功\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysRoleController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<SysRole> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\tif(oConvertUtils.isEmpty(ids)) {\n\t\t\tresult.error500(\"未选中角色！\");\n\t\t}else {\n\t\t\tsysRoleService.deleteBatchRole(ids.split(\",\"));\n\t\t\tresult.success(\"删除角色成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:role:deleteBatch\")\n\t@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<SysRole> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\tif(oConvertUtils.isEmpty(ids)) {\n\t\t\tresult.error500(\"未选中角色！\");\n\t\t}else {\n\t\t\tsysRoleService.deleteBatchRole(ids.split(\",\"));\n\t\t\tresult.success(\"删除角色成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysRoleController.java",
        "method_name": "queryallNoByTenant",
        "old_function": "@RequestMapping(value = \"/queryallNoByTenant\", method = RequestMethod.GET)\n\tpublic Result<List<SysRole>> queryallNoByTenant() {\n\t\tResult<List<SysRole>> result = new Result<>();\n\t\tLambdaQueryWrapper<SysRole> query = new LambdaQueryWrapper<SysRole>();\n\t\tList<SysRole> list = sysRoleService.list(query);\n\t\tif(list==null||list.size()<=0) {\n\t\t\tresult.error500(\"未找到角色信息\");\n\t\t}else {\n\t\t\tresult.setResult(list);\n\t\t\tresult.setSuccess(true);\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:role:queryallNoByTenant\")\n\t@RequestMapping(value = \"/queryallNoByTenant\", method = RequestMethod.GET)\n\tpublic Result<List<SysRole>> queryallNoByTenant() {\n\t\tResult<List<SysRole>> result = new Result<>();\n\t\tLambdaQueryWrapper<SysRole> query = new LambdaQueryWrapper<SysRole>();\n\t\tList<SysRole> list = sysRoleService.list(query);\n\t\tif(list==null||list.size()<=0) {\n\t\t\tresult.error500(\"未找到角色信息\");\n\t\t}else {\n\t\t\tresult.setResult(list);\n\t\t\tresult.setSuccess(true);\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysRoleIndexController.java",
        "method_name": "add",
        "old_function": "@AutoLog(value = \"角色首页配置-添加\")\n    @ApiOperation(value = \"角色首页配置-添加\", notes = \"角色首页配置-添加\")\n    @PostMapping(value = \"/add\")\n    //@DynamicTable(value = DynamicTableConstant.SYS_ROLE_INDEX)\n    public Result<?> add(@RequestBody SysRoleIndex sysRoleIndex,HttpServletRequest request) {\n        sysRoleIndexService.save(sysRoleIndex);\n        return Result.OK(\"添加成功！\");\n    }",
        "new_function": "@RequiresPermissions(\"system:roleindex:add\")\n    @AutoLog(value = \"角色首页配置-添加\")\n    @ApiOperation(value = \"角色首页配置-添加\", notes = \"角色首页配置-添加\")\n    @PostMapping(value = \"/add\")\n    //@DynamicTable(value = DynamicTableConstant.SYS_ROLE_INDEX)\n    public Result<?> add(@RequestBody SysRoleIndex sysRoleIndex,HttpServletRequest request) {\n        sysRoleIndexService.save(sysRoleIndex);\n        return Result.OK(\"添加成功！\");\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysRoleIndexController.java",
        "method_name": "edit",
        "old_function": "@AutoLog(value = \"角色首页配置-编辑\")\n    @ApiOperation(value = \"角色首页配置-编辑\", notes = \"角色首页配置-编辑\")\n    @RequestMapping(value = \"/edit\", method = {RequestMethod.PUT, RequestMethod.POST})\n    //@DynamicTable(value = DynamicTableConstant.SYS_ROLE_INDEX)\n    public Result<?> edit(@RequestBody SysRoleIndex sysRoleIndex,HttpServletRequest request) {\n        sysRoleIndexService.updateById(sysRoleIndex);\n        return Result.OK(\"编辑成功!\");\n    }",
        "new_function": "@RequiresPermissions(\"system:roleindex:edit\")\n    @AutoLog(value = \"角色首页配置-编辑\")\n    @ApiOperation(value = \"角色首页配置-编辑\", notes = \"角色首页配置-编辑\")\n    @RequestMapping(value = \"/edit\", method = {RequestMethod.PUT, RequestMethod.POST})\n    //@DynamicTable(value = DynamicTableConstant.SYS_ROLE_INDEX)\n    public Result<?> edit(@RequestBody SysRoleIndex sysRoleIndex,HttpServletRequest request) {\n        sysRoleIndexService.updateById(sysRoleIndex);\n        return Result.OK(\"编辑成功!\");\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "queryAllPageList",
        "old_function": "@RequestMapping(value = \"/listAll\", method = RequestMethod.GET)\n    public Result<IPage<SysUser>> queryAllPageList(SysUser user, @RequestParam(name = \"pageNo\", defaultValue = \"1\") Integer pageNo,\n                                                   @RequestParam(name = \"pageSize\", defaultValue = \"10\") Integer pageSize, HttpServletRequest req) {\n        QueryWrapper<SysUser> queryWrapper = QueryGenerator.initQueryWrapper(user, req.getParameterMap());\n        return sysUserService.queryPageList(req, queryWrapper, pageSize, pageNo);\n    }",
        "new_function": "@RequiresPermissions(\"system:user:listAll\")\n    @RequestMapping(value = \"/listAll\", method = RequestMethod.GET)\n    public Result<IPage<SysUser>> queryAllPageList(SysUser user, @RequestParam(name = \"pageNo\", defaultValue = \"1\") Integer pageNo,\n                                                   @RequestParam(name = \"pageSize\", defaultValue = \"10\") Integer pageSize, HttpServletRequest req) {\n        QueryWrapper<SysUser> queryWrapper = QueryGenerator.initQueryWrapper(user, req.getParameterMap());\n        return sysUserService.queryPageList(req, queryWrapper, pageSize, pageNo);\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "add",
        "old_function": "@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<SysUser> add(@RequestBody JSONObject jsonObject) {\n\t\tResult<SysUser> result = new Result<SysUser>();\n\t\tString selectedRoles = jsonObject.getString(\"selectedroles\");\n\t\tString selectedDeparts = jsonObject.getString(\"selecteddeparts\");\n\t\ttry {\n\t\t\tSysUser user = JSON.parseObject(jsonObject.toJSONString(), SysUser.class);\n\t\t\tuser.setCreateTime(new Date());//设置创建时间\n\t\t\tString salt = oConvertUtils.randomGen(8);\n\t\t\tuser.setSalt(salt);\n\t\t\tString passwordEncode = PasswordUtil.encrypt(user.getUsername(), user.getPassword(), salt);\n\t\t\tuser.setPassword(passwordEncode);\n\t\t\tuser.setStatus(1);\n\t\t\tuser.setDelFlag(CommonConstant.DEL_FLAG_0);\n\t\t\t//用户表字段org_code不能在这里设置他的值\n            user.setOrgCode(null);\n\t\t\t// 保存用户走一个service 保证事务\n            //获取租户ids\n            String relTenantIds = jsonObject.getString(\"relTenantIds\");\n            sysUserService.saveUser(user, selectedRoles, selectedDeparts, relTenantIds);\n            baseCommonService.addLog(\"添加用户，username： \" +user.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:user:add\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic Result<SysUser> add(@RequestBody JSONObject jsonObject) {\n\t\tResult<SysUser> result = new Result<SysUser>();\n\t\tString selectedRoles = jsonObject.getString(\"selectedroles\");\n\t\tString selectedDeparts = jsonObject.getString(\"selecteddeparts\");\n\t\ttry {\n\t\t\tSysUser user = JSON.parseObject(jsonObject.toJSONString(), SysUser.class);\n\t\t\tuser.setCreateTime(new Date());//设置创建时间\n\t\t\tString salt = oConvertUtils.randomGen(8);\n\t\t\tuser.setSalt(salt);\n\t\t\tString passwordEncode = PasswordUtil.encrypt(user.getUsername(), user.getPassword(), salt);\n\t\t\tuser.setPassword(passwordEncode);\n\t\t\tuser.setStatus(1);\n\t\t\tuser.setDelFlag(CommonConstant.DEL_FLAG_0);\n\t\t\t//用户表字段org_code不能在这里设置他的值\n            user.setOrgCode(null);\n\t\t\t// 保存用户走一个service 保证事务\n            //获取租户ids\n            String relTenantIds = jsonObject.getString(\"relTenantIds\");\n            sysUserService.saveUser(user, selectedRoles, selectedDeparts, relTenantIds);\n            baseCommonService.addLog(\"添加用户，username： \" +user.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n\t\t\tresult.success(\"添加成功！\");\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "edit",
        "old_function": "@RequestMapping(value = \"/edit\", method = {RequestMethod.PUT,RequestMethod.POST})\n\tpublic Result<SysUser> edit(@RequestBody JSONObject jsonObject) {\n\t\tResult<SysUser> result = new Result<SysUser>();\n\t\ttry {\n\t\t\tSysUser sysUser = sysUserService.getById(jsonObject.getString(\"id\"));\n\t\t\tbaseCommonService.addLog(\"编辑用户，username： \" +sysUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n\t\t\tif(sysUser==null) {\n\t\t\t\tresult.error500(\"未找到对应实体\");\n\t\t\t}else {\n\t\t\t\tSysUser user = JSON.parseObject(jsonObject.toJSONString(), SysUser.class);\n\t\t\t\tuser.setUpdateTime(new Date());\n\t\t\t\t//String passwordEncode = PasswordUtil.encrypt(user.getUsername(), user.getPassword(), sysUser.getSalt());\n\t\t\t\tuser.setPassword(sysUser.getPassword());\n\t\t\t\tString roles = jsonObject.getString(\"selectedroles\");\n                String departs = jsonObject.getString(\"selecteddeparts\");\n                if(oConvertUtils.isEmpty(departs)){\n                    //vue3.0前端只传递了departIds\n                    departs=user.getDepartIds();\n                }\n                //用户表字段org_code不能在这里设置他的值\n                user.setOrgCode(null);\n                // 修改用户走一个service 保证事务\n                //获取租户ids\n                String relTenantIds = jsonObject.getString(\"relTenantIds\");\n\t\t\t\tsysUserService.editUser(user, roles, departs, relTenantIds);\n\t\t\t\tresult.success(\"修改成功!\");\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequiresPermissions(\"system:user:edit\")\n\t@RequestMapping(value = \"/edit\", method = {RequestMethod.PUT,RequestMethod.POST})\n\tpublic Result<SysUser> edit(@RequestBody JSONObject jsonObject) {\n\t\tResult<SysUser> result = new Result<SysUser>();\n\t\ttry {\n\t\t\tSysUser sysUser = sysUserService.getById(jsonObject.getString(\"id\"));\n\t\t\tbaseCommonService.addLog(\"编辑用户，username： \" +sysUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n\t\t\tif(sysUser==null) {\n\t\t\t\tresult.error500(\"未找到对应实体\");\n\t\t\t}else {\n\t\t\t\tSysUser user = JSON.parseObject(jsonObject.toJSONString(), SysUser.class);\n\t\t\t\tuser.setUpdateTime(new Date());\n\t\t\t\t//String passwordEncode = PasswordUtil.encrypt(user.getUsername(), user.getPassword(), sysUser.getSalt());\n\t\t\t\tuser.setPassword(sysUser.getPassword());\n\t\t\t\tString roles = jsonObject.getString(\"selectedroles\");\n                String departs = jsonObject.getString(\"selecteddeparts\");\n                if(oConvertUtils.isEmpty(departs)){\n                    //vue3.0前端只传递了departIds\n                    departs=user.getDepartIds();\n                }\n                //用户表字段org_code不能在这里设置他的值\n                user.setOrgCode(null);\n                // 修改用户走一个service 保证事务\n                //获取租户ids\n                String relTenantIds = jsonObject.getString(\"relTenantIds\");\n\t\t\t\tsysUserService.editUser(user, roles, departs, relTenantIds);\n\t\t\t\tresult.success(\"修改成功!\");\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<?> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tbaseCommonService.addLog(\"删除用户，id： \" +id ,CommonConstant.LOG_TYPE_2, 3);\n\t\tthis.sysUserService.deleteUser(id);\n\t\treturn Result.ok(\"删除用户成功\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:user:delete\")\n\t@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<?> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tbaseCommonService.addLog(\"删除用户，id： \" +id ,CommonConstant.LOG_TYPE_2, 3);\n\t\tthis.sysUserService.deleteUser(id);\n\t\treturn Result.ok(\"删除用户成功\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<?> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tbaseCommonService.addLog(\"批量删除用户， ids： \" +ids ,CommonConstant.LOG_TYPE_2, 3);\n\t\tthis.sysUserService.deleteBatchUsers(ids);\n\t\treturn Result.ok(\"批量删除用户成功\");\n\t}",
        "new_function": "@RequiresPermissions(\"system:user:deleteBatch\")\n\t@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<?> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tbaseCommonService.addLog(\"批量删除用户， ids： \" +ids ,CommonConstant.LOG_TYPE_2, 3);\n\t\tthis.sysUserService.deleteBatchUsers(ids);\n\t\treturn Result.ok(\"批量删除用户成功\");\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "frozenBatch",
        "old_function": "@RequestMapping(value = \"/frozenBatch\", method = RequestMethod.PUT)\n\tpublic Result<SysUser> frozenBatch(@RequestBody JSONObject jsonObject) {\n\t\tResult<SysUser> result = new Result<SysUser>();\n\t\ttry {\n\t\t\tString ids = jsonObject.getString(\"ids\");\n\t\t\tString status = jsonObject.getString(\"status\");\n\t\t\tString[] arr = ids.split(\",\");\n\t\t\tfor (String id : arr) {\n\t\t\t\tif(oConvertUtils.isNotEmpty(id)) {\n\t\t\t\t\tthis.sysUserService.update(new SysUser().setStatus(Integer.parseInt(status)),\n\t\t\t\t\t\t\tnew UpdateWrapper<SysUser>().lambda().eq(SysUser::getId,id));\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\"+e.getMessage());\n\t\t}\n\t\tresult.success(\"操作成功!\");\n\t\treturn result;\n\n    }",
        "new_function": "@RequiresPermissions(\"system:user:frozenBatch\")\n\t@RequestMapping(value = \"/frozenBatch\", method = RequestMethod.PUT)\n\tpublic Result<SysUser> frozenBatch(@RequestBody JSONObject jsonObject) {\n\t\tResult<SysUser> result = new Result<SysUser>();\n\t\ttry {\n\t\t\tString ids = jsonObject.getString(\"ids\");\n\t\t\tString status = jsonObject.getString(\"status\");\n\t\t\tString[] arr = ids.split(\",\");\n\t\t\tfor (String id : arr) {\n\t\t\t\tif(oConvertUtils.isNotEmpty(id)) {\n\t\t\t\t\tthis.sysUserService.update(new SysUser().setStatus(Integer.parseInt(status)),\n\t\t\t\t\t\t\tnew UpdateWrapper<SysUser>().lambda().eq(SysUser::getId,id));\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tlog.error(e.getMessage(), e);\n\t\t\tresult.error500(\"操作失败\"+e.getMessage());\n\t\t}\n\t\tresult.success(\"操作成功!\");\n\t\treturn result;\n\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "queryById",
        "old_function": "@RequestMapping(value = \"/queryById\", method = RequestMethod.GET)\n    public Result<SysUser> queryById(@RequestParam(name = \"id\", required = true) String id) {\n        Result<SysUser> result = new Result<SysUser>();\n        SysUser sysUser = sysUserService.getById(id);\n        if (sysUser == null) {\n            result.error500(\"未找到对应实体\");\n        } else {\n            result.setResult(sysUser);\n            result.setSuccess(true);\n        }\n        return result;\n    }",
        "new_function": "@RequiresPermissions(\"system:user:queryById\")\n    @RequestMapping(value = \"/queryById\", method = RequestMethod.GET)\n    public Result<SysUser> queryById(@RequestParam(name = \"id\", required = true) String id) {\n        Result<SysUser> result = new Result<SysUser>();\n        SysUser sysUser = sysUserService.getById(id);\n        if (sysUser == null) {\n            result.error500(\"未找到对应实体\");\n        } else {\n            result.setResult(sysUser);\n            result.setSuccess(true);\n        }\n        return result;\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "queryUserRole",
        "old_function": "@RequestMapping(value = \"/queryUserRole\", method = RequestMethod.GET)\n    public Result<List<String>> queryUserRole(@RequestParam(name = \"userid\", required = true) String userid) {\n        Result<List<String>> result = new Result<>();\n        List<String> list = new ArrayList<String>();\n        List<SysUserRole> userRole = sysUserRoleService.list(new QueryWrapper<SysUserRole>().lambda().eq(SysUserRole::getUserId, userid));\n        if (userRole == null || userRole.size() <= 0) {\n            result.error500(\"未找到用户相关角色信息\");\n        } else {\n            for (SysUserRole sysUserRole : userRole) {\n                list.add(sysUserRole.getRoleId());\n            }\n            result.setSuccess(true);\n            result.setResult(list);\n        }\n        return result;\n    }",
        "new_function": "@RequiresPermissions(\"system:user:queryUserRole\")\n    @RequestMapping(value = \"/queryUserRole\", method = RequestMethod.GET)\n    public Result<List<String>> queryUserRole(@RequestParam(name = \"userid\", required = true) String userid) {\n        Result<List<String>> result = new Result<>();\n        List<String> list = new ArrayList<String>();\n        List<SysUserRole> userRole = sysUserRoleService.list(new QueryWrapper<SysUserRole>().lambda().eq(SysUserRole::getUserId, userid));\n        if (userRole == null || userRole.size() <= 0) {\n            result.error500(\"未找到用户相关角色信息\");\n        } else {\n            for (SysUserRole sysUserRole : userRole) {\n                list.add(sysUserRole.getRoleId());\n            }\n            result.setSuccess(true);\n            result.setResult(list);\n        }\n        return result;\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "changePassword",
        "old_function": "@RequestMapping(value = \"/changePassword\", method = RequestMethod.PUT)\n    public Result<?> changePassword(@RequestBody SysUser sysUser) {\n        SysUser u = this.sysUserService.getOne(new LambdaQueryWrapper<SysUser>().eq(SysUser::getUsername, sysUser.getUsername()));\n        if (u == null) {\n            return Result.error(\"用户不存在！\");\n        }\n        sysUser.setId(u.getId());\n        //update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n        LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n        baseCommonService.addLog(\"修改用户 \"+sysUser.getUsername()+\" 的密码，操作人： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n        //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n        return sysUserService.changePassword(sysUser);\n    }",
        "new_function": "@RequiresPermissions(\"system:user:changepwd\")\n    @RequestMapping(value = \"/changePassword\", method = RequestMethod.PUT)\n    public Result<?> changePassword(@RequestBody SysUser sysUser) {\n        SysUser u = this.sysUserService.getOne(new LambdaQueryWrapper<SysUser>().eq(SysUser::getUsername, sysUser.getUsername()));\n        if (u == null) {\n            return Result.error(\"用户不存在！\");\n        }\n        sysUser.setId(u.getId());\n        //update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n        LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n        baseCommonService.addLog(\"修改用户 \"+sysUser.getUsername()+\" 的密码，操作人： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n        //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n        return sysUserService.changePassword(sysUser);\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "exportXls",
        "old_function": "@RequestMapping(value = \"/exportXls\")\n    public ModelAndView exportXls(SysUser sysUser,HttpServletRequest request) {\n        // Step.1 组装查询条件\n        QueryWrapper<SysUser> queryWrapper = QueryGenerator.initQueryWrapper(sysUser, request.getParameterMap());\n        //Step.2 AutoPoi 导出Excel\n        ModelAndView mv = new ModelAndView(new JeecgEntityExcelView());\n        //update-begin--Author:kangxiaolin  Date:20180825 for：[03]用户导出，如果选择数据则只导出相关数据--------------------\n        String selections = request.getParameter(\"selections\");\n       if(!oConvertUtils.isEmpty(selections)){\n           queryWrapper.in(\"id\",selections.split(\",\"));\n       }\n        //update-end--Author:kangxiaolin  Date:20180825 for：[03]用户导出，如果选择数据则只导出相关数据----------------------\n        List<SysUser> pageList = sysUserService.list(queryWrapper);\n\n        //导出文件名称\n        mv.addObject(NormalExcelConstants.FILE_NAME, \"用户列表\");\n        mv.addObject(NormalExcelConstants.CLASS, SysUser.class);\n\t\tLoginUser user = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n        ExportParams exportParams = new ExportParams(\"用户列表数据\", \"导出人:\"+user.getRealname(), \"导出信息\");\n        exportParams.setImageBasePath(upLoadPath);\n        mv.addObject(NormalExcelConstants.PARAMS, exportParams);\n        mv.addObject(NormalExcelConstants.DATA_LIST, pageList);\n        return mv;\n    }",
        "new_function": "@RequiresPermissions(\"system:user:export\")\n    @RequestMapping(value = \"/exportXls\")\n    public ModelAndView exportXls(SysUser sysUser,HttpServletRequest request) {\n        // Step.1 组装查询条件\n        QueryWrapper<SysUser> queryWrapper = QueryGenerator.initQueryWrapper(sysUser, request.getParameterMap());\n        //Step.2 AutoPoi 导出Excel\n        ModelAndView mv = new ModelAndView(new JeecgEntityExcelView());\n        //update-begin--Author:kangxiaolin  Date:20180825 for：[03]用户导出，如果选择数据则只导出相关数据--------------------\n        String selections = request.getParameter(\"selections\");\n       if(!oConvertUtils.isEmpty(selections)){\n           queryWrapper.in(\"id\",selections.split(\",\"));\n       }\n        //update-end--Author:kangxiaolin  Date:20180825 for：[03]用户导出，如果选择数据则只导出相关数据----------------------\n        List<SysUser> pageList = sysUserService.list(queryWrapper);\n\n        //导出文件名称\n        mv.addObject(NormalExcelConstants.FILE_NAME, \"用户列表\");\n        mv.addObject(NormalExcelConstants.CLASS, SysUser.class);\n\t\tLoginUser user = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n        ExportParams exportParams = new ExportParams(\"用户列表数据\", \"导出人:\"+user.getRealname(), \"导出信息\");\n        exportParams.setImageBasePath(upLoadPath);\n        mv.addObject(NormalExcelConstants.PARAMS, exportParams);\n        mv.addObject(NormalExcelConstants.DATA_LIST, pageList);\n        return mv;\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "importExcel",
        "old_function": "@RequestMapping(value = \"/importExcel\", method = RequestMethod.POST)\n    public Result<?> importExcel(HttpServletRequest request, HttpServletResponse response)throws IOException {\n        MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;\n        Map<String, MultipartFile> fileMap = multipartRequest.getFileMap();\n        // 错误信息\n        List<String> errorMessage = new ArrayList<>();\n        int successLines = 0, errorLines = 0;\n        for (Map.Entry<String, MultipartFile> entity : fileMap.entrySet()) {\n            MultipartFile file = entity.getValue();// 获取上传文件对象\n            ImportParams params = new ImportParams();\n            params.setTitleRows(2);\n            params.setHeadRows(1);\n            params.setNeedSave(true);\n            try {\n                List<SysUser> listSysUsers = ExcelImportUtil.importExcel(file.getInputStream(), SysUser.class, params);\n                for (int i = 0; i < listSysUsers.size(); i++) {\n                    SysUser sysUserExcel = listSysUsers.get(i);\n                    if (StringUtils.isBlank(sysUserExcel.getPassword())) {\n                        // 密码默认为 “123456”\n                        sysUserExcel.setPassword(\"123456\");\n                    }\n                    // 密码加密加盐\n                    String salt = oConvertUtils.randomGen(8);\n                    sysUserExcel.setSalt(salt);\n                    String passwordEncode = PasswordUtil.encrypt(sysUserExcel.getUsername(), sysUserExcel.getPassword(), salt);\n                    sysUserExcel.setPassword(passwordEncode);\n                    try {\n                        sysUserService.save(sysUserExcel);\n                        successLines++;\n                    } catch (Exception e) {\n                        errorLines++;\n                        String message = e.getMessage().toLowerCase();\n                        int lineNumber = i + 1;\n                        // 通过索引名判断出错信息\n                        if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_USERNAME)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：用户名已经存在，忽略导入。\");\n                        } else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_WORK_NO)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：工号已经存在，忽略导入。\");\n                        } else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_PHONE)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：手机号已经存在，忽略导入。\");\n                        } else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_EMAIL)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：电子邮件已经存在，忽略导入。\");\n                        }  else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：违反表唯一性约束。\");\n                        } else {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：未知错误，忽略导入\");\n                            log.error(e.getMessage(), e);\n                        }\n                    }\n                    // 批量将部门和用户信息建立关联关系\n                    String departIds = sysUserExcel.getDepartIds();\n                    if (StringUtils.isNotBlank(departIds)) {\n                        String userId = sysUserExcel.getId();\n                        String[] departIdArray = departIds.split(\",\");\n                        List<SysUserDepart> userDepartList = new ArrayList<>(departIdArray.length);\n                        for (String departId : departIdArray) {\n                            userDepartList.add(new SysUserDepart(userId, departId));\n                        }\n                        sysUserDepartService.saveBatch(userDepartList);\n                    }\n\n                }\n            } catch (Exception e) {\n                errorMessage.add(\"发生异常：\" + e.getMessage());\n                log.error(e.getMessage(), e);\n            } finally {\n                try {\n                    file.getInputStream().close();\n                } catch (IOException e) {\n                \tlog.error(e.getMessage(), e);\n                }\n            }\n        }\n        return ImportExcelUtil.imporReturnRes(errorLines,successLines,errorMessage);\n    }",
        "new_function": "@RequiresPermissions(\"system:user:import\")\n    @RequestMapping(value = \"/importExcel\", method = RequestMethod.POST)\n    public Result<?> importExcel(HttpServletRequest request, HttpServletResponse response)throws IOException {\n        MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;\n        Map<String, MultipartFile> fileMap = multipartRequest.getFileMap();\n        // 错误信息\n        List<String> errorMessage = new ArrayList<>();\n        int successLines = 0, errorLines = 0;\n        for (Map.Entry<String, MultipartFile> entity : fileMap.entrySet()) {\n            MultipartFile file = entity.getValue();// 获取上传文件对象\n            ImportParams params = new ImportParams();\n            params.setTitleRows(2);\n            params.setHeadRows(1);\n            params.setNeedSave(true);\n            try {\n                List<SysUser> listSysUsers = ExcelImportUtil.importExcel(file.getInputStream(), SysUser.class, params);\n                for (int i = 0; i < listSysUsers.size(); i++) {\n                    SysUser sysUserExcel = listSysUsers.get(i);\n                    if (StringUtils.isBlank(sysUserExcel.getPassword())) {\n                        // 密码默认为 “123456”\n                        sysUserExcel.setPassword(\"123456\");\n                    }\n                    // 密码加密加盐\n                    String salt = oConvertUtils.randomGen(8);\n                    sysUserExcel.setSalt(salt);\n                    String passwordEncode = PasswordUtil.encrypt(sysUserExcel.getUsername(), sysUserExcel.getPassword(), salt);\n                    sysUserExcel.setPassword(passwordEncode);\n                    try {\n                        sysUserService.save(sysUserExcel);\n                        successLines++;\n                    } catch (Exception e) {\n                        errorLines++;\n                        String message = e.getMessage().toLowerCase();\n                        int lineNumber = i + 1;\n                        // 通过索引名判断出错信息\n                        if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_USERNAME)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：用户名已经存在，忽略导入。\");\n                        } else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_WORK_NO)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：工号已经存在，忽略导入。\");\n                        } else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_PHONE)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：手机号已经存在，忽略导入。\");\n                        } else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER_EMAIL)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：电子邮件已经存在，忽略导入。\");\n                        }  else if (message.contains(CommonConstant.SQL_INDEX_UNIQ_SYS_USER)) {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：违反表唯一性约束。\");\n                        } else {\n                            errorMessage.add(\"第 \" + lineNumber + \" 行：未知错误，忽略导入\");\n                            log.error(e.getMessage(), e);\n                        }\n                    }\n                    // 批量将部门和用户信息建立关联关系\n                    String departIds = sysUserExcel.getDepartIds();\n                    if (StringUtils.isNotBlank(departIds)) {\n                        String userId = sysUserExcel.getId();\n                        String[] departIdArray = departIds.split(\",\");\n                        List<SysUserDepart> userDepartList = new ArrayList<>(departIdArray.length);\n                        for (String departId : departIdArray) {\n                            userDepartList.add(new SysUserDepart(userId, departId));\n                        }\n                        sysUserDepartService.saveBatch(userDepartList);\n                    }\n\n                }\n            } catch (Exception e) {\n                errorMessage.add(\"发生异常：\" + e.getMessage());\n                log.error(e.getMessage(), e);\n            } finally {\n                try {\n                    file.getInputStream().close();\n                } catch (IOException e) {\n                \tlog.error(e.getMessage(), e);\n                }\n            }\n        }\n        return ImportExcelUtil.imporReturnRes(errorLines,successLines,errorMessage);\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "updatePassword",
        "old_function": "@RequestMapping(value = \"/updatePassword\", method = RequestMethod.PUT)\n\tpublic Result<?> updatePassword(@RequestBody JSONObject json) {\n\t\tString username = json.getString(\"username\");\n\t\tString oldpassword = json.getString(\"oldpassword\");\n\t\tString password = json.getString(\"password\");\n\t\tString confirmpassword = json.getString(\"confirmpassword\");\n        LoginUser sysUser = (LoginUser)SecurityUtils.getSubject().getPrincipal();\n        if(!sysUser.getUsername().equals(username)){\n            return Result.error(\"只允许修改自己的密码！\");\n        }\n\t\tSysUser user = this.sysUserService.getOne(new LambdaQueryWrapper<SysUser>().eq(SysUser::getUsername, username));\n\t\tif(user==null) {\n\t\t\treturn Result.error(\"用户不存在！\");\n\t\t}\n        //update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n        LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n        baseCommonService.addLog(\"修改密码，username： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n        //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n\t\treturn sysUserService.resetPassword(username,oldpassword,password,confirmpassword);\n\t}",
        "new_function": "@RequiresPermissions(\"system:user:updatepwd\")\n    @RequestMapping(value = \"/updatePassword\", method = RequestMethod.PUT)\n\tpublic Result<?> updatePassword(@RequestBody JSONObject json) {\n\t\tString username = json.getString(\"username\");\n\t\tString oldpassword = json.getString(\"oldpassword\");\n\t\tString password = json.getString(\"password\");\n\t\tString confirmpassword = json.getString(\"confirmpassword\");\n        LoginUser sysUser = (LoginUser)SecurityUtils.getSubject().getPrincipal();\n        if(!sysUser.getUsername().equals(username)){\n            return Result.error(\"只允许修改自己的密码！\");\n        }\n\t\tSysUser user = this.sysUserService.getOne(new LambdaQueryWrapper<SysUser>().eq(SysUser::getUsername, username));\n\t\tif(user==null) {\n\t\t\treturn Result.error(\"用户不存在！\");\n\t\t}\n        //update-begin---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n        LoginUser loginUser = (LoginUser) SecurityUtils.getSubject().getPrincipal();\n        baseCommonService.addLog(\"修改密码，username： \" +loginUser.getUsername() ,CommonConstant.LOG_TYPE_2, 2);\n        //update-end---author:wangshuai ---date:20220316  for：[VUEN-234]修改密码添加敏感日志------------\n\t\treturn sysUserService.resetPassword(username,oldpassword,password,confirmpassword);\n\t}",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "addSysUserRole",
        "old_function": "@RequestMapping(value = \"/addSysUserRole\", method = RequestMethod.POST)\n    public Result<String> addSysUserRole(@RequestBody SysUserRoleVO sysUserRoleVO) {\n        Result<String> result = new Result<String>();\n        try {\n            String sysRoleId = sysUserRoleVO.getRoleId();\n            for(String sysUserId:sysUserRoleVO.getUserIdList()) {\n                SysUserRole sysUserRole = new SysUserRole(sysUserId,sysRoleId);\n                QueryWrapper<SysUserRole> queryWrapper = new QueryWrapper<SysUserRole>();\n                queryWrapper.eq(\"role_id\", sysRoleId).eq(\"user_id\",sysUserId);\n                SysUserRole one = sysUserRoleService.getOne(queryWrapper);\n                if(one==null){\n                    sysUserRoleService.save(sysUserRole);\n                }\n\n            }\n            result.setMessage(\"添加成功!\");\n            result.setSuccess(true);\n            return result;\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.setSuccess(false);\n            result.setMessage(\"出错了: \" + e.getMessage());\n            return result;\n        }\n    }",
        "new_function": "@RequiresPermissions(\"system:user:addUserRole\")\n    @RequestMapping(value = \"/addSysUserRole\", method = RequestMethod.POST)\n    public Result<String> addSysUserRole(@RequestBody SysUserRoleVO sysUserRoleVO) {\n        Result<String> result = new Result<String>();\n        try {\n            String sysRoleId = sysUserRoleVO.getRoleId();\n            for(String sysUserId:sysUserRoleVO.getUserIdList()) {\n                SysUserRole sysUserRole = new SysUserRole(sysUserId,sysRoleId);\n                QueryWrapper<SysUserRole> queryWrapper = new QueryWrapper<SysUserRole>();\n                queryWrapper.eq(\"role_id\", sysRoleId).eq(\"user_id\",sysUserId);\n                SysUserRole one = sysUserRoleService.getOne(queryWrapper);\n                if(one==null){\n                    sysUserRoleService.save(sysUserRole);\n                }\n\n            }\n            result.setMessage(\"添加成功!\");\n            result.setSuccess(true);\n            return result;\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.setSuccess(false);\n            result.setMessage(\"出错了: \" + e.getMessage());\n            return result;\n        }\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "deleteUserRole",
        "old_function": "@RequestMapping(value = \"/deleteUserRole\", method = RequestMethod.DELETE)\n    public Result<SysUserRole> deleteUserRole(@RequestParam(name=\"roleId\") String roleId,\n                                                    @RequestParam(name=\"userId\",required=true) String userId\n    ) {\n        Result<SysUserRole> result = new Result<SysUserRole>();\n        try {\n            QueryWrapper<SysUserRole> queryWrapper = new QueryWrapper<SysUserRole>();\n            queryWrapper.eq(\"role_id\", roleId).eq(\"user_id\",userId);\n            sysUserRoleService.remove(queryWrapper);\n            result.success(\"删除成功!\");\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "new_function": "@RequiresPermissions(\"system:user:deleteRole\")\n    @RequestMapping(value = \"/deleteUserRole\", method = RequestMethod.DELETE)\n    public Result<SysUserRole> deleteUserRole(@RequestParam(name=\"roleId\") String roleId,\n                                                    @RequestParam(name=\"userId\",required=true) String userId\n    ) {\n        Result<SysUserRole> result = new Result<SysUserRole>();\n        try {\n            QueryWrapper<SysUserRole> queryWrapper = new QueryWrapper<SysUserRole>();\n            queryWrapper.eq(\"role_id\", roleId).eq(\"user_id\",userId);\n            sysUserRoleService.remove(queryWrapper);\n            result.success(\"删除成功!\");\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "deleteUserRoleBatch",
        "old_function": "@RequestMapping(value = \"/deleteUserRoleBatch\", method = RequestMethod.DELETE)\n    public Result<SysUserRole> deleteUserRoleBatch(\n            @RequestParam(name=\"roleId\") String roleId,\n            @RequestParam(name=\"userIds\",required=true) String userIds) {\n        Result<SysUserRole> result = new Result<SysUserRole>();\n        try {\n            QueryWrapper<SysUserRole> queryWrapper = new QueryWrapper<SysUserRole>();\n            queryWrapper.eq(\"role_id\", roleId).in(\"user_id\",Arrays.asList(userIds.split(\",\")));\n            sysUserRoleService.remove(queryWrapper);\n            result.success(\"删除成功!\");\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "new_function": "@RequiresPermissions(\"system:user:deleteRoleBatch\")\n    @RequestMapping(value = \"/deleteUserRoleBatch\", method = RequestMethod.DELETE)\n    public Result<SysUserRole> deleteUserRoleBatch(\n            @RequestParam(name=\"roleId\") String roleId,\n            @RequestParam(name=\"userIds\",required=true) String userIds) {\n        Result<SysUserRole> result = new Result<SysUserRole>();\n        try {\n            QueryWrapper<SysUserRole> queryWrapper = new QueryWrapper<SysUserRole>();\n            queryWrapper.eq(\"role_id\", roleId).in(\"user_id\",Arrays.asList(userIds.split(\",\")));\n            sysUserRoleService.remove(queryWrapper);\n            result.success(\"删除成功!\");\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "editSysDepartWithUser",
        "old_function": "@RequestMapping(value = \"/editSysDepartWithUser\", method = RequestMethod.POST)\n    public Result<String> editSysDepartWithUser(@RequestBody SysDepartUsersVO sysDepartUsersVO) {\n        Result<String> result = new Result<String>();\n        try {\n            String sysDepId = sysDepartUsersVO.getDepId();\n            for(String sysUserId:sysDepartUsersVO.getUserIdList()) {\n                SysUserDepart sysUserDepart = new SysUserDepart(null,sysUserId,sysDepId);\n                QueryWrapper<SysUserDepart> queryWrapper = new QueryWrapper<SysUserDepart>();\n                queryWrapper.eq(\"dep_id\", sysDepId).eq(\"user_id\",sysUserId);\n                SysUserDepart one = sysUserDepartService.getOne(queryWrapper);\n                if(one==null){\n                    sysUserDepartService.save(sysUserDepart);\n                }\n            }\n            result.setMessage(\"添加成功!\");\n            result.setSuccess(true);\n            return result;\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.setSuccess(false);\n            result.setMessage(\"出错了: \" + e.getMessage());\n            return result;\n        }\n    }",
        "new_function": "@RequiresPermissions(\"system:user:editDepartWithUser\")\n    @RequestMapping(value = \"/editSysDepartWithUser\", method = RequestMethod.POST)\n    public Result<String> editSysDepartWithUser(@RequestBody SysDepartUsersVO sysDepartUsersVO) {\n        Result<String> result = new Result<String>();\n        try {\n            String sysDepId = sysDepartUsersVO.getDepId();\n            for(String sysUserId:sysDepartUsersVO.getUserIdList()) {\n                SysUserDepart sysUserDepart = new SysUserDepart(null,sysUserId,sysDepId);\n                QueryWrapper<SysUserDepart> queryWrapper = new QueryWrapper<SysUserDepart>();\n                queryWrapper.eq(\"dep_id\", sysDepId).eq(\"user_id\",sysUserId);\n                SysUserDepart one = sysUserDepartService.getOne(queryWrapper);\n                if(one==null){\n                    sysUserDepartService.save(sysUserDepart);\n                }\n            }\n            result.setMessage(\"添加成功!\");\n            result.setSuccess(true);\n            return result;\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.setSuccess(false);\n            result.setMessage(\"出错了: \" + e.getMessage());\n            return result;\n        }\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "deleteUserInDepart",
        "old_function": "@RequestMapping(value = \"/deleteUserInDepart\", method = RequestMethod.DELETE)\n    public Result<SysUserDepart> deleteUserInDepart(@RequestParam(name=\"depId\") String depId,\n                                                    @RequestParam(name=\"userId\",required=true) String userId\n    ) {\n        Result<SysUserDepart> result = new Result<SysUserDepart>();\n        try {\n            QueryWrapper<SysUserDepart> queryWrapper = new QueryWrapper<SysUserDepart>();\n            queryWrapper.eq(\"dep_id\", depId).eq(\"user_id\",userId);\n            boolean b = sysUserDepartService.remove(queryWrapper);\n            if(b){\n                List<SysDepartRole> sysDepartRoleList = departRoleService.list(new QueryWrapper<SysDepartRole>().eq(\"depart_id\",depId));\n                List<String> roleIds = sysDepartRoleList.stream().map(SysDepartRole::getId).collect(Collectors.toList());\n                if(roleIds != null && roleIds.size()>0){\n                    QueryWrapper<SysDepartRoleUser> query = new QueryWrapper<>();\n                    query.eq(\"user_id\",userId).in(\"drole_id\",roleIds);\n                    departRoleUserService.remove(query);\n                }\n                result.success(\"删除成功!\");\n            }else{\n                result.error500(\"当前选中部门与用户无关联关系!\");\n            }\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "new_function": "@RequiresPermissions(\"system:user:deleteUserInDepart\")\n    @RequestMapping(value = \"/deleteUserInDepart\", method = RequestMethod.DELETE)\n    public Result<SysUserDepart> deleteUserInDepart(@RequestParam(name=\"depId\") String depId,\n                                                    @RequestParam(name=\"userId\",required=true) String userId\n    ) {\n        Result<SysUserDepart> result = new Result<SysUserDepart>();\n        try {\n            QueryWrapper<SysUserDepart> queryWrapper = new QueryWrapper<SysUserDepart>();\n            queryWrapper.eq(\"dep_id\", depId).eq(\"user_id\",userId);\n            boolean b = sysUserDepartService.remove(queryWrapper);\n            if(b){\n                List<SysDepartRole> sysDepartRoleList = departRoleService.list(new QueryWrapper<SysDepartRole>().eq(\"depart_id\",depId));\n                List<String> roleIds = sysDepartRoleList.stream().map(SysDepartRole::getId).collect(Collectors.toList());\n                if(roleIds != null && roleIds.size()>0){\n                    QueryWrapper<SysDepartRoleUser> query = new QueryWrapper<>();\n                    query.eq(\"user_id\",userId).in(\"drole_id\",roleIds);\n                    departRoleUserService.remove(query);\n                }\n                result.success(\"删除成功!\");\n            }else{\n                result.error500(\"当前选中部门与用户无关联关系!\");\n            }\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "deleteUserInDepartBatch",
        "old_function": "@RequestMapping(value = \"/deleteUserInDepartBatch\", method = RequestMethod.DELETE)\n    public Result<SysUserDepart> deleteUserInDepartBatch(\n            @RequestParam(name=\"depId\") String depId,\n            @RequestParam(name=\"userIds\",required=true) String userIds) {\n        Result<SysUserDepart> result = new Result<SysUserDepart>();\n        try {\n            QueryWrapper<SysUserDepart> queryWrapper = new QueryWrapper<SysUserDepart>();\n            queryWrapper.eq(\"dep_id\", depId).in(\"user_id\",Arrays.asList(userIds.split(\",\")));\n            boolean b = sysUserDepartService.remove(queryWrapper);\n            if(b){\n                departRoleUserService.removeDeptRoleUser(Arrays.asList(userIds.split(\",\")),depId);\n            }\n            result.success(\"删除成功!\");\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "new_function": "@RequiresPermissions(\"system:user:deleteUserInDepartBatch\")\n    @RequestMapping(value = \"/deleteUserInDepartBatch\", method = RequestMethod.DELETE)\n    public Result<SysUserDepart> deleteUserInDepartBatch(\n            @RequestParam(name=\"depId\") String depId,\n            @RequestParam(name=\"userIds\",required=true) String userIds) {\n        Result<SysUserDepart> result = new Result<SysUserDepart>();\n        try {\n            QueryWrapper<SysUserDepart> queryWrapper = new QueryWrapper<SysUserDepart>();\n            queryWrapper.eq(\"dep_id\", depId).in(\"user_id\",Arrays.asList(userIds.split(\",\")));\n            boolean b = sysUserDepartService.remove(queryWrapper);\n            if(b){\n                departRoleUserService.removeDeptRoleUser(Arrays.asList(userIds.split(\",\")),depId);\n            }\n            result.success(\"删除成功!\");\n        }catch(Exception e) {\n            log.error(e.getMessage(), e);\n            result.error500(\"删除失败！\");\n        }\n        return result;\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "deleteRecycleBin",
        "old_function": "@RequestMapping(value = \"/deleteRecycleBin\", method = RequestMethod.DELETE)\n    public Result deleteRecycleBin(@RequestParam(\"userIds\") String userIds) {\n        if (StringUtils.isNotBlank(userIds)) {\n            sysUserService.removeLogicDeleted(Arrays.asList(userIds.split(\",\")));\n        }\n        return Result.ok(\"删除成功\");\n    }",
        "new_function": "@RequiresPermissions(\"system:user:deleteRecycleBin\")\n    @RequestMapping(value = \"/deleteRecycleBin\", method = RequestMethod.DELETE)\n    public Result deleteRecycleBin(@RequestParam(\"userIds\") String userIds) {\n        if (StringUtils.isNotBlank(userIds)) {\n            sysUserService.removeLogicDeleted(Arrays.asList(userIds.split(\",\")));\n        }\n        return Result.ok(\"删除成功\");\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysUserController.java",
        "method_name": "userEdit",
        "old_function": "@PostMapping(\"/login/setting/userEdit\")\n    //@RequiresPermissions(\"system:user:setting:edit\")\n    public Result<String> userEdit(@RequestBody SysUser sysUser, HttpServletRequest request) {\n        String username = JwtUtil.getUserNameByToken(request);\n        SysUser user = sysUserService.getById(sysUser.getId());\n        if(user==null) {\n           return Result.error(\"未找到该用户数据\");\n        }\n        if(!username.equals(user.getUsername())){\n            return Result.error(\"只能修改自己的数据\");\n        }\n        sysUserService.updateById(sysUser);\n        return Result.ok(\"更新个人信息成功\");\n    }",
        "new_function": "@PostMapping(\"/login/setting/userEdit\")\n    @RequiresPermissions(\"system:user:setting:edit\")\n    public Result<String> userEdit(@RequestBody SysUser sysUser, HttpServletRequest request) {\n        String username = JwtUtil.getUserNameByToken(request);\n        SysUser user = sysUserService.getById(sysUser.getId());\n        if(user==null) {\n           return Result.error(\"未找到该用户数据\");\n        }\n        if(!username.equals(user.getUsername())){\n            return Result.error(\"只能修改自己的数据\");\n        }\n        sysUserService.updateById(sysUser);\n        return Result.ok(\"更新个人信息成功\");\n    }",
        "commit": "ff083361d48761e8759d3a8ec7e93332c8ddb1c1",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysLogController.java",
        "method_name": "queryPageList",
        "old_function": "@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\tpublic Result<IPage<SysLog>> queryPageList(SysLog syslog,@RequestParam(name=\"pageNo\", defaultValue=\"1\") Integer pageNo,\n\t\t\t\t\t\t\t\t\t  @RequestParam(name=\"pageSize\", defaultValue=\"10\") Integer pageSize,HttpServletRequest req) {\n\t\tResult<IPage<SysLog>> result = new Result<IPage<SysLog>>();\n\t\tQueryWrapper<SysLog> queryWrapper = QueryGenerator.initQueryWrapper(syslog, req.getParameterMap());\n\t\tPage<SysLog> page = new Page<SysLog>(pageNo, pageSize);\n\t\t//日志关键词\n\t\tString keyWord = req.getParameter(\"keyWord\");\n\t\tif(oConvertUtils.isNotEmpty(keyWord)) {\n\t\t\tqueryWrapper.like(\"log_content\",keyWord);\n\t\t}\n\t\t//TODO 过滤逻辑处理\n\t\t//TODO begin、end逻辑处理\n\t\t//TODO 一个强大的功能，前端传一个字段字符串，后台只返回这些字符串对应的字段\n\t\t//创建时间/创建人的赋值\n\t\tIPage<SysLog> pageList = sysLogService.page(page, queryWrapper);\n\t\tlog.info(\"查询当前页：\"+pageList.getCurrent());\n\t\tlog.info(\"查询当前页数量：\"+pageList.getSize());\n\t\tlog.info(\"查询结果数量：\"+pageList.getRecords().size());\n\t\tlog.info(\"数据总数：\"+pageList.getTotal());\n\t\tresult.setSuccess(true);\n\t\tresult.setResult(pageList);\n\t\treturn result;\n\t}",
        "new_function": "@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\t@RequiresPermissions(\"system:log:list\")\n\tpublic Result<IPage<SysLog>> queryPageList(SysLog syslog,@RequestParam(name=\"pageNo\", defaultValue=\"1\") Integer pageNo,\n\t\t\t\t\t\t\t\t\t  @RequestParam(name=\"pageSize\", defaultValue=\"10\") Integer pageSize,HttpServletRequest req) {\n\t\tResult<IPage<SysLog>> result = new Result<IPage<SysLog>>();\n\t\tQueryWrapper<SysLog> queryWrapper = QueryGenerator.initQueryWrapper(syslog, req.getParameterMap());\n\t\tPage<SysLog> page = new Page<SysLog>(pageNo, pageSize);\n\t\t//日志关键词\n\t\tString keyWord = req.getParameter(\"keyWord\");\n\t\tif(oConvertUtils.isNotEmpty(keyWord)) {\n\t\t\tqueryWrapper.like(\"log_content\",keyWord);\n\t\t}\n\t\t//TODO 过滤逻辑处理\n\t\t//TODO begin、end逻辑处理\n\t\t//TODO 一个强大的功能，前端传一个字段字符串，后台只返回这些字符串对应的字段\n\t\t//创建时间/创建人的赋值\n\t\tIPage<SysLog> pageList = sysLogService.page(page, queryWrapper);\n\t\tlog.info(\"查询当前页：\"+pageList.getCurrent());\n\t\tlog.info(\"查询当前页数量：\"+pageList.getSize());\n\t\tlog.info(\"查询结果数量：\"+pageList.getRecords().size());\n\t\tlog.info(\"数据总数：\"+pageList.getTotal());\n\t\tresult.setSuccess(true);\n\t\tresult.setResult(pageList);\n\t\treturn result;\n\t}",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysLogController.java",
        "method_name": "delete",
        "old_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\tpublic Result<SysLog> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tResult<SysLog> result = new Result<SysLog>();\n\t\tSysLog sysLog = sysLogService.getById(id);\n\t\tif(sysLog==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tboolean ok = sysLogService.removeById(id);\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"删除成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequestMapping(value = \"/delete\", method = RequestMethod.DELETE)\n\t@RequiresPermissions(\"system:log:delete\")\n\tpublic Result<SysLog> delete(@RequestParam(name=\"id\",required=true) String id) {\n\t\tResult<SysLog> result = new Result<SysLog>();\n\t\tSysLog sysLog = sysLogService.getById(id);\n\t\tif(sysLog==null) {\n\t\t\tresult.error500(\"未找到对应实体\");\n\t\t}else {\n\t\t\tboolean ok = sysLogService.removeById(id);\n\t\t\tif(ok) {\n\t\t\t\tresult.success(\"删除成功!\");\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysLogController.java",
        "method_name": "deleteBatch",
        "old_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\tpublic Result<SysRole> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\tif(ids==null || \"\".equals(ids.trim())) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t}else {\n\t\t\tif(ALL_ClEAR.equals(ids)) {\n\t\t\t\tthis.sysLogService.removeAll();\n\t\t\t\tresult.success(\"清除成功!\");\n\t\t\t}\n\t\t\tthis.sysLogService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "new_function": "@RequestMapping(value = \"/deleteBatch\", method = RequestMethod.DELETE)\n\t@RequiresPermissions(\"system:log:deleteBatch\")\n\tpublic Result<SysRole> deleteBatch(@RequestParam(name=\"ids\",required=true) String ids) {\n\t\tResult<SysRole> result = new Result<SysRole>();\n\t\tif(ids==null || \"\".equals(ids.trim())) {\n\t\t\tresult.error500(\"参数不识别！\");\n\t\t}else {\n\t\t\tif(ALL_ClEAR.equals(ids)) {\n\t\t\t\tthis.sysLogService.removeAll();\n\t\t\t\tresult.success(\"清除成功!\");\n\t\t\t}\n\t\t\tthis.sysLogService.removeByIds(Arrays.asList(ids.split(\",\")));\n\t\t\tresult.success(\"删除成功!\");\n\t\t}\n\t\treturn result;\n\t}",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysTableWhiteListController.java",
        "method_name": "queryPageList",
        "old_function": "@GetMapping(value = \"/list\")\n    public Result<?> queryPageList(\n            SysTableWhiteList sysTableWhiteList,\n            @RequestParam(name = \"pageNo\", defaultValue = \"1\") Integer pageNo,\n            @RequestParam(name = \"pageSize\", defaultValue = \"10\") Integer pageSize,\n            HttpServletRequest req\n    ) {\n        QueryWrapper<SysTableWhiteList> queryWrapper = QueryGenerator.initQueryWrapper(sysTableWhiteList, req.getParameterMap());\n        Page<SysTableWhiteList> page = new Page<>(pageNo, pageSize);\n        IPage<SysTableWhiteList> pageList = sysTableWhiteListService.page(page, queryWrapper);\n        return Result.OK(pageList);\n    }",
        "new_function": "@RequiresRoles(\"admin\")\n    @GetMapping(value = \"/list\")\n    public Result<?> queryPageList(\n            SysTableWhiteList sysTableWhiteList,\n            @RequestParam(name = \"pageNo\", defaultValue = \"1\") Integer pageNo,\n            @RequestParam(name = \"pageSize\", defaultValue = \"10\") Integer pageSize,\n            HttpServletRequest req\n    ) {\n        QueryWrapper<SysTableWhiteList> queryWrapper = QueryGenerator.initQueryWrapper(sysTableWhiteList, req.getParameterMap());\n        Page<SysTableWhiteList> page = new Page<>(pageNo, pageSize);\n        IPage<SysTableWhiteList> pageList = sysTableWhiteListService.page(page, queryWrapper);\n        return Result.OK(pageList);\n    }",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysTableWhiteListController.java",
        "method_name": "add",
        "old_function": "@AutoLog(value = \"系统表白名单-添加\")\n    @ApiOperation(value = \"系统表白名单-添加\", notes = \"系统表白名单-添加\")\n    //@RequiresRoles(\"admin\")\n    @PostMapping(value = \"/add\")\n    public Result<?> add(@RequestBody SysTableWhiteList sysTableWhiteList) {\n        if (sysTableWhiteListService.add(sysTableWhiteList)) {\n            return Result.OK(\"添加成功！\");\n        } else {\n            return Result.error(\"添加失败！\");\n        }\n    }",
        "new_function": "@AutoLog(value = \"系统表白名单-添加\")\n    @ApiOperation(value = \"系统表白名单-添加\", notes = \"系统表白名单-添加\")\n    @RequiresRoles(\"admin\")\n    @PostMapping(value = \"/add\")\n    public Result<?> add(@RequestBody SysTableWhiteList sysTableWhiteList) {\n        if (sysTableWhiteListService.add(sysTableWhiteList)) {\n            return Result.OK(\"添加成功！\");\n        } else {\n            return Result.error(\"添加失败！\");\n        }\n    }",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysTableWhiteListController.java",
        "method_name": "edit",
        "old_function": "@AutoLog(value = \"系统表白名单-编辑\")\n    @ApiOperation(value = \"系统表白名单-编辑\", notes = \"系统表白名单-编辑\")\n    //@RequiresRoles(\"admin\")\n    @RequestMapping(value = \"/edit\", method = {RequestMethod.PUT, RequestMethod.POST})\n    public Result<?> edit(@RequestBody SysTableWhiteList sysTableWhiteList) {\n        if (sysTableWhiteListService.edit(sysTableWhiteList)) {\n            return Result.OK(\"编辑成功！\");\n        } else {\n            return Result.error(\"编辑失败！\");\n        }\n    }",
        "new_function": "@AutoLog(value = \"系统表白名单-编辑\")\n    @ApiOperation(value = \"系统表白名单-编辑\", notes = \"系统表白名单-编辑\")\n    @RequiresRoles(\"admin\")\n    @RequestMapping(value = \"/edit\", method = {RequestMethod.PUT, RequestMethod.POST})\n    public Result<?> edit(@RequestBody SysTableWhiteList sysTableWhiteList) {\n        if (sysTableWhiteListService.edit(sysTableWhiteList)) {\n            return Result.OK(\"编辑成功！\");\n        } else {\n            return Result.error(\"编辑失败！\");\n        }\n    }",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysTableWhiteListController.java",
        "method_name": "delete",
        "old_function": "@AutoLog(value = \"系统表白名单-通过id删除\")\n    @ApiOperation(value = \"系统表白名单-通过id删除\", notes = \"系统表白名单-通过id删除\")\n    //@RequiresRoles(\"admin\")\n    @DeleteMapping(value = \"/delete\")\n    public Result<?> delete(@RequestParam(name = \"id\") String id) {\n        if (sysTableWhiteListService.deleteByIds(id)) {\n            return Result.OK(\"删除成功！\");\n        } else {\n            return Result.error(\"删除失败！\");\n        }\n    }",
        "new_function": "@AutoLog(value = \"系统表白名单-通过id删除\")\n    @ApiOperation(value = \"系统表白名单-通过id删除\", notes = \"系统表白名单-通过id删除\")\n    @RequiresRoles(\"admin\")\n    @DeleteMapping(value = \"/delete\")\n    public Result<?> delete(@RequestParam(name = \"id\") String id) {\n        if (sysTableWhiteListService.deleteByIds(id)) {\n            return Result.OK(\"删除成功！\");\n        } else {\n            return Result.error(\"删除失败！\");\n        }\n    }",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysTableWhiteListController.java",
        "method_name": "deleteBatch",
        "old_function": "@AutoLog(value = \"系统表白名单-批量删除\")\n    @ApiOperation(value = \"系统表白名单-批量删除\", notes = \"系统表白名单-批量删除\")\n    //@RequiresRoles(\"admin\")\n    @DeleteMapping(value = \"/deleteBatch\")\n    public Result<?> deleteBatch(@RequestParam(name = \"ids\") String ids) {\n        if (sysTableWhiteListService.deleteByIds(ids)) {\n            return Result.OK(\"批量删除成功！\");\n        } else {\n            return Result.error(\"批量删除失败！\");\n        }\n    }",
        "new_function": "@AutoLog(value = \"系统表白名单-批量删除\")\n    @ApiOperation(value = \"系统表白名单-批量删除\", notes = \"系统表白名单-批量删除\")\n    @RequiresRoles(\"admin\")\n    @DeleteMapping(value = \"/deleteBatch\")\n    public Result<?> deleteBatch(@RequestParam(name = \"ids\") String ids) {\n        if (sysTableWhiteListService.deleteByIds(ids)) {\n            return Result.OK(\"批量删除成功！\");\n        } else {\n            return Result.error(\"批量删除失败！\");\n        }\n    }",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "jeecg-module-system/jeecg-system-biz/src/main/java/org/jeecg/modules/system/controller/SysTableWhiteListController.java",
        "method_name": "queryById",
        "old_function": "@AutoLog(value = \"系统表白名单-通过id查询\")\n    @ApiOperation(value = \"系统表白名单-通过id查询\", notes = \"系统表白名单-通过id查询\")\n    //@RequiresRoles(\"admin\")\n    @GetMapping(value = \"/queryById\")\n    public Result<?> queryById(@RequestParam(name = \"id\", required = true) String id) {\n        SysTableWhiteList sysTableWhiteList = sysTableWhiteListService.getById(id);\n        return Result.OK(sysTableWhiteList);\n    }",
        "new_function": "@AutoLog(value = \"系统表白名单-通过id查询\")\n    @ApiOperation(value = \"系统表白名单-通过id查询\", notes = \"系统表白名单-通过id查询\")\n    @RequiresRoles(\"admin\")\n    @GetMapping(value = \"/queryById\")\n    public Result<?> queryById(@RequestParam(name = \"id\", required = true) String id) {\n        SysTableWhiteList sysTableWhiteList = sysTableWhiteListService.getById(id);\n        return Result.OK(sysTableWhiteList);\n    }",
        "commit": "43593e8def30569b6a6aee1a2c9e3ececb14a0bd",
        "project_name": "JeecgBoot"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestApiController.java",
        "method_name": "upload2Qiniu",
        "old_function": "@PostMapping(\"/upload2Qiniu\")\n    public ResponseVO upload2Qiniu(@RequestParam(\"file\") MultipartFile file) {\n        String filePath = FileUtil.uploadToQiniu(file, QiniuUploadType.SIMPLE, false);\n        return ResultUtil.success(\"图片上传成功\", filePath);\n    }",
        "new_function": "@RequiresPermissions(\"article:publish\")\n    @PostMapping(\"/upload2Qiniu\")\n    public ResponseVO upload2Qiniu(@RequestParam(\"file\") MultipartFile file) {\n        String filePath = FileUtil.uploadToQiniu(file, QiniuUploadType.SIMPLE, false);\n        return ResultUtil.success(\"图片上传成功\", filePath);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestApiController.java",
        "method_name": "material",
        "old_function": "@PostMapping(\"/material\")\n    public ResponseVO material() {\n        return ResultUtil.success(\"\", articleService.listMaterial());\n    }",
        "new_function": "@RequiresPermissions(\"article:publish\")\n    @PostMapping(\"/material\")\n    public ResponseVO material() {\n        return ResultUtil.success(\"\", articleService.listMaterial());\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestArticleController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            articleService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 篇文章\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"article:batchDelete\", \"article:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            articleService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 篇文章\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestArticleController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.articleService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"article:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.articleService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestArticleController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/save\")\n    public ResponseVO edit(Article article, Long[] tags, MultipartFile file) {\n        articleService.publish(article, tags, file);\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(value = {\"article:edit\", \"article:publish\"}, logical = Logical.OR)\n    @PostMapping(\"/save\")\n    public ResponseVO edit(Article article, Long[] tags, MultipartFile file) {\n        articleService.publish(article, tags, file);\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestArticleController.java",
        "method_name": "update",
        "old_function": "@PostMapping(\"/update/{type}\")\n    public ResponseVO update(@PathVariable(\"type\") String type, Long id) {\n        articleService.updateTopOrRecommendedById(type, id);\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(value = {\"article:top\", \"article:recommend\"}, logical = Logical.OR)\n    @PostMapping(\"/update/{type}\")\n    public ResponseVO update(@PathVariable(\"type\") String type, Long id) {\n        articleService.updateTopOrRecommendedById(type, id);\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestArticleController.java",
        "method_name": "pushToBaidu",
        "old_function": "@PostMapping(value = \"/pushToBaidu/{type}\")\n    public ResponseVO pushToBaidu(@PathVariable(\"type\") BaiduPushTypeEnum type, Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        Config config = configService.get();\n        String siteUrl = config.getSiteUrl();\n        StringBuilder params = new StringBuilder();\n        for (Long id : ids) {\n            params.append(siteUrl).append(\"/article/\").append(id).append(\"\\n\");\n        }\n        // urls: 推送, update: 更新, del: 删除\n        String url = UrlBuildUtil.getBaiduPushUrl(type.toString(), config.getSiteUrl(), config.getBaiduPushToken());\n        /**\n         * success\t       \tint\t    成功推送的url条数\n         * remain\t       \tint\t    当天剩余的可推送url条数\n         * not_same_site\tarray\t由于不是本站url而未处理的url列表\n         * not_valid\t   \tarray\t不合法的url列表\n         */\n        // {\"remain\":4999997,\"success\":1,\"not_same_site\":[],\"not_valid\":[]}\n        /**\n         * error\t是\tint\t      错误码，与状态码相同\n         * message\t是\tstring\t  错误描述\n         */\n        //{error\":401,\"message\":\"token is not valid\"}\n        String result = BaiduPushUtil.doPush(url, params.toString());\n        log.info(result);\n        JSONObject resultJson = JSONObject.parseObject(result);\n\n        if (resultJson.containsKey(\"error\")) {\n            return ResultUtil.error(resultJson.getString(\"message\"));\n        }\n        return ResultUtil.success(null, result);\n    }",
        "new_function": "@RequiresPermissions(value = {\"article:batchPush\", \"article:push\"}, logical = Logical.OR)\n    @PostMapping(value = \"/pushToBaidu/{type}\")\n    public ResponseVO pushToBaidu(@PathVariable(\"type\") BaiduPushTypeEnum type, Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        Config config = configService.get();\n        String siteUrl = config.getSiteUrl();\n        StringBuilder params = new StringBuilder();\n        for (Long id : ids) {\n            params.append(siteUrl).append(\"/article/\").append(id).append(\"\\n\");\n        }\n        // urls: 推送, update: 更新, del: 删除\n        String url = UrlBuildUtil.getBaiduPushUrl(type.toString(), config.getSiteUrl(), config.getBaiduPushToken());\n        /**\n         * success\t       \tint\t    成功推送的url条数\n         * remain\t       \tint\t    当天剩余的可推送url条数\n         * not_same_site\tarray\t由于不是本站url而未处理的url列表\n         * not_valid\t   \tarray\t不合法的url列表\n         */\n        // {\"remain\":4999997,\"success\":1,\"not_same_site\":[],\"not_valid\":[]}\n        /**\n         * error\t是\tint\t      错误码，与状态码相同\n         * message\t是\tstring\t  错误描述\n         */\n        //{error\":401,\"message\":\"token is not valid\"}\n        String result = BaiduPushUtil.doPush(url, params.toString());\n        log.info(result);\n        JSONObject resultJson = JSONObject.parseObject(result);\n\n        if (resultJson.containsKey(\"error\")) {\n            return ResultUtil.error(resultJson.getString(\"message\"));\n        }\n        return ResultUtil.success(null, result);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestCommentController.java",
        "method_name": "reply",
        "old_function": "@PostMapping(value = \"/reply\")\n    public ResponseVO reply(Comment comment) {\n        try {\n            Config config = configService.get();\n            User user = SessionUtil.getUser();\n            comment.setQq(user.getQq());\n            comment.setEmail(user.getEmail());\n            comment.setNickname(user.getNickname());\n            comment.setAvatar(user.getAvatar());\n            comment.setUrl(config.getSiteUrl());\n            comment.setUserId(user.getId());\n            comment.setStatus(CommentStatusEnum.APPROVED.toString());\n            commentService.comment(comment);\n        } catch (ZhydCommentException e) {\n            return ResultUtil.error(e.getMessage());\n        }\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"comment:reply\")\n    @PostMapping(value = \"/reply\")\n    public ResponseVO reply(Comment comment) {\n        try {\n            Config config = configService.get();\n            User user = SessionUtil.getUser();\n            comment.setQq(user.getQq());\n            comment.setEmail(user.getEmail());\n            comment.setNickname(user.getNickname());\n            comment.setAvatar(user.getAvatar());\n            comment.setUrl(config.getSiteUrl());\n            comment.setUserId(user.getId());\n            comment.setStatus(CommentStatusEnum.APPROVED.toString());\n            commentService.comment(comment);\n        } catch (ZhydCommentException e) {\n            return ResultUtil.error(e.getMessage());\n        }\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestCommentController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            commentService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 条评论\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"comment:batchDelete\", \"comment:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            commentService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 条评论\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestCommentController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.commentService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"comments\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.commentService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestCommentController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Comment comment) {\n        try {\n            commentService.updateSelective(comment);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"评论修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"comments\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Comment comment) {\n        try {\n            commentService.updateSelective(comment);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"评论修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestCommentController.java",
        "method_name": "audit",
        "old_function": "@PostMapping(\"/audit\")\n    public ResponseVO audit(Comment comment, Boolean sendEmail) {\n        try {\n            commentService.updateSelective(comment);\n            if (null != sendEmail && sendEmail) {\n                Comment commentDB = commentService.getByPrimaryKey(comment.getId());\n                mailService.send(commentDB, TemplateKeyEnum.TM_COMMENT_AUDIT, true);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"评论审核失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"comment:audit\")\n    @PostMapping(\"/audit\")\n    public ResponseVO audit(Comment comment, Boolean sendEmail) {\n        try {\n            commentService.updateSelective(comment);\n            if (null != sendEmail && sendEmail) {\n                Comment commentDB = commentService.getByPrimaryKey(comment.getId());\n                mailService.send(commentDB, TemplateKeyEnum.TM_COMMENT_AUDIT, true);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"评论审核失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestCommentController.java",
        "method_name": "listVerifying",
        "old_function": "@PostMapping(\"/listVerifying\")\n    public ResponseVO listVerifying(Comment comment) {\n        return ResultUtil.success(null, commentService.listVerifying(10));\n    }",
        "new_function": "@RequiresPermissions(\"comments\")\n    @PostMapping(\"/listVerifying\")\n    public ResponseVO listVerifying(Comment comment) {\n        return ResultUtil.success(null, commentService.listVerifying(10));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestConfigController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get\")\n    public ResponseVO get() {\n        return ResultUtil.success(null, sysConfigService.get());\n    }",
        "new_function": "@RequiresRoles(\"role:root\")\n    @PostMapping(\"/get\")\n    public ResponseVO get() {\n        return ResultUtil.success(null, sysConfigService.get());\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestConfigController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Config config,\n                           @RequestParam(required = false) MultipartFile wxPraiseCodeFile,\n                           @RequestParam(required = false) MultipartFile zfbPraiseCodeFile) {\n        config.setWxPraiseCode(FileUtil.uploadToQiniu(wxPraiseCodeFile, QiniuUploadType.QRCODE, true));\n        config.setZfbPraiseCode(FileUtil.uploadToQiniu(zfbPraiseCodeFile, QiniuUploadType.QRCODE, true));\n        if(null != wxPraiseCodeFile || null != zfbPraiseCodeFile){\n            Config configDB = sysConfigService.get();\n            FileUtil.removeQiniu(configDB.getWxPraiseCode(), configDB.getZfbPraiseCode());\n        }\n        try {\n            sysConfigService.update(config);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"系统配置修改失败\");\n        }\n        return ResultUtil.success(\"系统配置修改成功\");\n    }",
        "new_function": "@RequiresRoles(\"role:root\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Config config,\n                           @RequestParam(required = false) MultipartFile wxPraiseCodeFile,\n                           @RequestParam(required = false) MultipartFile zfbPraiseCodeFile) {\n        config.setWxPraiseCode(FileUtil.uploadToQiniu(wxPraiseCodeFile, QiniuUploadType.QRCODE, true));\n        config.setZfbPraiseCode(FileUtil.uploadToQiniu(zfbPraiseCodeFile, QiniuUploadType.QRCODE, true));\n        if(null != wxPraiseCodeFile || null != zfbPraiseCodeFile){\n            Config configDB = sysConfigService.get();\n            FileUtil.removeQiniu(configDB.getWxPraiseCode(), configDB.getZfbPraiseCode());\n        }\n        try {\n            sysConfigService.update(config);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"系统配置修改失败\");\n        }\n        return ResultUtil.success(\"系统配置修改成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestLinkController.java",
        "method_name": "list",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult list(LinkConditionVO vo) {\n        PageInfo<Link> pageInfo = linkService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"links\")\n    @PostMapping(\"/list\")\n    public PageResult list(LinkConditionVO vo) {\n        PageInfo<Link> pageInfo = linkService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestLinkController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(Link link) {\n        link.setSource(LinkSourceEnum.ADMIN);\n        linkService.insert(link);\n        mailService.send(link, TemplateKeyEnum.TM_LINKS);\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"link:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(Link link) {\n        link.setSource(LinkSourceEnum.ADMIN);\n        linkService.insert(link);\n        mailService.send(link, TemplateKeyEnum.TM_LINKS);\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestLinkController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            linkService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个友情链接\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"link:batchDelete\", \"link:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            linkService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个友情链接\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestLinkController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.linkService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"link:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.linkService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestLinkController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Link link) {\n        try {\n            linkService.updateSelective(link);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"友情链接修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"link:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Link link) {\n        try {\n            linkService.updateSelective(link);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"友情链接修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestNoticeController.java",
        "method_name": "list",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult list(NoticeConditionVO vo) {\n        PageInfo<Notice> pageInfo = noticeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"notices\")\n    @PostMapping(\"/list\")\n    public PageResult list(NoticeConditionVO vo) {\n        PageInfo<Notice> pageInfo = noticeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestNoticeController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(Notice notice) {\n        User user = SessionUtil.getUser();\n        if (null != user) {\n            notice.setUserId(user.getId());\n        }\n        noticeService.insert(notice);\n        return ResultUtil.success(\"系统通知添加成功\");\n    }",
        "new_function": "@RequiresPermissions(\"notice:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(Notice notice) {\n        User user = SessionUtil.getUser();\n        if (null != user) {\n            notice.setUserId(user.getId());\n        }\n        noticeService.insert(notice);\n        return ResultUtil.success(\"系统通知添加成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestNoticeController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            noticeService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个系统通知\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"notice:batchDelete\", \"notice:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            noticeService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个系统通知\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestNoticeController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.noticeService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"notice:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.noticeService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestNoticeController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Notice notice) {\n        try {\n            noticeService.updateSelective(notice);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"系统通知修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"notice:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Notice notice) {\n        try {\n            noticeService.updateSelective(notice);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"系统通知修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestNoticeController.java",
        "method_name": "release",
        "old_function": "@PostMapping(\"/release/{id}\")\n    public ResponseVO release(@PathVariable Long id) {\n        try {\n            Notice notice = new Notice();\n            notice.setId(id);\n            notice.setStatus(NoticeStatusEnum.RELEASE.toString());\n            noticeService.updateSelective(notice);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"通知发布失败，状态不变！\");\n        }\n        return ResultUtil.success(\"该通知已发布，可去前台页面查看效果！\");\n    }",
        "new_function": "@RequiresPermissions(\"notice:release\")\n    @PostMapping(\"/release/{id}\")\n    public ResponseVO release(@PathVariable Long id) {\n        try {\n            Notice notice = new Notice();\n            notice.setId(id);\n            notice.setStatus(NoticeStatusEnum.RELEASE.toString());\n            noticeService.updateSelective(notice);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"通知发布失败，状态不变！\");\n        }\n        return ResultUtil.success(\"该通知已发布，可去前台页面查看效果！\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestNoticeController.java",
        "method_name": "withdraw",
        "old_function": "@PostMapping(\"/withdraw/{id}\")\n    public ResponseVO withdraw(@PathVariable Long id) {\n        try {\n            Notice notice = new Notice();\n            notice.setId(id);\n            notice.setStatus(NoticeStatusEnum.NOT_RELEASE.toString());\n            noticeService.updateSelective(notice);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"通知撤回失败，状态不变！\");\n        }\n        return ResultUtil.success(\"该通知已撤回，可修改后重新发布！\");\n    }",
        "new_function": "@RequiresPermissions(\"notice:withdraw\")\n    @PostMapping(\"/withdraw/{id}\")\n    public ResponseVO withdraw(@PathVariable Long id) {\n        try {\n            Notice notice = new Notice();\n            notice.setId(id);\n            notice.setStatus(NoticeStatusEnum.NOT_RELEASE.toString());\n            noticeService.updateSelective(notice);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"通知撤回失败，状态不变！\");\n        }\n        return ResultUtil.success(\"该通知已撤回，可修改后重新发布！\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestResourcesController.java",
        "method_name": "getAll",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult getAll(ResourceConditionVO vo) {\n        PageInfo<Resources> pageInfo = resourcesService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"resources\")\n    @PostMapping(\"/list\")\n    public PageResult getAll(ResourceConditionVO vo) {\n        PageInfo<Resources> pageInfo = resourcesService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestResourcesController.java",
        "method_name": "resourcesWithSelected",
        "old_function": "@PostMapping(\"/resourcesWithSelected\")\n    public ResponseVO<List<Resources>> resourcesWithSelected(Long rid) {\n        return ResultUtil.success(null, resourcesService.queryResourcesListWithSelected(rid));\n    }",
        "new_function": "@RequiresPermissions(\"role:allotResource\")\n    @PostMapping(\"/resourcesWithSelected\")\n    public ResponseVO<List<Resources>> resourcesWithSelected(Long rid) {\n        return ResultUtil.success(null, resourcesService.queryResourcesListWithSelected(rid));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestResourcesController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(Resources resources) {\n        resourcesService.insert(resources);\n        //更新权限\n        shiroService.updatePermission();\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"resource:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(Resources resources) {\n        resourcesService.insert(resources);\n        //更新权限\n        shiroService.updatePermission();\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestResourcesController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            resourcesService.removeByPrimaryKey(id);\n        }\n\n        //更新权限\n        shiroService.updatePermission();\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个资源\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"resource:batchDelete\", \"resource:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            resourcesService.removeByPrimaryKey(id);\n        }\n\n        //更新权限\n        shiroService.updatePermission();\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个资源\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestResourcesController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.resourcesService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"resource:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.resourcesService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestResourcesController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Resources resources) {\n        try {\n            resourcesService.updateSelective(resources);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"资源修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"resource:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Resources resources) {\n        try {\n            resourcesService.updateSelective(resources);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"资源修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestRoleController.java",
        "method_name": "getAll",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult getAll(RoleConditionVO vo) {\n        PageInfo<Role> pageInfo = roleService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"roles\")\n    @PostMapping(\"/list\")\n    public PageResult getAll(RoleConditionVO vo) {\n        PageInfo<Role> pageInfo = roleService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestRoleController.java",
        "method_name": "rolesWithSelected",
        "old_function": "@PostMapping(\"/rolesWithSelected\")\n    public ResponseVO<List<Role>> rolesWithSelected(Integer uid) {\n        return ResultUtil.success(null, roleService.queryRoleListWithSelected(uid));\n    }",
        "new_function": "@RequiresPermissions(\"user:allotRole\")\n    @PostMapping(\"/rolesWithSelected\")\n    public ResponseVO<List<Role>> rolesWithSelected(Integer uid) {\n        return ResultUtil.success(null, roleService.queryRoleListWithSelected(uid));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestRoleController.java",
        "method_name": "saveRoleResources",
        "old_function": "@PostMapping(\"/saveRoleResources\")\n    public ResponseVO saveRoleResources(Long roleId, String resourcesId) {\n        if (StringUtils.isEmpty(roleId)) {\n            return ResultUtil.error(\"error\");\n        }\n        roleResourcesService.addRoleResources(roleId, resourcesId);\n        // 重新加载所有拥有roleId的用户的权限信息\n        shiroService.reloadAuthorizingByRoleId(roleId);\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"role:allotResource\")\n    @PostMapping(\"/saveRoleResources\")\n    public ResponseVO saveRoleResources(Long roleId, String resourcesId) {\n        if (StringUtils.isEmpty(roleId)) {\n            return ResultUtil.error(\"error\");\n        }\n        roleResourcesService.addRoleResources(roleId, resourcesId);\n        // 重新加载所有拥有roleId的用户的权限信息\n        shiroService.reloadAuthorizingByRoleId(roleId);\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestRoleController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(Role role) {\n        roleService.insert(role);\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"role:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(Role role) {\n        roleService.insert(role);\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestRoleController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            roleService.removeByPrimaryKey(id);\n            roleResourcesService.removeByRoleId(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个角色\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"role:batchDelete\", \"role:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            roleService.removeByPrimaryKey(id);\n            roleResourcesService.removeByRoleId(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个角色\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestRoleController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.roleService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"role:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.roleService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestRoleController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Role role) {\n        try {\n            roleService.updateSelective(role);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"角色修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"role:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Role role) {\n        try {\n            roleService.updateSelective(role);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"角色修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTagController.java",
        "method_name": "list",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult list(TagsConditionVO vo) {\n        PageInfo<Tags> pageInfo = tagsService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"tags\")\n    @PostMapping(\"/list\")\n    public PageResult list(TagsConditionVO vo) {\n        PageInfo<Tags> pageInfo = tagsService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTagController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(Tags tags) {\n        tagsService.insert(tags);\n        return ResultUtil.success(\"标签添加成功！新标签 - \" + tags.getName());\n    }",
        "new_function": "@RequiresPermissions(\"tag:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(Tags tags) {\n        tagsService.insert(tags);\n        return ResultUtil.success(\"标签添加成功！新标签 - \" + tags.getName());\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTagController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            tagsService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个标签\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"tag:batchDelete\", \"tag:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            tagsService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个标签\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTagController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.tagsService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"tag:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.tagsService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTagController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Tags tags) {\n        try {\n            tagsService.updateSelective(tags);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"标签修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"tag:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Tags tags) {\n        try {\n            tagsService.updateSelective(tags);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"标签修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTemplateController.java",
        "method_name": "list",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult list(TemplateConditionVO vo) {\n        PageInfo<Template> pageInfo = templateService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"templates\")\n    @PostMapping(\"/list\")\n    public PageResult list(TemplateConditionVO vo) {\n        PageInfo<Template> pageInfo = templateService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTemplateController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(Template template) {\n        templateService.insert(template);\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"template:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(Template template) {\n        templateService.insert(template);\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTemplateController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            templateService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个模板\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"template:batchDelete\", \"template:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            templateService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个模板\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTemplateController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.templateService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"template:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.templateService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTemplateController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Template template) {\n        try {\n            templateService.updateSelective(template);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"模板修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"template:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Template template) {\n        try {\n            templateService.updateSelective(template);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"模板修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTypeController.java",
        "method_name": "list",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult list(TypeConditionVO vo) {\n        PageInfo<Type> pageInfo = typeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"types\")\n    @PostMapping(\"/list\")\n    public PageResult list(TypeConditionVO vo) {\n        PageInfo<Type> pageInfo = typeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTypeController.java",
        "method_name": "listNodes",
        "old_function": "@PostMapping(\"/listNodes\")\n    public PageResult listNodes(TypeConditionVO vo) {\n        PageHelper.startPage(vo.getPageNumber() - 1, vo.getPageSize());\n        if (vo.getPid() == null) {\n            return ResultUtil.tablePage(null);\n        }\n        PageInfo<Type> pageInfo = typeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"types\")\n    @PostMapping(\"/listNodes\")\n    public PageResult listNodes(TypeConditionVO vo) {\n        PageHelper.startPage(vo.getPageNumber() - 1, vo.getPageSize());\n        if(vo.getPid() == null){\n            return ResultUtil.tablePage(null);\n        }\n        PageInfo<Type> pageInfo = typeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTypeController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(Type type) {\n        typeService.insert(type);\n        return ResultUtil.success(\"文章类型添加成功！新类型 - \" + type.getName());\n    }",
        "new_function": "@RequiresPermissions(\"type:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(Type type) {\n        typeService.insert(type);\n        return ResultUtil.success(\"文章类型添加成功！新类型 - \" + type.getName());\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTypeController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            typeService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个文章类型\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"type:batchDelete\", \"type:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            typeService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个文章类型\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTypeController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.typeService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"type:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.typeService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestTypeController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(Type type) {\n        try {\n            typeService.updateSelective(type);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"文章类型修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"type:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(Type type) {\n        try {\n            typeService.updateSelective(type);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"文章类型修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUpdateController.java",
        "method_name": "list",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult list(UpdateRecordeConditionVO vo) {\n        PageInfo<UpdateRecorde> pageInfo = updateRecordeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"updateLogs\")\n    @PostMapping(\"/list\")\n    public PageResult list(UpdateRecordeConditionVO vo) {\n        PageInfo<UpdateRecorde> pageInfo = updateRecordeService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUpdateController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(UpdateRecorde updateRecorde) {\n        updateRecordeService.insert(updateRecorde);\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"updateLog:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(UpdateRecorde updateRecorde) {\n        updateRecordeService.insert(updateRecorde);\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUpdateController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            updateRecordeService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个更新记录\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"updateLog:batchDelete\", \"updateLog:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            updateRecordeService.removeByPrimaryKey(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个更新记录\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUpdateController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.updateRecordeService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"updateLog:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.updateRecordeService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUpdateController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(UpdateRecorde updateRecorde) {\n        try {\n            updateRecordeService.updateSelective(updateRecorde);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"更新记录修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"updateLog:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(UpdateRecorde updateRecorde) {\n        try {\n            updateRecordeService.updateSelective(updateRecorde);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"更新记录修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUserController.java",
        "method_name": "list",
        "old_function": "@PostMapping(\"/list\")\n    public PageResult list(UserConditionVO vo) {\n        PageInfo<User> pageInfo = userService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "new_function": "@RequiresPermissions(\"users\")\n    @PostMapping(\"/list\")\n    public PageResult list(UserConditionVO vo) {\n        PageInfo<User> pageInfo = userService.findPageBreakByCondition(vo);\n        return ResultUtil.tablePage(pageInfo);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUserController.java",
        "method_name": "saveUserRoles",
        "old_function": "@PostMapping(\"/saveUserRoles\")\n    public ResponseVO saveUserRoles(Long userId, String roleIds) {\n        if (StringUtils.isEmpty(userId)) {\n            return ResultUtil.error(\"error\");\n        }\n        userRoleService.addUserRole(userId, roleIds);\n        return ResultUtil.success(\"成功\");\n    }",
        "new_function": "@RequiresPermissions(\"user:allotRole\")\n    @PostMapping(\"/saveUserRoles\")\n    public ResponseVO saveUserRoles(Long userId, String roleIds) {\n        if (StringUtils.isEmpty(userId)) {\n            return ResultUtil.error(\"error\");\n        }\n        userRoleService.addUserRole(userId, roleIds);\n        return ResultUtil.success(\"成功\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUserController.java",
        "method_name": "add",
        "old_function": "@PostMapping(value = \"/add\")\n    public ResponseVO add(User user) {\n        User u = userService.getByUserName(user.getUsername());\n        if (u != null) {\n            return ResultUtil.error(\"该用户名[\" + user.getUsername() + \"]已存在！请更改用户名\");\n        }\n        try {\n            user.setPassword(PasswordUtil.encrypt(user.getPassword(), user.getUsername()));\n            userService.insert(user);\n            return ResultUtil.success(\"成功\");\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"error\");\n        }\n    }",
        "new_function": "@RequiresPermissions(\"user:add\")\n    @PostMapping(value = \"/add\")\n    public ResponseVO add(User user) {\n        User u = userService.getByUserName(user.getUsername());\n        if (u != null) {\n            return ResultUtil.error(\"该用户名[\"+user.getUsername()+\"]已存在！请更改用户名\");\n        }\n        try {\n            user.setPassword(PasswordUtil.encrypt(user.getPassword(), user.getUsername()));\n            userService.insert(user);\n            return ResultUtil.success(\"成功\");\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"error\");\n        }\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUserController.java",
        "method_name": "remove",
        "old_function": "@PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            userService.removeByPrimaryKey(id);\n            userRoleService.removeByUserId(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个用户\");\n    }",
        "new_function": "@RequiresPermissions(value = {\"user:batchDelete\", \"user:delete\"}, logical = Logical.OR)\n    @PostMapping(value = \"/remove\")\n    public ResponseVO remove(Long[] ids) {\n        if (null == ids) {\n            return ResultUtil.error(500, \"请至少选择一条记录\");\n        }\n        for (Long id : ids) {\n            userService.removeByPrimaryKey(id);\n            userRoleService.removeByUserId(id);\n        }\n        return ResultUtil.success(\"成功删除 [\" + ids.length + \"] 个用户\");\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUserController.java",
        "method_name": "get",
        "old_function": "@PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.userService.getByPrimaryKey(id));\n    }",
        "new_function": "@RequiresPermissions(\"user:edit\")\n    @PostMapping(\"/get/{id}\")\n    public ResponseVO get(@PathVariable Long id) {\n        return ResultUtil.success(null, this.userService.getByPrimaryKey(id));\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "blog-admin/src/main/java/com/zyd/blog/controller/RestUserController.java",
        "method_name": "edit",
        "old_function": "@PostMapping(\"/edit\")\n    public ResponseVO edit(User user) {\n        try {\n            userService.updateSelective(user);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"用户修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "new_function": "@RequiresPermissions(\"user:edit\")\n    @PostMapping(\"/edit\")\n    public ResponseVO edit(User user) {\n        try {\n            userService.updateSelective(user);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResultUtil.error(\"用户修改失败！\");\n        }\n        return ResultUtil.success(ResponseStatus.SUCCESS);\n    }",
        "commit": "a20a03776de7a16dd69fb8b67f30ad503ec99ca4",
        "project_name": "OneBlog"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsArticleController.java",
        "method_name": "list",
        "old_function": "@ApiOperation(value = \"文章列表\", notes = \"获取文章列表并分页\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\tpublic String list(\n\t\t\t@RequestParam(required = false, defaultValue = \"1\", value = \"page\") int page,\n\t\t\t@RequestParam(required = false, defaultValue = \"20\", value = \"rows\") int rows,\n\t\t\t@RequestParam(required = false, defaultValue = \"true\", value = \"desc\") boolean desc,\n\t\t\tHttpServletRequest request, ModelMap modelMap) {\n\n\t\t// 数据列表\n\t\tCmsArticleExample cmsArticleExample = new CmsArticleExample();\n\t\tcmsArticleExample.setOffset((page - 1) * rows);\n\t\tcmsArticleExample.setLimit(rows);\n\t\tcmsArticleExample.setOrderByClause(desc ? \"orders desc\" : \"orders asc\");\n\t\tList<CmsArticle> articles = cmsArticleService.selectByExample(cmsArticleExample);\n\n\t\t// 分页对象\n\t\tlong total = cmsArticleService.countByExample(cmsArticleExample);\n\t\tPaginator paginator = new Paginator(total, page, rows, request);\n\n\t\tmodelMap.put(\"articles\", articles);\n\t\tmodelMap.put(\"paginator\", paginator);\n\t\treturn \"/manage/article/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"文章列表\", notes = \"获取文章列表并分页\")\n\t@RequiresPermissions(\"cms:article:read\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\tpublic String list(\n\t\t\t@RequestParam(required = false, defaultValue = \"1\", value = \"page\") int page,\n\t\t\t@RequestParam(required = false, defaultValue = \"20\", value = \"rows\") int rows,\n\t\t\t@RequestParam(required = false, defaultValue = \"true\", value = \"desc\") boolean desc,\n\t\t\tHttpServletRequest request, ModelMap modelMap) {\n\n\t\t// 数据列表\n\t\tCmsArticleExample cmsArticleExample = new CmsArticleExample();\n\t\tcmsArticleExample.setOffset((page - 1) * rows);\n\t\tcmsArticleExample.setLimit(rows);\n\t\tcmsArticleExample.setOrderByClause(desc ? \"orders desc\" : \"orders asc\");\n\t\tList<CmsArticle> articles = cmsArticleService.selectByExample(cmsArticleExample);\n\n\t\t// 分页对象\n\t\tlong total = cmsArticleService.countByExample(cmsArticleExample);\n\t\tPaginator paginator = new Paginator(total, page, rows, request);\n\n\t\tmodelMap.put(\"articles\", articles);\n\t\tmodelMap.put(\"paginator\", paginator);\n\t\treturn \"/manage/article/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsArticleController.java",
        "method_name": "add",
        "old_function": "@ApiOperation(value = \"新增文章\", notes = \"新增文章提交接口\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsArticle cmsArticle, ModelMap modelMap) {\n\t\tlong time = System.currentTimeMillis();\n\t\tcmsArticle.setCtime(time);\n\t\tcmsArticle.setOrders(time);\n\t\tint count = cmsArticleService.insertSelective(cmsArticle);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsArticle.getArticleId());\n\t\treturn \"redirect:/manage/article/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"新增文章\", notes = \"新增文章提交接口\")\n\t@RequiresPermissions(\"cms:article:create\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsArticle cmsArticle, ModelMap modelMap) {\n\t\tlong time = System.currentTimeMillis();\n\t\tcmsArticle.setCtime(time);\n\t\tcmsArticle.setOrders(time);\n\t\tint count = cmsArticleService.insertSelective(cmsArticle);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsArticle.getArticleId());\n\t\treturn \"redirect:/manage/article/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsArticleController.java",
        "method_name": "delete",
        "old_function": "@ApiOperation(value = \"删除文章\", notes = \"批量删除文章\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsArticleService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/article/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"删除文章\", notes = \"批量删除文章\")\n\t@RequiresPermissions(\"cms:article:delete\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsArticleService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/article/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsArticleController.java",
        "method_name": "update",
        "old_function": "@ApiOperation(value = \"修改文章\", notes = \"根据id修改文章提交接口\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsArticle cmsArticle, ModelMap modelMap) {\n\t\tint count = cmsArticleService.updateByPrimaryKeySelective(cmsArticle);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/article/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"修改文章\", notes = \"根据id修改文章提交接口\")\n\t@RequiresPermissions(\"cms:article:update\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsArticle cmsArticle, ModelMap modelMap) {\n\t\tint count = cmsArticleService.updateByPrimaryKeySelective(cmsArticle);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/article/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCategoryController.java",
        "method_name": "list",
        "old_function": "@ApiOperation(value = \"类目列表\", notes = \"获取类目列表并分页\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\tpublic String list(\n\t\t\t@RequestParam(required = false, defaultValue = \"1\", value = \"page\") int page,\n\t\t\t@RequestParam(required = false, defaultValue = \"20\", value = \"rows\") int rows,\n\t\t\t@RequestParam(required = false, defaultValue = \"false\", value = \"desc\") boolean desc,\n\t\t\tHttpServletRequest request, ModelMap modelMap) {\n\n\t\t// 数据列表\n\t\tCmsCategoryExample cmsCategoryExample = new CmsCategoryExample();\n\t\tcmsCategoryExample.setOffset((page - 1) * rows);\n\t\tcmsCategoryExample.setLimit(rows);\n\t\tcmsCategoryExample.setOrderByClause(desc ? \"orders desc\" : \"orders asc\");\n\t\tList<CmsCategory> categorys = cmsCategoryService.selectByExample(cmsCategoryExample);\n\n\t\t// 分页对象\n\t\tlong total = cmsCategoryService.countByExample(cmsCategoryExample);\n\t\tPaginator paginator = new Paginator(total, page, rows, request);\n\n\t\tmodelMap.put(\"categorys\", categorys);\n\t\tmodelMap.put(\"paginator\", paginator);\n\t\treturn \"/manage/category/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"类目列表\", notes = \"获取类目列表并分页\")\n\t@RequiresPermissions(\"cms:category:read\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\tpublic String list(\n\t\t\t@RequestParam(required = false, defaultValue = \"1\", value = \"page\") int page,\n\t\t\t@RequestParam(required = false, defaultValue = \"20\", value = \"rows\") int rows,\n\t\t\t@RequestParam(required = false, defaultValue = \"false\", value = \"desc\") boolean desc,\n\t\t\tHttpServletRequest request, ModelMap modelMap) {\n\n\t\t// 数据列表\n\t\tCmsCategoryExample cmsCategoryExample = new CmsCategoryExample();\n\t\tcmsCategoryExample.setOffset((page - 1) * rows);\n\t\tcmsCategoryExample.setLimit(rows);\n\t\tcmsCategoryExample.setOrderByClause(desc ? \"orders desc\" : \"orders asc\");\n\t\tList<CmsCategory> categorys = cmsCategoryService.selectByExample(cmsCategoryExample);\n\n\t\t// 分页对象\n\t\tlong total = cmsCategoryService.countByExample(cmsCategoryExample);\n\t\tPaginator paginator = new Paginator(total, page, rows, request);\n\n\t\tmodelMap.put(\"categorys\", categorys);\n\t\tmodelMap.put(\"paginator\", paginator);\n\t\treturn \"/manage/category/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCategoryController.java",
        "method_name": "add",
        "old_function": "@ApiOperation(value = \"新增类目\", notes = \"新增类目提交接口\")\n\t@ApiImplicitParam(name = \"cmsCategory\", value = \"类目实体cmsCategory\", required = true, dataType = \"CmsCategory\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsCategory cmsCategory, ModelMap modelMap) {\n\t\tlong time = System.currentTimeMillis();\n\t\tcmsCategory.setCtime(time);\n\t\tcmsCategory.setOrders(time);\n\t\tint count = cmsCategoryService.insertSelective(cmsCategory);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsCategory.getCategoryId());\n\t\treturn \"redirect:/manage/category/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"新增类目\", notes = \"新增类目提交接口\")\n\t@RequiresPermissions(\"cms:category:create\")\n\t@ApiImplicitParam(name = \"cmsCategory\", value = \"类目实体cmsCategory\", required = true, dataType = \"CmsCategory\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsCategory cmsCategory, ModelMap modelMap) {\n\t\tlong time = System.currentTimeMillis();\n\t\tcmsCategory.setCtime(time);\n\t\tcmsCategory.setOrders(time);\n\t\tint count = cmsCategoryService.insertSelective(cmsCategory);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsCategory.getCategoryId());\n\t\treturn \"redirect:/manage/category/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCategoryController.java",
        "method_name": "delete",
        "old_function": "@ApiOperation(value = \"删除类目\", notes = \"批量删除类目\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsCategoryService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/category/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"删除类目\", notes = \"批量删除类目\")\n\t@RequiresPermissions(\"cms:category:delete\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsCategoryService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/category/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCategoryController.java",
        "method_name": "update",
        "old_function": "@ApiOperation(value = \"修改类目\", notes = \"根据id修改类目提交接口\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsCategory cmsCategory, ModelMap modelMap) {\n\t\tint count = cmsCategoryService.updateByPrimaryKeySelective(cmsCategory);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/category/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"修改类目\", notes = \"根据id修改类目提交接口\")\n\t@RequiresPermissions(\"cms:category:update\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsCategory cmsCategory, ModelMap modelMap) {\n\t\tint count = cmsCategoryService.updateByPrimaryKeySelective(cmsCategory);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/category/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCommentController.java",
        "method_name": "list",
        "old_function": "@ApiOperation(value = \"评论列表\", notes = \"获取评论列表并分页\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\tpublic String list(\n\t\t\t@RequestParam(required = false, defaultValue = \"1\", value = \"page\") int page,\n\t\t\t@RequestParam(required = false, defaultValue = \"20\", value = \"rows\") int rows,\n\t\t\t@RequestParam(required = false, defaultValue = \"true\", value = \"desc\") boolean desc,\n\t\t\tHttpServletRequest request, ModelMap modelMap) {\n\n\t\t// 数据列表\n\t\tCmsCommentExample cmsCommentExample = new CmsCommentExample();\n\t\tcmsCommentExample.setOffset((page - 1) * rows);\n\t\tcmsCommentExample.setLimit(rows);\n\t\tcmsCommentExample.setOrderByClause(desc ? \"comment_id desc\" : \"comment_id asc\");\n\t\tList<CmsComment> comments = cmsCommentService.selectByExample(cmsCommentExample);\n\n\t\t// 分页对象\n\t\tlong total = cmsCommentService.countByExample(cmsCommentExample);\n\t\tPaginator paginator = new Paginator(total, page, rows, request);\n\n\t\tmodelMap.put(\"comments\", comments);\n\t\tmodelMap.put(\"paginator\", paginator);\n\t\treturn \"/manage/comment/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"评论列表\", notes = \"获取评论列表并分页\")\n\t@RequiresPermissions(\"cms:comment:read\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\tpublic String list(\n\t\t\t@RequestParam(required = false, defaultValue = \"1\", value = \"page\") int page,\n\t\t\t@RequestParam(required = false, defaultValue = \"20\", value = \"rows\") int rows,\n\t\t\t@RequestParam(required = false, defaultValue = \"true\", value = \"desc\") boolean desc,\n\t\t\tHttpServletRequest request, ModelMap modelMap) {\n\n\t\t// 数据列表\n\t\tCmsCommentExample cmsCommentExample = new CmsCommentExample();\n\t\tcmsCommentExample.setOffset((page - 1) * rows);\n\t\tcmsCommentExample.setLimit(rows);\n\t\tcmsCommentExample.setOrderByClause(desc ? \"comment_id desc\" : \"comment_id asc\");\n\t\tList<CmsComment> comments = cmsCommentService.selectByExample(cmsCommentExample);\n\n\t\t// 分页对象\n\t\tlong total = cmsCommentService.countByExample(cmsCommentExample);\n\t\tPaginator paginator = new Paginator(total, page, rows, request);\n\n\t\tmodelMap.put(\"comments\", comments);\n\t\tmodelMap.put(\"paginator\", paginator);\n\t\treturn \"/manage/comment/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCommentController.java",
        "method_name": "add",
        "old_function": "@ApiOperation(value = \"新增评论\", notes = \"新增评论提交接口\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsComment cmsComment, ModelMap modelMap) {\n\t\tcmsComment.setCtime(System.currentTimeMillis());\n\t\tint count = cmsCommentService.insertSelective(cmsComment);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsComment.getArticleId());\n\t\treturn \"redirect:/manage/comment/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"新增评论\", notes = \"新增评论提交接口\")\n\t@RequiresPermissions(\"cms:comment:create\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsComment cmsComment, ModelMap modelMap) {\n\t\tcmsComment.setCtime(System.currentTimeMillis());\n\t\tint count = cmsCommentService.insertSelective(cmsComment);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsComment.getArticleId());\n\t\treturn \"redirect:/manage/comment/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCommentController.java",
        "method_name": "delete",
        "old_function": "@ApiOperation(value = \"删除评论\", notes = \"批量删除评论\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsCommentService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/comment/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"删除评论\", notes = \"批量删除评论\")\n\t@RequiresPermissions(\"cms:comment:delete\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsCommentService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/comment/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsCommentController.java",
        "method_name": "update",
        "old_function": "@ApiOperation(value = \"修改评论\", notes = \"根据id修改评论提交接口\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsComment cmsComment, ModelMap modelMap) {\n\t\tint count = cmsCommentService.updateByPrimaryKeySelective(cmsComment);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/comment/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"修改评论\", notes = \"根据id修改评论提交接口\")\n\t@RequiresPermissions(\"cms:comment:update\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsComment cmsComment, ModelMap modelMap) {\n\t\tint count = cmsCommentService.updateByPrimaryKeySelective(cmsComment);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/comment/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsTagController.java",
        "method_name": "index",
        "old_function": "@ApiOperation(value = \"评论首页\", notes = \"获取评论列表首页\")\n\t@RequestMapping(value = \"/index\", method = RequestMethod.GET)\n\tpublic String index() {\n\t\treturn \"/manage/tag/index\";\n\t}",
        "new_function": "@ApiOperation(value = \"评论首页\", notes = \"获取评论列表首页\")\n\t@RequiresPermissions(\"cms:tag:read\")\n\t@RequestMapping(value = \"/index\", method = RequestMethod.GET)\n\tpublic String index() {\n\t\treturn \"/manage/tag/index\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsTagController.java",
        "method_name": "list",
        "old_function": "@ApiOperation(value = \"评论列表\", notes = \"获取评论列表并分页\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\t@ResponseBody\n\tpublic Object list(\n\t\t\t@RequestParam(required = false, defaultValue = \"0\", value = \"offset\") int offset,\n\t\t\t@RequestParam(required = false, defaultValue = \"10\", value = \"limit\") int limit,\n\t\t\t@RequestParam(required = false, value = \"sort\") String sort,\n\t\t\t@RequestParam(required = false, value = \"order\") String order) {\n\n\t\t// 数据列表\n\t\tCmsTagExample cmsTagExample = new CmsTagExample();\n\t\tcmsTagExample.setOffset(offset);\n\t\tcmsTagExample.setLimit(limit);\n\t\tif (!StringUtils.isEmpty(sort) && !StringUtils.isEmpty(order)) {\n\t\t\tcmsTagExample.setOrderByClause(sort + \" \" + order);\n\t\t}\n\t\tList<CmsTag> tags = cmsTagService.selectByExample(cmsTagExample);\n\n\t\t// long total = cmsTagService.countByExample(cmsTagExample);\n\n\t\treturn tags;\n\t}",
        "new_function": "@ApiOperation(value = \"评论列表\", notes = \"获取评论列表并分页\")\n\t@RequiresPermissions(\"cms:tag:read\")\n\t@RequestMapping(value = \"/list\", method = RequestMethod.GET)\n\t@ResponseBody\n\tpublic Object list(\n\t\t\t@RequestParam(required = false, defaultValue = \"0\", value = \"offset\") int offset,\n\t\t\t@RequestParam(required = false, defaultValue = \"10\", value = \"limit\") int limit,\n\t\t\t@RequestParam(required = false, value = \"sort\") String sort,\n\t\t\t@RequestParam(required = false, value = \"order\") String order) {\n\n\t\t// 数据列表\n\t\tCmsTagExample cmsTagExample = new CmsTagExample();\n\t\tcmsTagExample.setOffset(offset);\n\t\tcmsTagExample.setLimit(limit);\n\t\tif (!StringUtils.isEmpty(sort) && !StringUtils.isEmpty(order)) {\n\t\t\tcmsTagExample.setOrderByClause(sort + \" \" + order);\n\t\t}\n\t\tList<CmsTag> tags = cmsTagService.selectByExample(cmsTagExample);\n\n\t\t// long total = cmsTagService.countByExample(cmsTagExample);\n\n\t\treturn tags;\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsTagController.java",
        "method_name": "add",
        "old_function": "@ApiOperation(value = \"新增标签\", notes = \"新增标签提交接口\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsTag cmsTag, ModelMap modelMap) {\n\t\tlong time = System.currentTimeMillis();\n\t\tcmsTag.setCtime(time);\n\t\tcmsTag.setOrders(time);\n\t\tint count = cmsTagService.insertSelective(cmsTag);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsTag.getTagId());\n\t\treturn \"redirect:/manage/tag/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"新增标签\", notes = \"新增标签提交接口\")\n\t@RequiresPermissions(\"cms:tag:create\")\n\t@RequestMapping(value = \"/add\", method = RequestMethod.POST)\n\tpublic String add(CmsTag cmsTag, ModelMap modelMap) {\n\t\tlong time = System.currentTimeMillis();\n\t\tcmsTag.setCtime(time);\n\t\tcmsTag.setOrders(time);\n\t\tint count = cmsTagService.insertSelective(cmsTag);\n\t\tmodelMap.put(\"count\", count);\n\t\t_log.info(\"新增记录id为：{}\", cmsTag.getTagId());\n\t\treturn \"redirect:/manage/tag/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsTagController.java",
        "method_name": "delete",
        "old_function": "@ApiOperation(value = \"删除标签\", notes = \"批量删除标签\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsTagService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/tag/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"删除标签\", notes = \"批量删除标签\")\n\t@RequiresPermissions(\"cms:tag:delete\")\n\t@RequestMapping(value = \"/delete/{ids}\",method = RequestMethod.GET)\n\tpublic String delete(@PathVariable(\"ids\") String ids, ModelMap modelMap) {\n\t\tint count = cmsTagService.deleteByPrimaryKeys(ids);\n\t\tmodelMap.put(\"count\", count);\n\t\treturn \"redirect:/manage/tag/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-cms/zheng-cms-admin/src/main/java/com/zheng/cms/admin/controller/manage/CmsTagController.java",
        "method_name": "update",
        "old_function": "@ApiOperation(value = \"修改标签\", notes = \"根据id修改标签提交接口\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsTag cmsTag, ModelMap modelMap) {\n\t\tint count = cmsTagService.updateByPrimaryKeySelective(cmsTag);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/tag/list\";\n\t}",
        "new_function": "@ApiOperation(value = \"修改标签\", notes = \"根据id修改标签提交接口\")\n\t@RequiresPermissions(\"cms:tag:update\")\n\t@RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n\tpublic String update(@PathVariable(\"id\") int id, CmsTag cmsTag, ModelMap modelMap) {\n\t\tint count = cmsTagService.updateByPrimaryKeySelective(cmsTag);\n\t\tmodelMap.put(\"count\", count);\n\t\tmodelMap.put(\"id\", id);\n\t\treturn \"redirect:/manage/tag/list\";\n\t}",
        "commit": "3123bcb259a9ab8cfd819e7293fd9c16c2598564",
        "project_name": "zheng"
    },
    {
        "file": "zheng-upms/zheng-upms-server/src/main/java/com/zheng/upms/server/controller/manage/UpmsRoleController.java",
        "method_name": "permission",
        "old_function": "@ApiOperation(value = \"角色权限\")\n    @RequiresPermissions(\"upms:role:permission\")\n    @RequestMapping(value = \"/permission/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object permission(@PathVariable(\"id\") int id, HttpServletRequest request) {\n        JSONArray datas = JSONArray.parseArray(request.getParameter(\"datas\"));\n        List<Integer> deleteIds = new ArrayList<>();\n        for (int i = 0; i < datas.size(); i ++) {\n            JSONObject json = datas.getJSONObject(i);\n            if (!json.getBoolean(\"checked\")) {\n                deleteIds.add(json.getIntValue(\"id\"));\n            } else {\n                // 加权限\n                UpmsRolePermission upmsRolePermission = new UpmsRolePermission();\n                upmsRolePermission.setRoleId(id);\n                upmsRolePermission.setPermissionId(json.getIntValue(\"id\"));\n                upmsRolePermissionService.insertSelective(upmsRolePermission);\n            }\n        }\n        // 减权限\n        UpmsRolePermissionExample upmsRolePermissionExample = new UpmsRolePermissionExample();\n        upmsRolePermissionExample.createCriteria()\n            .andPermissionIdIn(deleteIds);\n        upmsRolePermissionService.deleteByExample(upmsRolePermissionExample);\n        return new UpmsResult(UpmsResultConstant.SUCCESS, datas.size());\n    }",
        "new_function": "@ApiOperation(value = \"角色权限\")\n    @RequiresPermissions(\"upms:role:permission\")\n    @RequestMapping(value = \"/permission/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object permission(@PathVariable(\"id\") int id, HttpServletRequest request) {\n        JSONArray datas = JSONArray.parseArray(request.getParameter(\"datas\"));\n        List<Integer> deleteIds = new ArrayList<>();\n        for (int i = 0; i < datas.size(); i ++) {\n            JSONObject json = datas.getJSONObject(i);\n            if (!json.getBoolean(\"checked\")) {\n                deleteIds.add(json.getIntValue(\"id\"));\n            } else {\n                // 加权限\n                UpmsRolePermission upmsRolePermission = new UpmsRolePermission();\n                upmsRolePermission.setRoleId(id);\n                upmsRolePermission.setPermissionId(json.getIntValue(\"id\"));\n                upmsRolePermissionService.insertSelective(upmsRolePermission);\n            }\n        }\n        // 减权限\n        UpmsRolePermissionExample upmsRolePermissionExample = new UpmsRolePermissionExample();\n        upmsRolePermissionExample.createCriteria()\n            .andPermissionIdIn(deleteIds)\n            .andRoleIdEqualTo(id);\n        upmsRolePermissionService.deleteByExample(upmsRolePermissionExample);\n        return new UpmsResult(UpmsResultConstant.SUCCESS, datas.size());\n    }",
        "commit": "1ec8288c3622e1037213201135d6e243c97cfcca",
        "project_name": "zheng"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "getList",
        "old_function": "@ApiOperation(value = \"根据品牌名称分页获取品牌列表\")\n    @RequestMapping(value = \"/list\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object getList(@RequestParam(value = \"keyword\", required = false) String keyword,\n                            @RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum,\n                            @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize) {\n        return new CommonResult().pageSuccess(brandService.listBrand(keyword, pageNum, pageSize));\n    }",
        "new_function": "@ApiOperation(value = \"根据品牌名称分页获取品牌列表\")\n    @RequestMapping(value = \"/list\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:read')\")\n    public Object getList(@RequestParam(value = \"keyword\", required = false) String keyword,\n                            @RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum,\n                            @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize) {\n        return new CommonResult().pageSuccess(brandService.listBrand(keyword, pageNum, pageSize));\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "create",
        "old_function": "@ApiOperation(value = \"添加品牌\")\n    @RequestMapping(value = \"/create\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object create(@Validated @RequestBody PmsBrandParam pmsBrand, BindingResult result) {\n        CommonResult commonResult;\n        int count = brandService.createBrand(pmsBrand);\n        if (count == 1) {\n            commonResult = new CommonResult().success(count);\n        } else {\n            commonResult = new CommonResult().failed();\n        }\n        return commonResult;\n    }",
        "new_function": "@ApiOperation(value = \"添加品牌\")\n    @RequestMapping(value = \"/create\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:create')\")\n    public Object create(@Validated @RequestBody PmsBrandParam pmsBrand, BindingResult result) {\n        CommonResult commonResult;\n        int count = brandService.createBrand(pmsBrand);\n        if (count == 1) {\n            commonResult = new CommonResult().success(count);\n        } else {\n            commonResult = new CommonResult().failed();\n        }\n        return commonResult;\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "update",
        "old_function": "@ApiOperation(value = \"更新品牌\")\n    @RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object update(@PathVariable(\"id\") Long id,\n                              @Validated @RequestBody PmsBrandParam pmsBrandParam,\n                              BindingResult result) {\n        CommonResult commonResult;\n        int count = brandService.updateBrand(id, pmsBrandParam);\n        if (count == 1) {\n            commonResult = new CommonResult().success(count);\n        } else {\n            commonResult = new CommonResult().failed();\n        }\n        return commonResult;\n    }",
        "new_function": "@ApiOperation(value = \"更新品牌\")\n    @RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:update')\")\n    public Object update(@PathVariable(\"id\") Long id,\n                              @Validated @RequestBody PmsBrandParam pmsBrandParam,\n                              BindingResult result) {\n        CommonResult commonResult;\n        int count = brandService.updateBrand(id, pmsBrandParam);\n        if (count == 1) {\n            commonResult = new CommonResult().success(count);\n        } else {\n            commonResult = new CommonResult().failed();\n        }\n        return commonResult;\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "delete",
        "old_function": "@ApiOperation(value = \"删除品牌\")\n    @RequestMapping(value = \"/delete/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object delete(@PathVariable(\"id\") Long id) {\n        int count = brandService.deleteBrand(id);\n        if (count == 1) {\n            return new CommonResult().success(null);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(value = \"删除品牌\")\n    @RequestMapping(value = \"/delete/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:delete')\")\n    public Object delete(@PathVariable(\"id\") Long id) {\n        int count = brandService.deleteBrand(id);\n        if (count == 1) {\n            return new CommonResult().success(null);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "getItem",
        "old_function": "@ApiOperation(value = \"根据编号查询品牌信息\")\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object getItem(@PathVariable(\"id\") Long id) {\n        return new CommonResult().success(brandService.getBrand(id));\n    }",
        "new_function": "@ApiOperation(value = \"根据编号查询品牌信息\")\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:read')\")\n    public Object getItem(@PathVariable(\"id\") Long id) {\n        return new CommonResult().success(brandService.getBrand(id));\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "deleteBatch",
        "old_function": "@ApiOperation(value = \"批量删除品牌\")\n    @RequestMapping(value = \"/delete/batch\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object deleteBatch(@RequestParam(\"ids\") List<Long> ids) {\n        int count = brandService.deleteBrand(ids);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(value = \"批量删除品牌\")\n    @RequestMapping(value = \"/delete/batch\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:delete')\")\n    public Object deleteBatch(@RequestParam(\"ids\") List<Long> ids) {\n        int count = brandService.deleteBrand(ids);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "updateShowStatus",
        "old_function": "@ApiOperation(value = \"批量更新显示状态\")\n    @RequestMapping(value = \"/update/showStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateShowStatus(@RequestParam(\"ids\") List<Long> ids,\n                                   @RequestParam(\"showStatus\") Integer showStatus) {\n        int count = brandService.updateShowStatus(ids, showStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(value = \"批量更新显示状态\")\n    @RequestMapping(value = \"/update/showStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:update')\")\n    public Object updateShowStatus(@RequestParam(\"ids\") List<Long> ids,\n                                   @RequestParam(\"showStatus\") Integer showStatus) {\n        int count = brandService.updateShowStatus(ids, showStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsBrandController.java",
        "method_name": "updateFactoryStatus",
        "old_function": "@ApiOperation(value = \"批量更新厂家制造商状态\")\n    @RequestMapping(value = \"/update/factoryStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateFactoryStatus(@RequestParam(\"ids\") List<Long> ids,\n                                      @RequestParam(\"factoryStatus\") Integer factoryStatus) {\n        int count = brandService.updateFactoryStatus(ids, factoryStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(value = \"批量更新厂家制造商状态\")\n    @RequestMapping(value = \"/update/factoryStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:brand:update')\")\n    public Object updateFactoryStatus(@RequestParam(\"ids\") List<Long> ids,\n                                      @RequestParam(\"factoryStatus\") Integer factoryStatus) {\n        int count = brandService.updateFactoryStatus(ids, factoryStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "create",
        "old_function": "@ApiOperation(\"添加产品分类\")\n    @RequestMapping(value = \"/create\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object create(@Validated @RequestBody PmsProductCategoryParam productCategoryParam,\n                         BindingResult result) {\n        int count = productCategoryService.create(productCategoryParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"添加产品分类\")\n    @RequestMapping(value = \"/create\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:create')\")\n    public Object create(@Validated @RequestBody PmsProductCategoryParam productCategoryParam,\n                         BindingResult result) {\n        int count = productCategoryService.create(productCategoryParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "update",
        "old_function": "@ApiOperation(\"修改商品分类\")\n    @RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object update(@PathVariable Long id,\n                         @Validated\n                         @RequestBody PmsProductCategoryParam productCategoryParam,\n                         BindingResult result) {\n        int count = productCategoryService.update(id, productCategoryParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"修改商品分类\")\n    @RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:update')\")\n    public Object update(@PathVariable Long id,\n                         @Validated\n                         @RequestBody PmsProductCategoryParam productCategoryParam,\n                         BindingResult result) {\n        int count = productCategoryService.update(id, productCategoryParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "getList",
        "old_function": "@ApiOperation(\"分页查询商品分类\")\n    @RequestMapping(value = \"/list/{parentId}\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object getList(@PathVariable Long parentId,\n                          @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize,\n                          @RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum) {\n        List<PmsProductCategory> productCategoryList = productCategoryService.getList(parentId, pageSize, pageNum);\n        return new CommonResult().pageSuccess(productCategoryList);\n    }",
        "new_function": "@ApiOperation(\"分页查询商品分类\")\n    @RequestMapping(value = \"/list/{parentId}\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:read')\")\n    public Object getList(@PathVariable Long parentId,\n                          @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize,\n                          @RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum) {\n        List<PmsProductCategory> productCategoryList = productCategoryService.getList(parentId, pageSize, pageNum);\n        return new CommonResult().pageSuccess(productCategoryList);\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "getItem",
        "old_function": "@ApiOperation(\"根据id获取商品分类\")\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object getItem(@PathVariable Long id) {\n        PmsProductCategory productCategory = productCategoryService.getItem(id);\n        return new CommonResult().success(productCategory);\n    }",
        "new_function": "@ApiOperation(\"根据id获取商品分类\")\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:read')\")\n    public Object getItem(@PathVariable Long id) {\n        PmsProductCategory productCategory = productCategoryService.getItem(id);\n        return new CommonResult().success(productCategory);\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "delete",
        "old_function": "@ApiOperation(\"删除商品分类\")\n    @RequestMapping(value = \"/delete/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object delete(@PathVariable Long id) {\n        int count = productCategoryService.delete(id);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"删除商品分类\")\n    @RequestMapping(value = \"/delete/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:delete')\")\n    public Object delete(@PathVariable Long id) {\n        int count = productCategoryService.delete(id);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "updateNavStatus",
        "old_function": "@ApiOperation(\"修改导航栏显示状态\")\n    @RequestMapping(value = \"/update/navStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateNavStatus(@RequestParam(\"ids\") List<Long> ids, @RequestParam(\"navStatus\") Integer navStatus) {\n        int count = productCategoryService.updateNavStatus(ids, navStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"修改导航栏显示状态\")\n    @RequestMapping(value = \"/update/navStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:update')\")\n    public Object updateNavStatus(@RequestParam(\"ids\") List<Long> ids, @RequestParam(\"navStatus\") Integer navStatus) {\n        int count = productCategoryService.updateNavStatus(ids, navStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "updateShowStatus",
        "old_function": "@ApiOperation(\"修改显示状态\")\n    @RequestMapping(value = \"/update/showStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateShowStatus(@RequestParam(\"ids\") List<Long> ids, @RequestParam(\"showStatus\") Integer showStatus) {\n        int count = productCategoryService.updateShowStatus(ids, showStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"修改显示状态\")\n    @RequestMapping(value = \"/update/showStatus\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:update')\")\n    public Object updateShowStatus(@RequestParam(\"ids\") List<Long> ids, @RequestParam(\"showStatus\") Integer showStatus) {\n        int count = productCategoryService.updateShowStatus(ids, showStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductCategoryController.java",
        "method_name": "listWithChildren",
        "old_function": "@ApiOperation(\"查询所有一级分类及子分类\")\n    @RequestMapping(value = \"/list/withChildren\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object listWithChildren() {\n        List<PmsProductCategoryWithChildrenItem> list = productCategoryService.listWithChildren();\n        return new CommonResult().success(list);\n    }",
        "new_function": "@ApiOperation(\"查询所有一级分类及子分类\")\n    @RequestMapping(value = \"/list/withChildren\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:productCategory:read')\")\n    public Object listWithChildren() {\n        List<PmsProductCategoryWithChildrenItem> list = productCategoryService.listWithChildren();\n        return new CommonResult().success(list);\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "create",
        "old_function": "@ApiOperation(\"创建商品\")\n    @RequestMapping(value = \"/create\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object create(@RequestBody PmsProductParam productParam, BindingResult bindingResult) {\n        int count = productService.create(productParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"创建商品\")\n    @RequestMapping(value = \"/create\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:create')\")\n    public Object create(@RequestBody PmsProductParam productParam, BindingResult bindingResult) {\n        int count = productService.create(productParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "getUpdateInfo",
        "old_function": "@ApiOperation(\"根据商品id获取商品编辑信息\")\n    @RequestMapping(value = \"/updateInfo/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object getUpdateInfo(@PathVariable Long id) {\n        PmsProductResult productResult = productService.getUpdateInfo(id);\n        return new CommonResult().success(productResult);\n    }",
        "new_function": "@ApiOperation(\"根据商品id获取商品编辑信息\")\n    @RequestMapping(value = \"/updateInfo/{id}\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:read')\")\n    public Object getUpdateInfo(@PathVariable Long id) {\n        PmsProductResult productResult = productService.getUpdateInfo(id);\n        return new CommonResult().success(productResult);\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "update",
        "old_function": "@ApiOperation(\"更新商品\")\n    @RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    public Object update(@PathVariable Long id, @RequestBody PmsProductParam productParam, BindingResult bindingResult) {\n        int count = productService.update(id, productParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"更新商品\")\n    @RequestMapping(value = \"/update/{id}\", method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:update')\")\n    public Object update(@PathVariable Long id, @RequestBody PmsProductParam productParam, BindingResult bindingResult) {\n        int count = productService.update(id, productParam);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "getList",
        "old_function": "@ApiOperation(\"查询商品\")\n    @RequestMapping(value = \"/list\", method = RequestMethod.GET)\n    @ResponseBody\n    public Object getList(PmsProductQueryParam productQueryParam,\n                       @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize,\n                       @RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum) {\n        List<PmsProduct> productList = productService.list(productQueryParam, pageSize, pageNum);\n        return new CommonResult().pageSuccess(productList);\n    }",
        "new_function": "@ApiOperation(\"查询商品\")\n    @RequestMapping(value = \"/list\", method = RequestMethod.GET)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:read')\")\n    public Object getList(PmsProductQueryParam productQueryParam,\n                       @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize,\n                       @RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum) {\n        List<PmsProduct> productList = productService.list(productQueryParam, pageSize, pageNum);\n        return new CommonResult().pageSuccess(productList);\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "updateVerifyStatus",
        "old_function": "@ApiOperation(\"批量修改审核状态\")\n    @RequestMapping(value = \"/update/verifyStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateVerifyStatus(@RequestParam(\"ids\") List<Long> ids,\n                                     @RequestParam(\"verifyStatus\") Integer verifyStatus,\n                                     @RequestParam(\"detail\") String detail) {\n        int count = productService.updateVerifyStatus(ids, verifyStatus, detail);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"批量修改审核状态\")\n    @RequestMapping(value = \"/update/verifyStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:update')\")\n    public Object updateVerifyStatus(@RequestParam(\"ids\") List<Long> ids,\n                                     @RequestParam(\"verifyStatus\") Integer verifyStatus,\n                                     @RequestParam(\"detail\") String detail) {\n        int count = productService.updateVerifyStatus(ids, verifyStatus, detail);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "updatePublishStatus",
        "old_function": "@ApiOperation(\"批量上下架\")\n    @RequestMapping(value = \"/update/publishStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    public Object updatePublishStatus(@RequestParam(\"ids\") List<Long> ids,\n                                     @RequestParam(\"publishStatus\") Integer publishStatus) {\n        int count = productService.updatePublishStatus(ids, publishStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"批量上下架\")\n    @RequestMapping(value = \"/update/publishStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:update')\")\n    public Object updatePublishStatus(@RequestParam(\"ids\") List<Long> ids,\n                                     @RequestParam(\"publishStatus\") Integer publishStatus) {\n        int count = productService.updatePublishStatus(ids, publishStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "updateRecommendStatus",
        "old_function": "@ApiOperation(\"批量推荐商品\")\n    @RequestMapping(value = \"/update/recommendStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateRecommendStatus(@RequestParam(\"ids\") List<Long> ids,\n                                      @RequestParam(\"recommendStatus\") Integer recommendStatus) {\n        int count = productService.updateRecommendStatus(ids, recommendStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"批量推荐商品\")\n    @RequestMapping(value = \"/update/recommendStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:update')\")\n    public Object updateRecommendStatus(@RequestParam(\"ids\") List<Long> ids,\n                                      @RequestParam(\"recommendStatus\") Integer recommendStatus) {\n        int count = productService.updateRecommendStatus(ids, recommendStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "updateNewStatus",
        "old_function": "@ApiOperation(\"批量设为新品\")\n    @RequestMapping(value = \"/update/newStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateNewStatus(@RequestParam(\"ids\") List<Long> ids,\n                                        @RequestParam(\"newStatus\") Integer newStatus) {\n        int count = productService.updateNewStatus(ids, newStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"批量设为新品\")\n    @RequestMapping(value = \"/update/newStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:update')\")\n    public Object updateNewStatus(@RequestParam(\"ids\") List<Long> ids,\n                                        @RequestParam(\"newStatus\") Integer newStatus) {\n        int count = productService.updateNewStatus(ids, newStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "mall-admin/src/main/java/com/macro/mall/controller/PmsProductController.java",
        "method_name": "updateDeleteStatus",
        "old_function": "@ApiOperation(\"批量修改删除状态\")\n    @RequestMapping(value = \"/update/deleteStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    public Object updateDeleteStatus(@RequestParam(\"ids\") List<Long> ids,\n                                  @RequestParam(\"deleteStatus\") Integer deleteStatus) {\n        int count = productService.updateDeleteStatus(ids, deleteStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "new_function": "@ApiOperation(\"批量修改删除状态\")\n    @RequestMapping(value = \"/update/deleteStatus\",method = RequestMethod.POST)\n    @ResponseBody\n    @PreAuthorize(\"hasAuthority('pms:product:delete')\")\n    public Object updateDeleteStatus(@RequestParam(\"ids\") List<Long> ids,\n                                  @RequestParam(\"deleteStatus\") Integer deleteStatus) {\n        int count = productService.updateDeleteStatus(ids, deleteStatus);\n        if (count > 0) {\n            return new CommonResult().success(count);\n        } else {\n            return new CommonResult().failed();\n        }\n    }",
        "commit": "2d6521c8611b4f3704d69d8943e1214e5c75b660",
        "project_name": "mall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxAddressController.java",
        "method_name": "save",
        "old_function": "@PostMapping(\"save\")\n\tpublic Object save(@LoginUser Integer userId, @RequestBody LitemallAddress address) {\n\t\tif (userId == null) {\n\t\t\treturn ResponseUtil.unlogin();\n\t\t}\n\t\tObject error = validate(address);\n\t\tif (error != null) {\n\t\t\treturn error;\n\t\t}\n\n\t\tif (address.getIsDefault()) {\n\t\t\t// 重置其他收货地址的默认选项\n\t\t\taddressService.resetDefault(userId);\n\t\t}\n\n\t\tif (address.getId() == null || address.getId().equals(0)) {\n\t\t\taddress.setId(null);\n\t\t\taddress.setUserId(userId);\n\t\t\taddressService.add(address);\n\t\t} else {\n\t\t\taddress.setUserId(userId);\n\t\t\tif (addressService.update(address) == 0) {\n\t\t\t\treturn ResponseUtil.updatedDataFailed();\n\t\t\t}\n\t\t}\n\t\treturn ResponseUtil.ok(address.getId());\n\t}",
        "new_function": "@PostMapping(\"save\")\n\tpublic Object save(@LoginUser Integer userId, @RequestBody LitemallAddress address) {\n\t\tif (userId == null) {\n\t\t\treturn ResponseUtil.unlogin();\n\t\t}\n\t\tObject error = validate(address);\n\t\tif (error != null) {\n\t\t\treturn error;\n\t\t}\n\n\t\tif (address.getId() == null || address.getId().equals(0)) {\n\t\t\tif (address.getIsDefault()) {\n\t\t\t\t// 重置其他收货地址的默认选项\n\t\t\t\taddressService.resetDefault(userId);\n\t\t\t}\n\n\t\t\taddress.setId(null);\n\t\t\taddress.setUserId(userId);\n\t\t\taddressService.add(address);\n\t\t} else {\n\t\t\tLitemallAddress litemallAddress = addressService.query(userId, address.getId());\n\t\t\tif (litemallAddress == null) {\n\t\t\t\treturn ResponseUtil.badArgumentValue();\n\t\t\t}\n\n\t\t\tif (address.getIsDefault()) {\n\t\t\t\t// 重置其他收货地址的默认选项\n\t\t\t\taddressService.resetDefault(userId);\n\t\t\t}\n\n\t\t\taddress.setUserId(userId);\n\t\t\taddressService.update(address);\n\t\t}\n\t\treturn ResponseUtil.ok(address.getId());\n\t}",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxAddressController.java",
        "method_name": "delete",
        "old_function": "@PostMapping(\"delete\")\n\tpublic Object delete(@LoginUser Integer userId, @RequestBody LitemallAddress address) {\n\t\tif (userId == null) {\n\t\t\treturn ResponseUtil.unlogin();\n\t\t}\n\t\tInteger id = address.getId();\n\t\tif (id == null) {\n\t\t\treturn ResponseUtil.badArgument();\n\t\t}\n\n\t\taddressService.delete(userId, id);\n\t\treturn ResponseUtil.ok();\n\t}",
        "new_function": "@PostMapping(\"delete\")\n\tpublic Object delete(@LoginUser Integer userId, @RequestBody LitemallAddress address) {\n\t\tif (userId == null) {\n\t\t\treturn ResponseUtil.unlogin();\n\t\t}\n\t\tInteger id = address.getId();\n\t\tif (id == null) {\n\t\t\treturn ResponseUtil.badArgument();\n\t\t}\n\t\tLitemallAddress litemallAddress = addressService.query(userId, id);\n\t\tif (litemallAddress == null) {\n\t\t\treturn ResponseUtil.badArgumentValue();\n\t\t}\n\n\t\taddressService.delete(id);\n\t\treturn ResponseUtil.ok();\n\t}",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxAftersaleController.java",
        "method_name": "detail",
        "old_function": "@GetMapping(\"detail\")\n    public Object detail(@LoginUser Integer userId, @NotNull Integer orderId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        LitemallOrder order = orderService.findById(userId, orderId);\n        List<LitemallOrderGoods> orderGoodsList = orderGoodsService.queryByOid(orderId);\n        LitemallAftersale aftersale = aftersaleService.findByOrderId(userId, orderId);\n\n        Map<String, Object> data = new HashMap<String, Object>();\n        data.put(\"aftersale\", aftersale);\n        data.put(\"order\", order);\n        data.put(\"orderGoods\", orderGoodsList);\n        return ResponseUtil.ok(data);\n    }",
        "new_function": "@GetMapping(\"detail\")\n    public Object detail(@LoginUser Integer userId, @NotNull Integer orderId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        LitemallOrder order = orderService.findById(userId, orderId);\n        if (order == null){\n            return ResponseUtil.badArgumentValue();\n        }\n        List<LitemallOrderGoods> orderGoodsList = orderGoodsService.queryByOid(orderId);\n        LitemallAftersale aftersale = aftersaleService.findByOrderId(userId, orderId);\n\n        Map<String, Object> data = new HashMap<String, Object>();\n        data.put(\"aftersale\", aftersale);\n        data.put(\"order\", order);\n        data.put(\"orderGoods\", orderGoodsList);\n        return ResponseUtil.ok(data);\n    }",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxCartController.java",
        "method_name": "update",
        "old_function": "@PostMapping(\"update\")\n    public Object update(@LoginUser Integer userId, @RequestBody LitemallCart cart) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n        if (cart == null) {\n            return ResponseUtil.badArgument();\n        }\n        Integer productId = cart.getProductId();\n        Integer number = cart.getNumber().intValue();\n        Integer goodsId = cart.getGoodsId();\n        Integer id = cart.getId();\n        if (!ObjectUtils.allNotNull(id, productId, number, goodsId)) {\n            return ResponseUtil.badArgument();\n        }\n        if(number <= 0){\n            return ResponseUtil.badArgument();\n        }\n\n        //判断是否存在该订单\n        // 如果不存在，直接返回错误\n        LitemallCart existCart = cartService.findById(id);\n        if (existCart == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        // 判断goodsId和productId是否与当前cart里的值一致\n        if (!existCart.getGoodsId().equals(goodsId)) {\n            return ResponseUtil.badArgumentValue();\n        }\n        if (!existCart.getProductId().equals(productId)) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        //判断商品是否可以购买\n        LitemallGoods goods = goodsService.findById(goodsId);\n        if (goods == null || !goods.getIsOnSale()) {\n            return ResponseUtil.fail(GOODS_UNSHELVE, \"商品已下架\");\n        }\n\n        //取得规格的信息,判断规格库存\n        LitemallGoodsProduct product = productService.findById(productId);\n        if (product == null || product.getNumber() < number) {\n            return ResponseUtil.fail(GOODS_UNSHELVE, \"库存不足\");\n        }\n\n        existCart.setNumber(number.shortValue());\n        if (cartService.updateById(existCart) == 0) {\n            return ResponseUtil.updatedDataFailed();\n        }\n        return ResponseUtil.ok();\n    }",
        "new_function": "@PostMapping(\"update\")\n    public Object update(@LoginUser Integer userId, @RequestBody LitemallCart cart) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n        Integer productId = cart.getProductId();\n        Integer number = cart.getNumber().intValue();\n        Integer goodsId = cart.getGoodsId();\n        Integer id = cart.getId();\n        if (!ObjectUtils.allNotNull(id, productId, number, goodsId)) {\n            return ResponseUtil.badArgument();\n        }\n        if(number <= 0){\n            return ResponseUtil.badArgument();\n        }\n\n        //判断是否存在该订单\n        // 如果不存在，直接返回错误\n        LitemallCart existCart = cartService.findById(userId, id);\n        if (existCart == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        // 判断goodsId和productId是否与当前cart里的值一致\n        if (!existCart.getGoodsId().equals(goodsId)) {\n            return ResponseUtil.badArgumentValue();\n        }\n        if (!existCart.getProductId().equals(productId)) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        //判断商品是否可以购买\n        LitemallGoods goods = goodsService.findById(goodsId);\n        if (goods == null || !goods.getIsOnSale()) {\n            return ResponseUtil.fail(GOODS_UNSHELVE, \"商品已下架\");\n        }\n\n        //取得规格的信息,判断规格库存\n        LitemallGoodsProduct product = productService.findById(productId);\n        if (product == null || product.getNumber() < number) {\n            return ResponseUtil.fail(GOODS_UNSHELVE, \"库存不足\");\n        }\n\n        existCart.setNumber(number.shortValue());\n        if (cartService.updateById(existCart) == 0) {\n            return ResponseUtil.updatedDataFailed();\n        }\n        return ResponseUtil.ok();\n    }",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxCartController.java",
        "method_name": "checkout",
        "old_function": "@GetMapping(\"checkout\")\n    public Object checkout(@LoginUser Integer userId, Integer cartId, Integer addressId, Integer couponId, Integer userCouponId, Integer grouponRulesId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        // 收货地址\n        LitemallAddress checkedAddress = null;\n        if (addressId == null || addressId.equals(0)) {\n            checkedAddress = addressService.findDefault(userId);\n            // 如果仍然没有地址，则是没有收货地址\n            // 返回一个空的地址id=0，这样前端则会提醒添加地址\n            if (checkedAddress == null) {\n                checkedAddress = new LitemallAddress();\n                checkedAddress.setId(0);\n                addressId = 0;\n            } else {\n                addressId = checkedAddress.getId();\n            }\n\n        } else {\n            checkedAddress = addressService.query(userId, addressId);\n            // 如果null, 则报错\n            if (checkedAddress == null) {\n                return ResponseUtil.badArgumentValue();\n            }\n        }\n\n        // 团购优惠\n        BigDecimal grouponPrice = new BigDecimal(0.00);\n        LitemallGrouponRules grouponRules = grouponRulesService.findById(grouponRulesId);\n        if (grouponRules != null) {\n            grouponPrice = grouponRules.getDiscount();\n        }\n\n        // 商品价格\n        List<LitemallCart> checkedGoodsList = null;\n        if (cartId == null || cartId.equals(0)) {\n            checkedGoodsList = cartService.queryByUidAndChecked(userId);\n        } else {\n            LitemallCart cart = cartService.findById(cartId);\n            if (cart == null) {\n                return ResponseUtil.badArgumentValue();\n            }\n            checkedGoodsList = new ArrayList<>(1);\n            checkedGoodsList.add(cart);\n        }\n        BigDecimal checkedGoodsPrice = new BigDecimal(0.00);\n        for (LitemallCart cart : checkedGoodsList) {\n            //  只有当团购规格商品ID符合才进行团购优惠\n            if (grouponRules != null && grouponRules.getGoodsId().equals(cart.getGoodsId())) {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().subtract(grouponPrice).multiply(new BigDecimal(cart.getNumber())));\n            } else {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().multiply(new BigDecimal(cart.getNumber())));\n            }\n        }\n\n        // 计算优惠券可用情况\n        BigDecimal tmpCouponPrice = new BigDecimal(0.00);\n        Integer tmpCouponId = 0;\n        Integer tmpUserCouponId = 0;\n        int tmpCouponLength = 0;\n        List<LitemallCouponUser> couponUserList = couponUserService.queryAll(userId);\n        for(LitemallCouponUser couponUser : couponUserList){\n            tmpUserCouponId = couponUser.getId();\n            LitemallCoupon coupon = couponVerifyService.checkCoupon(userId, couponUser.getCouponId(), tmpUserCouponId, checkedGoodsPrice);\n            if(coupon == null){\n                continue;\n            }\n\n            tmpCouponLength++;\n            if(tmpCouponPrice.compareTo(coupon.getDiscount()) == -1){\n                tmpCouponPrice = coupon.getDiscount();\n                tmpCouponId = coupon.getId();\n            }\n        }\n        // 获取优惠券减免金额，优惠券可用数量\n        int availableCouponLength = tmpCouponLength;\n        BigDecimal couponPrice = new BigDecimal(0);\n        // 这里存在三种情况\n        // 1. 用户不想使用优惠券，则不处理\n        // 2. 用户想自动使用优惠券，则选择合适优惠券\n        // 3. 用户已选择优惠券，则测试优惠券是否合适\n        if (couponId == null || couponId.equals(-1)){\n            couponId = -1;\n            userCouponId = -1;\n        }\n        else if (couponId.equals(0)) {\n            couponPrice = tmpCouponPrice;\n            couponId = tmpCouponId;\n            userCouponId = tmpUserCouponId;\n        }\n        else {\n            LitemallCoupon coupon = couponVerifyService.checkCoupon(userId, couponId, userCouponId, checkedGoodsPrice);\n            // 用户选择的优惠券有问题，则选择合适优惠券，否则使用用户选择的优惠券\n            if(coupon == null){\n                couponPrice = tmpCouponPrice;\n                couponId = tmpCouponId;\n                userCouponId = tmpUserCouponId;\n            }\n            else {\n                couponPrice = coupon.getDiscount();\n            }\n        }\n\n        // 根据订单商品总价计算运费，满88则免运费，否则8元；\n        BigDecimal freightPrice = new BigDecimal(0.00);\n        if (checkedGoodsPrice.compareTo(SystemConfig.getFreightLimit()) < 0) {\n            freightPrice = SystemConfig.getFreight();\n        }\n\n        // 可以使用的其他钱，例如用户积分\n        BigDecimal integralPrice = new BigDecimal(0.00);\n\n        // 订单费用\n        BigDecimal orderTotalPrice = checkedGoodsPrice.add(freightPrice).subtract(couponPrice).max(new BigDecimal(0.00));\n\n        BigDecimal actualPrice = orderTotalPrice.subtract(integralPrice);\n\n        Map<String, Object> data = new HashMap<>();\n        data.put(\"addressId\", addressId);\n        data.put(\"couponId\", couponId);\n        data.put(\"userCouponId\", userCouponId);\n        data.put(\"cartId\", cartId);\n        data.put(\"grouponRulesId\", grouponRulesId);\n        data.put(\"grouponPrice\", grouponPrice);\n        data.put(\"checkedAddress\", checkedAddress);\n        data.put(\"availableCouponLength\", availableCouponLength);\n        data.put(\"goodsTotalPrice\", checkedGoodsPrice);\n        data.put(\"freightPrice\", freightPrice);\n        data.put(\"couponPrice\", couponPrice);\n        data.put(\"orderTotalPrice\", orderTotalPrice);\n        data.put(\"actualPrice\", actualPrice);\n        data.put(\"checkedGoodsList\", checkedGoodsList);\n        return ResponseUtil.ok(data);\n    }",
        "new_function": "@GetMapping(\"checkout\")\n    public Object checkout(@LoginUser Integer userId, Integer cartId, Integer addressId, Integer couponId, Integer userCouponId, Integer grouponRulesId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        // 收货地址\n        LitemallAddress checkedAddress = null;\n        if (addressId == null || addressId.equals(0)) {\n            checkedAddress = addressService.findDefault(userId);\n            // 如果仍然没有地址，则是没有收货地址\n            // 返回一个空的地址id=0，这样前端则会提醒添加地址\n            if (checkedAddress == null) {\n                checkedAddress = new LitemallAddress();\n                checkedAddress.setId(0);\n                addressId = 0;\n            } else {\n                addressId = checkedAddress.getId();\n            }\n\n        } else {\n            checkedAddress = addressService.query(userId, addressId);\n            // 如果null, 则报错\n            if (checkedAddress == null) {\n                return ResponseUtil.badArgumentValue();\n            }\n        }\n\n        // 团购优惠\n        BigDecimal grouponPrice = new BigDecimal(0.00);\n        LitemallGrouponRules grouponRules = grouponRulesService.findById(grouponRulesId);\n        if (grouponRules != null) {\n            grouponPrice = grouponRules.getDiscount();\n        }\n\n        // 商品价格\n        List<LitemallCart> checkedGoodsList = null;\n        if (cartId == null || cartId.equals(0)) {\n            checkedGoodsList = cartService.queryByUidAndChecked(userId);\n        } else {\n            LitemallCart cart = cartService.findById(userId, cartId);\n            if (cart == null) {\n                return ResponseUtil.badArgumentValue();\n            }\n            checkedGoodsList = new ArrayList<>(1);\n            checkedGoodsList.add(cart);\n        }\n        BigDecimal checkedGoodsPrice = new BigDecimal(0.00);\n        for (LitemallCart cart : checkedGoodsList) {\n            //  只有当团购规格商品ID符合才进行团购优惠\n            if (grouponRules != null && grouponRules.getGoodsId().equals(cart.getGoodsId())) {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().subtract(grouponPrice).multiply(new BigDecimal(cart.getNumber())));\n            } else {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().multiply(new BigDecimal(cart.getNumber())));\n            }\n        }\n\n        // 计算优惠券可用情况\n        BigDecimal tmpCouponPrice = new BigDecimal(0.00);\n        Integer tmpCouponId = 0;\n        Integer tmpUserCouponId = 0;\n        int tmpCouponLength = 0;\n        List<LitemallCouponUser> couponUserList = couponUserService.queryAll(userId);\n        for(LitemallCouponUser couponUser : couponUserList){\n            tmpUserCouponId = couponUser.getId();\n            LitemallCoupon coupon = couponVerifyService.checkCoupon(userId, couponUser.getCouponId(), tmpUserCouponId, checkedGoodsPrice);\n            if(coupon == null){\n                continue;\n            }\n\n            tmpCouponLength++;\n            if(tmpCouponPrice.compareTo(coupon.getDiscount()) == -1){\n                tmpCouponPrice = coupon.getDiscount();\n                tmpCouponId = coupon.getId();\n            }\n        }\n        // 获取优惠券减免金额，优惠券可用数量\n        int availableCouponLength = tmpCouponLength;\n        BigDecimal couponPrice = new BigDecimal(0);\n        // 这里存在三种情况\n        // 1. 用户不想使用优惠券，则不处理\n        // 2. 用户想自动使用优惠券，则选择合适优惠券\n        // 3. 用户已选择优惠券，则测试优惠券是否合适\n        if (couponId == null || couponId.equals(-1)){\n            couponId = -1;\n            userCouponId = -1;\n        }\n        else if (couponId.equals(0)) {\n            couponPrice = tmpCouponPrice;\n            couponId = tmpCouponId;\n            userCouponId = tmpUserCouponId;\n        }\n        else {\n            LitemallCoupon coupon = couponVerifyService.checkCoupon(userId, couponId, userCouponId, checkedGoodsPrice);\n            // 用户选择的优惠券有问题，则选择合适优惠券，否则使用用户选择的优惠券\n            if(coupon == null){\n                couponPrice = tmpCouponPrice;\n                couponId = tmpCouponId;\n                userCouponId = tmpUserCouponId;\n            }\n            else {\n                couponPrice = coupon.getDiscount();\n            }\n        }\n\n        // 根据订单商品总价计算运费，满88则免运费，否则8元；\n        BigDecimal freightPrice = new BigDecimal(0.00);\n        if (checkedGoodsPrice.compareTo(SystemConfig.getFreightLimit()) < 0) {\n            freightPrice = SystemConfig.getFreight();\n        }\n\n        // 可以使用的其他钱，例如用户积分\n        BigDecimal integralPrice = new BigDecimal(0.00);\n\n        // 订单费用\n        BigDecimal orderTotalPrice = checkedGoodsPrice.add(freightPrice).subtract(couponPrice).max(new BigDecimal(0.00));\n\n        BigDecimal actualPrice = orderTotalPrice.subtract(integralPrice);\n\n        Map<String, Object> data = new HashMap<>();\n        data.put(\"addressId\", addressId);\n        data.put(\"couponId\", couponId);\n        data.put(\"userCouponId\", userCouponId);\n        data.put(\"cartId\", cartId);\n        data.put(\"grouponRulesId\", grouponRulesId);\n        data.put(\"grouponPrice\", grouponPrice);\n        data.put(\"checkedAddress\", checkedAddress);\n        data.put(\"availableCouponLength\", availableCouponLength);\n        data.put(\"goodsTotalPrice\", checkedGoodsPrice);\n        data.put(\"freightPrice\", freightPrice);\n        data.put(\"couponPrice\", couponPrice);\n        data.put(\"orderTotalPrice\", orderTotalPrice);\n        data.put(\"actualPrice\", actualPrice);\n        data.put(\"checkedGoodsList\", checkedGoodsList);\n        return ResponseUtil.ok(data);\n    }",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxCouponController.java",
        "method_name": "selectlist",
        "old_function": "@GetMapping(\"selectlist\")\n    public Object selectlist(@LoginUser Integer userId, Integer cartId, Integer grouponRulesId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        // 团购优惠\n        BigDecimal grouponPrice = new BigDecimal(0.00);\n        LitemallGrouponRules grouponRules = grouponRulesService.findById(grouponRulesId);\n        if (grouponRules != null) {\n            grouponPrice = grouponRules.getDiscount();\n        }\n\n        // 商品价格\n        List<LitemallCart> checkedGoodsList = null;\n        if (cartId == null || cartId.equals(0)) {\n            checkedGoodsList = cartService.queryByUidAndChecked(userId);\n        } else {\n            LitemallCart cart = cartService.findById(cartId);\n            if (cart == null) {\n                return ResponseUtil.badArgumentValue();\n            }\n            checkedGoodsList = new ArrayList<>(1);\n            checkedGoodsList.add(cart);\n        }\n        BigDecimal checkedGoodsPrice = new BigDecimal(0.00);\n        for (LitemallCart cart : checkedGoodsList) {\n            //  只有当团购规格商品ID符合才进行团购优惠\n            if (grouponRules != null && grouponRules.getGoodsId().equals(cart.getGoodsId())) {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().subtract(grouponPrice).multiply(new BigDecimal(cart.getNumber())));\n            } else {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().multiply(new BigDecimal(cart.getNumber())));\n            }\n        }\n\n        // 计算优惠券可用情况\n        List<LitemallCouponUser> couponUserList = couponUserService.queryAll(userId);\n        List<CouponVo> couponVoList = change(couponUserList);\n        for (CouponVo cv : couponVoList) {\n            LitemallCoupon coupon = couponVerifyService.checkCoupon(userId, cv.getCid(), cv.getId(), checkedGoodsPrice);\n            cv.setAvailable(coupon != null);\n        }\n\n        return ResponseUtil.okList(couponVoList);\n    }",
        "new_function": "@GetMapping(\"selectlist\")\n    public Object selectlist(@LoginUser Integer userId, Integer cartId, Integer grouponRulesId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        // 团购优惠\n        BigDecimal grouponPrice = new BigDecimal(0.00);\n        LitemallGrouponRules grouponRules = grouponRulesService.findById(grouponRulesId);\n        if (grouponRules != null) {\n            grouponPrice = grouponRules.getDiscount();\n        }\n\n        // 商品价格\n        List<LitemallCart> checkedGoodsList = null;\n        if (cartId == null || cartId.equals(0)) {\n            checkedGoodsList = cartService.queryByUidAndChecked(userId);\n        } else {\n            LitemallCart cart = cartService.findById(userId, cartId);\n            if (cart == null) {\n                return ResponseUtil.badArgumentValue();\n            }\n            checkedGoodsList = new ArrayList<>(1);\n            checkedGoodsList.add(cart);\n        }\n        BigDecimal checkedGoodsPrice = new BigDecimal(0.00);\n        for (LitemallCart cart : checkedGoodsList) {\n            //  只有当团购规格商品ID符合才进行团购优惠\n            if (grouponRules != null && grouponRules.getGoodsId().equals(cart.getGoodsId())) {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().subtract(grouponPrice).multiply(new BigDecimal(cart.getNumber())));\n            } else {\n                checkedGoodsPrice = checkedGoodsPrice.add(cart.getPrice().multiply(new BigDecimal(cart.getNumber())));\n            }\n        }\n\n        // 计算优惠券可用情况\n        List<LitemallCouponUser> couponUserList = couponUserService.queryAll(userId);\n        List<CouponVo> couponVoList = change(couponUserList);\n        for (CouponVo cv : couponVoList) {\n            LitemallCoupon coupon = couponVerifyService.checkCoupon(userId, cv.getCid(), cv.getId(), checkedGoodsPrice);\n            cv.setAvailable(coupon != null);\n        }\n\n        return ResponseUtil.okList(couponVoList);\n    }",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxFootprintController.java",
        "method_name": "delete",
        "old_function": "@PostMapping(\"delete\")\n    public Object delete(@LoginUser Integer userId, @RequestBody String body) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n        if (body == null) {\n            return ResponseUtil.badArgument();\n        }\n\n        Integer footprintId = JacksonUtil.parseInteger(body, \"id\");\n        if (footprintId == null) {\n            return ResponseUtil.badArgument();\n        }\n        LitemallFootprint footprint = footprintService.findById(footprintId);\n\n        if (footprint == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n        if (!footprint.getUserId().equals(userId)) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        footprintService.deleteById(footprintId);\n        return ResponseUtil.ok();\n    }",
        "new_function": "@PostMapping(\"delete\")\n    public Object delete(@LoginUser Integer userId, @RequestBody String body) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n        if (body == null) {\n            return ResponseUtil.badArgument();\n        }\n\n        Integer footprintId = JacksonUtil.parseInteger(body, \"id\");\n        if (footprintId == null) {\n            return ResponseUtil.badArgument();\n        }\n        LitemallFootprint footprint = footprintService.findById(userId, footprintId);\n\n        if (footprint == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n        if (!footprint.getUserId().equals(userId)) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        footprintService.deleteById(footprintId);\n        return ResponseUtil.ok();\n    }",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "litemall-wx-api/src/main/java/org/linlinjava/litemall/wx/web/WxGrouponController.java",
        "method_name": "detail",
        "old_function": "@GetMapping(\"detail\")\n    public Object detail(@LoginUser Integer userId, @NotNull Integer grouponId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        LitemallGroupon groupon = grouponService.queryById(grouponId);\n        if (groupon == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        LitemallGrouponRules rules = rulesService.findById(groupon.getRulesId());\n        if (rules == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        // 订单信息\n        LitemallOrder order = orderService.findById(userId, groupon.getOrderId());\n        if (null == order) {\n            return ResponseUtil.fail(ORDER_UNKNOWN, \"订单不存在\");\n        }\n        if (!order.getUserId().equals(userId)) {\n            return ResponseUtil.fail(ORDER_INVALID, \"不是当前用户的订单\");\n        }\n        Map<String, Object> orderVo = new HashMap<String, Object>();\n        orderVo.put(\"id\", order.getId());\n        orderVo.put(\"orderSn\", order.getOrderSn());\n        orderVo.put(\"addTime\", order.getAddTime());\n        orderVo.put(\"consignee\", order.getConsignee());\n        orderVo.put(\"mobile\", order.getMobile());\n        orderVo.put(\"address\", order.getAddress());\n        orderVo.put(\"goodsPrice\", order.getGoodsPrice());\n        orderVo.put(\"freightPrice\", order.getFreightPrice());\n        orderVo.put(\"actualPrice\", order.getActualPrice());\n        orderVo.put(\"orderStatusText\", OrderUtil.orderStatusText(order));\n        orderVo.put(\"handleOption\", OrderUtil.build(order));\n        orderVo.put(\"expCode\", order.getShipChannel());\n        orderVo.put(\"expNo\", order.getShipSn());\n\n        List<LitemallOrderGoods> orderGoodsList = orderGoodsService.queryByOid(order.getId());\n        List<Map<String, Object>> orderGoodsVoList = new ArrayList<>(orderGoodsList.size());\n        for (LitemallOrderGoods orderGoods : orderGoodsList) {\n            Map<String, Object> orderGoodsVo = new HashMap<>();\n            orderGoodsVo.put(\"id\", orderGoods.getId());\n            orderGoodsVo.put(\"orderId\", orderGoods.getOrderId());\n            orderGoodsVo.put(\"goodsId\", orderGoods.getGoodsId());\n            orderGoodsVo.put(\"goodsName\", orderGoods.getGoodsName());\n            orderGoodsVo.put(\"number\", orderGoods.getNumber());\n            orderGoodsVo.put(\"retailPrice\", orderGoods.getPrice());\n            orderGoodsVo.put(\"picUrl\", orderGoods.getPicUrl());\n            orderGoodsVo.put(\"goodsSpecificationValues\", orderGoods.getSpecifications());\n            orderGoodsVoList.add(orderGoodsVo);\n        }\n\n        Map<String, Object> result = new HashMap<>();\n        result.put(\"orderInfo\", orderVo);\n        result.put(\"orderGoods\", orderGoodsVoList);\n\n        // 订单状态为已发货且物流信息不为空\n        //\"YTO\", \"800669400640887922\"\n        if (order.getOrderStatus().equals(OrderUtil.STATUS_SHIP)) {\n            ExpressInfo ei = expressService.getExpressInfo(order.getShipChannel(), order.getShipSn());\n            result.put(\"expressInfo\", ei);\n        }\n\n        UserVo creator = userService.findUserVoById(groupon.getCreatorUserId());\n        List<UserVo> joiners = new ArrayList<>();\n        joiners.add(creator);\n        int linkGrouponId;\n        // 这是一个团购发起记录\n        if (groupon.getGrouponId() == 0) {\n            linkGrouponId = groupon.getId();\n        } else {\n            linkGrouponId = groupon.getGrouponId();\n\n        }\n        List<LitemallGroupon> groupons = grouponService.queryJoinRecord(linkGrouponId);\n\n        UserVo joiner;\n        for (LitemallGroupon grouponItem : groupons) {\n            joiner = userService.findUserVoById(grouponItem.getUserId());\n            joiners.add(joiner);\n        }\n\n        result.put(\"linkGrouponId\", linkGrouponId);\n        result.put(\"creator\", creator);\n        result.put(\"joiners\", joiners);\n        result.put(\"groupon\", groupon);\n        result.put(\"rules\", rules);\n        return ResponseUtil.ok(result);\n    }",
        "new_function": "@GetMapping(\"detail\")\n    public Object detail(@LoginUser Integer userId, @NotNull Integer grouponId) {\n        if (userId == null) {\n            return ResponseUtil.unlogin();\n        }\n\n        LitemallGroupon groupon = grouponService.queryById(userId, grouponId);\n        if (groupon == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        LitemallGrouponRules rules = rulesService.findById(groupon.getRulesId());\n        if (rules == null) {\n            return ResponseUtil.badArgumentValue();\n        }\n\n        // 订单信息\n        LitemallOrder order = orderService.findById(userId, groupon.getOrderId());\n        if (null == order) {\n            return ResponseUtil.fail(ORDER_UNKNOWN, \"订单不存在\");\n        }\n        if (!order.getUserId().equals(userId)) {\n            return ResponseUtil.fail(ORDER_INVALID, \"不是当前用户的订单\");\n        }\n        Map<String, Object> orderVo = new HashMap<String, Object>();\n        orderVo.put(\"id\", order.getId());\n        orderVo.put(\"orderSn\", order.getOrderSn());\n        orderVo.put(\"addTime\", order.getAddTime());\n        orderVo.put(\"consignee\", order.getConsignee());\n        orderVo.put(\"mobile\", order.getMobile());\n        orderVo.put(\"address\", order.getAddress());\n        orderVo.put(\"goodsPrice\", order.getGoodsPrice());\n        orderVo.put(\"freightPrice\", order.getFreightPrice());\n        orderVo.put(\"actualPrice\", order.getActualPrice());\n        orderVo.put(\"orderStatusText\", OrderUtil.orderStatusText(order));\n        orderVo.put(\"handleOption\", OrderUtil.build(order));\n        orderVo.put(\"expCode\", order.getShipChannel());\n        orderVo.put(\"expNo\", order.getShipSn());\n\n        List<LitemallOrderGoods> orderGoodsList = orderGoodsService.queryByOid(order.getId());\n        List<Map<String, Object>> orderGoodsVoList = new ArrayList<>(orderGoodsList.size());\n        for (LitemallOrderGoods orderGoods : orderGoodsList) {\n            Map<String, Object> orderGoodsVo = new HashMap<>();\n            orderGoodsVo.put(\"id\", orderGoods.getId());\n            orderGoodsVo.put(\"orderId\", orderGoods.getOrderId());\n            orderGoodsVo.put(\"goodsId\", orderGoods.getGoodsId());\n            orderGoodsVo.put(\"goodsName\", orderGoods.getGoodsName());\n            orderGoodsVo.put(\"number\", orderGoods.getNumber());\n            orderGoodsVo.put(\"retailPrice\", orderGoods.getPrice());\n            orderGoodsVo.put(\"picUrl\", orderGoods.getPicUrl());\n            orderGoodsVo.put(\"goodsSpecificationValues\", orderGoods.getSpecifications());\n            orderGoodsVoList.add(orderGoodsVo);\n        }\n\n        Map<String, Object> result = new HashMap<>();\n        result.put(\"orderInfo\", orderVo);\n        result.put(\"orderGoods\", orderGoodsVoList);\n\n        // 订单状态为已发货且物流信息不为空\n        //\"YTO\", \"800669400640887922\"\n        if (order.getOrderStatus().equals(OrderUtil.STATUS_SHIP)) {\n            ExpressInfo ei = expressService.getExpressInfo(order.getShipChannel(), order.getShipSn());\n            result.put(\"expressInfo\", ei);\n        }\n\n        UserVo creator = userService.findUserVoById(groupon.getCreatorUserId());\n        List<UserVo> joiners = new ArrayList<>();\n        joiners.add(creator);\n        int linkGrouponId;\n        // 这是一个团购发起记录\n        if (groupon.getGrouponId() == 0) {\n            linkGrouponId = groupon.getId();\n        } else {\n            linkGrouponId = groupon.getGrouponId();\n\n        }\n        List<LitemallGroupon> groupons = grouponService.queryJoinRecord(linkGrouponId);\n\n        UserVo joiner;\n        for (LitemallGroupon grouponItem : groupons) {\n            joiner = userService.findUserVoById(grouponItem.getUserId());\n            joiners.add(joiner);\n        }\n\n        result.put(\"linkGrouponId\", linkGrouponId);\n        result.put(\"creator\", creator);\n        result.put(\"joiners\", joiners);\n        result.put(\"groupon\", groupon);\n        result.put(\"rules\", rules);\n        return ResponseUtil.ok(result);\n    }",
        "commit": "6d35c40efc0015a4b7ca53427bc6e1f1bd8f822f",
        "project_name": "litemall"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysRoleController.java",
        "method_name": "authDataScopeSave",
        "old_function": "/**\n     * 保存角色分配数据权限\n     */\n    @RequiresPermissions(\"system:role:edit\")\n    @Log(title = \"角色管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/authDataScope\")\n    @ResponseBody\n    public AjaxResult authDataScopeSave(SysRole role)\n    {\n        roleService.checkRoleAllowed(role);\n        role.setUpdateBy(getLoginName());\n        if (roleService.authDataScope(role) > 0)\n        {\n            setSysUser(userService.selectUserById(getUserId()));\n            return success();\n        }\n        return error();\n    }",
        "new_function": "/**\n     * 保存角色分配数据权限\n     */\n    @RequiresPermissions(\"system:role:edit\")\n    @Log(title = \"角色管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/authDataScope\")\n    @ResponseBody\n    public AjaxResult authDataScopeSave(SysRole role)\n    {\n        roleService.checkRoleAllowed(role);\n        roleService.checkRoleDataScope(role.getRoleId());\n        role.setUpdateBy(getLoginName());\n        if (roleService.authDataScope(role) > 0)\n        {\n            setSysUser(userService.selectUserById(getUserId()));\n            return success();\n        }\n        return error();\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysRoleController.java",
        "method_name": "changeStatus",
        "old_function": "@Log(title = \"角色管理\", businessType = BusinessType.UPDATE)\n    @RequiresPermissions(\"system:role:edit\")\n    @PostMapping(\"/changeStatus\")\n    @ResponseBody\n    public AjaxResult changeStatus(SysRole role)\n    {\n        roleService.checkRoleAllowed(role);\n        return toAjax(roleService.changeStatus(role));\n    }",
        "new_function": "@Log(title = \"角色管理\", businessType = BusinessType.UPDATE)\n    @RequiresPermissions(\"system:role:edit\")\n    @PostMapping(\"/changeStatus\")\n    @ResponseBody\n    public AjaxResult changeStatus(SysRole role)\n    {\n        roleService.checkRoleAllowed(role);\n        roleService.checkRoleDataScope(role.getRoleId());\n        return toAjax(roleService.changeStatus(role));\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysRoleController.java",
        "method_name": "selectAuthUserAll",
        "old_function": "@RequiresPermissions(\"system:role:edit\")\n    @Log(title = \"角色管理\", businessType = BusinessType.GRANT)\n    @PostMapping(\"/authUser/selectAll\")\n    @ResponseBody\n    public AjaxResult selectAuthUserAll(Long roleId, String userIds)\n    {\n        return toAjax(roleService.insertAuthUsers(roleId, userIds));\n    }",
        "new_function": "@RequiresPermissions(\"system:role:edit\")\n    @Log(title = \"角色管理\", businessType = BusinessType.GRANT)\n    @PostMapping(\"/authUser/selectAll\")\n    @ResponseBody\n    public AjaxResult selectAuthUserAll(Long roleId, String userIds)\n    {\n        roleService.checkRoleDataScope(roleId);\n        return toAjax(roleService.insertAuthUsers(roleId, userIds));\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "editSave",
        "old_function": "@RequiresPermissions(\"system:user:edit\")\n    @Log(title = \"用户管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        if (StringUtils.isNotEmpty(user.getPhonenumber())\n                && UserConstants.USER_PHONE_NOT_UNIQUE.equals(userService.checkPhoneUnique(user)))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，手机号码已存在\");\n        }\n        else if (StringUtils.isNotEmpty(user.getEmail())\n                && UserConstants.USER_EMAIL_NOT_UNIQUE.equals(userService.checkEmailUnique(user)))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，邮箱账号已存在\");\n        }\n        user.setUpdateBy(getLoginName());\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return toAjax(userService.updateUser(user));\n    }",
        "new_function": "@RequiresPermissions(\"system:user:edit\")\n    @Log(title = \"用户管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        userService.checkUserDataScope(user.getUserId());\n        if (StringUtils.isNotEmpty(user.getPhonenumber())\n                && UserConstants.USER_PHONE_NOT_UNIQUE.equals(userService.checkPhoneUnique(user)))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，手机号码已存在\");\n        }\n        else if (StringUtils.isNotEmpty(user.getEmail())\n                && UserConstants.USER_EMAIL_NOT_UNIQUE.equals(userService.checkEmailUnique(user)))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，邮箱账号已存在\");\n        }\n        user.setUpdateBy(getLoginName());\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return toAjax(userService.updateUser(user));\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "resetPwdSave",
        "old_function": "@RequiresPermissions(\"system:user:resetPwd\")\n    @Log(title = \"重置密码\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/resetPwd\")\n    @ResponseBody\n    public AjaxResult resetPwdSave(SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        user.setSalt(ShiroUtils.randomSalt());\n        user.setPassword(passwordService.encryptPassword(user.getLoginName(), user.getPassword(), user.getSalt()));\n        if (userService.resetUserPwd(user) > 0)\n        {\n            if (ShiroUtils.getUserId().longValue() == user.getUserId().longValue())\n            {\n                setSysUser(userService.selectUserById(user.getUserId()));\n            }\n            return success();\n        }\n        return error();\n    }",
        "new_function": "@RequiresPermissions(\"system:user:resetPwd\")\n    @Log(title = \"重置密码\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/resetPwd\")\n    @ResponseBody\n    public AjaxResult resetPwdSave(SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        userService.checkUserDataScope(user.getUserId());\n        user.setSalt(ShiroUtils.randomSalt());\n        user.setPassword(passwordService.encryptPassword(user.getLoginName(), user.getPassword(), user.getSalt()));\n        if (userService.resetUserPwd(user) > 0)\n        {\n            if (ShiroUtils.getUserId().longValue() == user.getUserId().longValue())\n            {\n                setSysUser(userService.selectUserById(user.getUserId()));\n            }\n            return success();\n        }\n        return error();\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "insertAuthRole",
        "old_function": "/**\n     * 用户授权角色\n     */\n    @RequiresPermissions(\"system:user:edit\")\n    @Log(title = \"用户管理\", businessType = BusinessType.GRANT)\n    @PostMapping(\"/authRole/insertAuthRole\")\n    @ResponseBody\n    public AjaxResult insertAuthRole(Long userId, Long[] roleIds)\n    {\n        userService.insertUserAuth(userId, roleIds);\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return success();\n    }",
        "new_function": "/**\n     * 用户授权角色\n     */\n    @RequiresPermissions(\"system:user:edit\")\n    @Log(title = \"用户管理\", businessType = BusinessType.GRANT)\n    @PostMapping(\"/authRole/insertAuthRole\")\n    @ResponseBody\n    public AjaxResult insertAuthRole(Long userId, Long[] roleIds)\n    {\n        userService.checkUserDataScope(userId);\n        userService.insertUserAuth(userId, roleIds);\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return success();\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "changeStatus",
        "old_function": "@Log(title = \"用户管理\", businessType = BusinessType.UPDATE)\n    @RequiresPermissions(\"system:user:edit\")\n    @PostMapping(\"/changeStatus\")\n    @ResponseBody\n    public AjaxResult changeStatus(SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        return toAjax(userService.changeStatus(user));\n    }",
        "new_function": "@Log(title = \"用户管理\", businessType = BusinessType.UPDATE)\n    @RequiresPermissions(\"system:user:edit\")\n    @PostMapping(\"/changeStatus\")\n    @ResponseBody\n    public AjaxResult changeStatus(SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        userService.checkUserDataScope(user.getUserId());\n        return toAjax(userService.changeStatus(user));\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-system/src/main/java/com/ruoyi/system/service/impl/SysRoleServiceImpl.java",
        "method_name": "deleteRoleByIds",
        "old_function": "@Override\n    @Transactional\n    public int deleteRoleByIds(String ids)\n    {\n        Long[] roleIds = Convert.toLongArray(ids);\n        for (Long roleId : roleIds)\n        {\n            checkRoleAllowed(new SysRole(roleId));\n            SysRole role = selectRoleById(roleId);\n            if (countUserRoleByRoleId(roleId) > 0)\n            {\n                throw new ServiceException(String.format(\"%1$s已分配,不能删除\", role.getRoleName()));\n            }\n        }\n        // 删除角色与菜单关联\n        roleMenuMapper.deleteRoleMenu(roleIds);\n        // 删除角色与部门关联\n        roleDeptMapper.deleteRoleDept(roleIds);\n        return roleMapper.deleteRoleByIds(roleIds);\n    }",
        "new_function": "@Override\n    @Transactional\n    public int deleteRoleByIds(String ids)\n    {\n        Long[] roleIds = Convert.toLongArray(ids);\n        for (Long roleId : roleIds)\n        {\n            checkRoleAllowed(new SysRole(roleId));\n            checkRoleDataScope(roleId);\n            SysRole role = selectRoleById(roleId);\n            if (countUserRoleByRoleId(roleId) > 0)\n            {\n                throw new ServiceException(String.format(\"%1$s已分配,不能删除\", role.getRoleName()));\n            }\n        }\n        // 删除角色与菜单关联\n        roleMenuMapper.deleteRoleMenu(roleIds);\n        // 删除角色与部门关联\n        roleDeptMapper.deleteRoleDept(roleIds);\n        return roleMapper.deleteRoleByIds(roleIds);\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/monitor/CacheController.java",
        "method_name": "getCacheNames",
        "old_function": "@PostMapping(\"/getNames\")\n    public String getCacheNames(String fragment, ModelMap mmap)\n    {\n        mmap.put(\"cacheNames\", cacheService.getCacheNames());\n        return prefix + \"/cache::\" + fragment;\n    }",
        "new_function": "@RequiresPermissions(\"monitor:cache:view\")\n    @PostMapping(\"/getNames\")\n    public String getCacheNames(String fragment, ModelMap mmap)\n    {\n        mmap.put(\"cacheNames\", cacheService.getCacheNames());\n        return prefix + \"/cache::\" + fragment;\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysConfigController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{configId}\")\n    public String edit(@PathVariable(\"configId\") Long configId, ModelMap mmap)\n    {\n        mmap.put(\"config\", configService.selectConfigById(configId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:config:edit\")\n    @GetMapping(\"/edit/{configId}\")\n    public String edit(@PathVariable(\"configId\") Long configId, ModelMap mmap)\n    {\n        mmap.put(\"config\", configService.selectConfigById(configId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysDeptController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{deptId}\")\n    public String edit(@PathVariable(\"deptId\") Long deptId, ModelMap mmap)\n    {\n        deptService.checkDeptDataScope(deptId);\n        SysDept dept = deptService.selectDeptById(deptId);\n        if (StringUtils.isNotNull(dept) && 100L == deptId)\n        {\n            dept.setParentName(\"无\");\n        }\n        mmap.put(\"dept\", dept);\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:dept:edit\")\n    @GetMapping(\"/edit/{deptId}\")\n    public String edit(@PathVariable(\"deptId\") Long deptId, ModelMap mmap)\n    {\n        deptService.checkDeptDataScope(deptId);\n        SysDept dept = deptService.selectDeptById(deptId);\n        if (StringUtils.isNotNull(dept) && 100L == deptId)\n        {\n            dept.setParentName(\"无\");\n        }\n        mmap.put(\"dept\", dept);\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysDictDataController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{dictCode}\")\n    public String edit(@PathVariable(\"dictCode\") Long dictCode, ModelMap mmap)\n    {\n        mmap.put(\"dict\", dictDataService.selectDictDataById(dictCode));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:dict:edit\")\n    @GetMapping(\"/edit/{dictCode}\")\n    public String edit(@PathVariable(\"dictCode\") Long dictCode, ModelMap mmap)\n    {\n        mmap.put(\"dict\", dictDataService.selectDictDataById(dictCode));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysDictTypeController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{dictId}\")\n    public String edit(@PathVariable(\"dictId\") Long dictId, ModelMap mmap)\n    {\n        mmap.put(\"dict\", dictTypeService.selectDictTypeById(dictId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:dict:edit\")\n    @GetMapping(\"/edit/{dictId}\")\n    public String edit(@PathVariable(\"dictId\") Long dictId, ModelMap mmap)\n    {\n        mmap.put(\"dict\", dictTypeService.selectDictTypeById(dictId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysNoticeController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{noticeId}\")\n    public String edit(@PathVariable(\"noticeId\") Long noticeId, ModelMap mmap)\n    {\n        mmap.put(\"notice\", noticeService.selectNoticeById(noticeId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:notice:edit\")\n    @GetMapping(\"/edit/{noticeId}\")\n    public String edit(@PathVariable(\"noticeId\") Long noticeId, ModelMap mmap)\n    {\n        mmap.put(\"notice\", noticeService.selectNoticeById(noticeId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{userId}\")\n    public String edit(@PathVariable(\"userId\") Long userId, ModelMap mmap)\n    {\n        userService.checkUserDataScope(userId);\n        List<SysRole> roles = roleService.selectRolesByUserId(userId);\n        mmap.put(\"user\", userService.selectUserById(userId));\n        mmap.put(\"roles\", SysUser.isAdmin(userId) ? roles : roles.stream().filter(r -> !r.isAdmin()).collect(Collectors.toList()));\n        mmap.put(\"posts\", postService.selectPostsByUserId(userId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:user:edit\")\n    @GetMapping(\"/edit/{userId}\")\n    public String edit(@PathVariable(\"userId\") Long userId, ModelMap mmap)\n    {\n        userService.checkUserDataScope(userId);\n        List<SysRole> roles = roleService.selectRolesByUserId(userId);\n        mmap.put(\"user\", userService.selectUserById(userId));\n        mmap.put(\"roles\", SysUser.isAdmin(userId) ? roles : roles.stream().filter(r -> !r.isAdmin()).collect(Collectors.toList()));\n        mmap.put(\"posts\", postService.selectPostsByUserId(userId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/monitor/SysJobController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{jobId}\")\n    public String edit(@PathVariable(\"jobId\") Long jobId, ModelMap mmap)\n    {\n        mmap.put(\"job\", jobService.selectJobById(jobId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"monitor:job:edit\")\n    @GetMapping(\"/edit/{jobId}\")\n    public String edit(@PathVariable(\"jobId\") Long jobId, ModelMap mmap)\n    {\n        mmap.put(\"job\", jobService.selectJobById(jobId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysMenuController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{menuId}\")\n    public String edit(@PathVariable(\"menuId\") Long menuId, ModelMap mmap)\n    {\n        mmap.put(\"menu\", menuService.selectMenuById(menuId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:menu:edit\")\n    @GetMapping(\"/edit/{menuId}\")\n    public String edit(@PathVariable(\"menuId\") Long menuId, ModelMap mmap)\n    {\n        mmap.put(\"menu\", menuService.selectMenuById(menuId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysRoleController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{roleId}\")\n    public String edit(@PathVariable(\"roleId\") Long roleId, ModelMap mmap)\n    {\n        roleService.checkRoleDataScope(roleId);\n        mmap.put(\"role\", roleService.selectRoleById(roleId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:role:edit\")\n    @GetMapping(\"/edit/{roleId}\")\n    public String edit(@PathVariable(\"roleId\") Long roleId, ModelMap mmap)\n    {\n        roleService.checkRoleDataScope(roleId);\n        mmap.put(\"role\", roleService.selectRoleById(roleId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysPostController.java",
        "method_name": "edit",
        "old_function": "@GetMapping(\"/edit/{postId}\")\n    public String edit(@PathVariable(\"postId\") Long postId, ModelMap mmap)\n    {\n        mmap.put(\"post\", postService.selectPostById(postId));\n        return prefix + \"/edit\";\n    }",
        "new_function": "@RequiresPermissions(\"system:post:edit\")\n    @GetMapping(\"/edit/{postId}\")\n    public String edit(@PathVariable(\"postId\") Long postId, ModelMap mmap)\n    {\n        mmap.put(\"post\", postService.selectPostById(postId));\n        return prefix + \"/edit\";\n    }",
        "commit": "ba9b483472cb646fb955124fc55cbdc0276c9dfd",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "editSave",
        "old_function": "@RequiresPermissions(\"system:user:edit\")\n    @Log(title = \"用户管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        userService.checkUserDataScope(user.getUserId());\n        if (!userService.checkLoginNameUnique(user))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，登录账号已存在\");\n        }\n        else if (StringUtils.isNotEmpty(user.getPhonenumber()) && !userService.checkPhoneUnique(user))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，手机号码已存在\");\n        }\n        else if (StringUtils.isNotEmpty(user.getEmail()) && !userService.checkEmailUnique(user))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，邮箱账号已存在\");\n        }\n        user.setUpdateBy(getLoginName());\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return toAjax(userService.updateUser(user));\n    }",
        "new_function": "@RequiresPermissions(\"system:user:edit\")\n    @Log(title = \"用户管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysUser user)\n    {\n        userService.checkUserAllowed(user);\n        userService.checkUserDataScope(user.getUserId());\n        deptService.checkDeptDataScope(user.getDeptId());\n        roleService.checkRoleDataScope(user.getRoleIds());\n        if (!userService.checkLoginNameUnique(user))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，登录账号已存在\");\n        }\n        else if (StringUtils.isNotEmpty(user.getPhonenumber()) && !userService.checkPhoneUnique(user))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，手机号码已存在\");\n        }\n        else if (StringUtils.isNotEmpty(user.getEmail()) && !userService.checkEmailUnique(user))\n        {\n            return error(\"修改用户'\" + user.getLoginName() + \"'失败，邮箱账号已存在\");\n        }\n        user.setUpdateBy(getLoginName());\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return toAjax(userService.updateUser(user));\n    }",
        "commit": "edb1c614d060bcd3ed89c916c6a8fa80a38b83c6",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-system/src/main/java/com/ruoyi/system/service/impl/SysUserServiceImpl.java",
        "method_name": "importUser",
        "old_function": "@Override\n    public String importUser(List<SysUser> userList, Boolean isUpdateSupport, String operName)\n    {\n        if (StringUtils.isNull(userList) || userList.size() == 0)\n        {\n            throw new ServiceException(\"导入用户数据不能为空！\");\n        }\n        int successNum = 0;\n        int failureNum = 0;\n        StringBuilder successMsg = new StringBuilder();\n        StringBuilder failureMsg = new StringBuilder();\n        String password = configService.selectConfigByKey(\"sys.user.initPassword\");\n        for (SysUser user : userList)\n        {\n            try\n            {\n                // 验证是否存在这个用户\n                SysUser u = userMapper.selectUserByLoginName(user.getLoginName());\n                if (StringUtils.isNull(u))\n                {\n                    BeanValidators.validateWithException(validator, user);\n                    user.setPassword(Md5Utils.hash(user.getLoginName() + password));\n                    user.setCreateBy(operName);\n                    this.insertUser(user);\n                    successNum++;\n                    successMsg.append(\"<br/>\" + successNum + \"、账号 \" + user.getLoginName() + \" 导入成功\");\n                }\n                else if (isUpdateSupport)\n                {\n                    BeanValidators.validateWithException(validator, user);\n                    user.setUpdateBy(operName);\n                    this.updateUser(user);\n                    successNum++;\n                    successMsg.append(\"<br/>\" + successNum + \"、账号 \" + user.getLoginName() + \" 更新成功\");\n                }\n                else\n                {\n                    failureNum++;\n                    failureMsg.append(\"<br/>\" + failureNum + \"、账号 \" + user.getLoginName() + \" 已存在\");\n                }\n            }\n            catch (Exception e)\n            {\n                failureNum++;\n                String msg = \"<br/>\" + failureNum + \"、账号 \" + user.getLoginName() + \" 导入失败：\";\n                failureMsg.append(msg + e.getMessage());\n                log.error(msg, e);\n            }\n        }\n        if (failureNum > 0)\n        {\n            failureMsg.insert(0, \"很抱歉，导入失败！共 \" + failureNum + \" 条数据格式不正确，错误如下：\");\n            throw new ServiceException(failureMsg.toString());\n        }\n        else\n        {\n            successMsg.insert(0, \"恭喜您，数据已全部导入成功！共 \" + successNum + \" 条，数据如下：\");\n        }\n        return successMsg.toString();\n    }",
        "new_function": "@Override\n    public String importUser(List<SysUser> userList, Boolean isUpdateSupport, String operName)\n    {\n        if (StringUtils.isNull(userList) || userList.size() == 0)\n        {\n            throw new ServiceException(\"导入用户数据不能为空！\");\n        }\n        int successNum = 0;\n        int failureNum = 0;\n        StringBuilder successMsg = new StringBuilder();\n        StringBuilder failureMsg = new StringBuilder();\n        String password = configService.selectConfigByKey(\"sys.user.initPassword\");\n        for (SysUser user : userList)\n        {\n            try\n            {\n                // 验证是否存在这个用户\n                SysUser u = userMapper.selectUserByLoginName(user.getLoginName());\n                if (StringUtils.isNull(u))\n                {\n                    BeanValidators.validateWithException(validator, user);\n                    user.setPassword(Md5Utils.hash(user.getLoginName() + password));\n                    user.setCreateBy(operName);\n                    this.insertUser(user);\n                    successNum++;\n                    successMsg.append(\"<br/>\" + successNum + \"、账号 \" + user.getLoginName() + \" 导入成功\");\n                }\n                else if (isUpdateSupport)\n                {\n                    BeanValidators.validateWithException(validator, user);\n                    checkUserAllowed(user);\n                    checkUserDataScope(user.getUserId());\n                    user.setUpdateBy(operName);\n                    this.updateUser(user);\n                    successNum++;\n                    successMsg.append(\"<br/>\" + successNum + \"、账号 \" + user.getLoginName() + \" 更新成功\");\n                }\n                else\n                {\n                    failureNum++;\n                    failureMsg.append(\"<br/>\" + failureNum + \"、账号 \" + user.getLoginName() + \" 已存在\");\n                }\n            }\n            catch (Exception e)\n            {\n                failureNum++;\n                String msg = \"<br/>\" + failureNum + \"、账号 \" + user.getLoginName() + \" 导入失败：\";\n                failureMsg.append(msg + e.getMessage());\n                log.error(msg, e);\n            }\n        }\n        if (failureNum > 0)\n        {\n            failureMsg.insert(0, \"很抱歉，导入失败！共 \" + failureNum + \" 条数据格式不正确，错误如下：\");\n            throw new ServiceException(failureMsg.toString());\n        }\n        else\n        {\n            successMsg.insert(0, \"恭喜您，数据已全部导入成功！共 \" + successNum + \" 条，数据如下：\");\n        }\n        return successMsg.toString();\n    }",
        "commit": "52fe19e933ced04952056bc65745ed6b384448d6",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysDeptController.java",
        "method_name": "editSave",
        "old_function": "@Log(title = \"部门管理\", businessType = BusinessType.UPDATE)\n    @RequiresPermissions(\"system:dept:edit\")\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysDept dept)\n    {\n        if (UserConstants.DEPT_NAME_NOT_UNIQUE.equals(deptService.checkDeptNameUnique(dept)))\n        {\n            return error(\"修改部门'\" + dept.getDeptName() + \"'失败，部门名称已存在\");\n        }\n        dept.setUpdateBy(getLoginName());\n        return toAjax(deptService.updateDept(dept));\n    }",
        "new_function": "@Log(title = \"部门管理\", businessType = BusinessType.UPDATE)\n    @RequiresPermissions(\"system:dept:edit\")\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysDept dept)\n    {\n        Long deptId = dept.getDeptId();\n        deptService.checkDeptDataScope(deptId);\n        if (UserConstants.DEPT_NAME_NOT_UNIQUE.equals(deptService.checkDeptNameUnique(dept)))\n        {\n            return error(\"修改部门'\" + dept.getDeptName() + \"'失败，部门名称已存在\");\n        }\n        else if (dept.getParentId().equals(deptId))\n        {\n            return error(\"修改部门'\" + dept.getDeptName() + \"'失败，上级部门不能是自己\");\n        }\n        else if (StringUtils.equals(UserConstants.DEPT_DISABLE, dept.getStatus()) && deptService.selectNormalChildrenDeptById(deptId) > 0)\n        {\n            return AjaxResult.error(\"该部门包含未停用的子部门！\");\n        }\n        dept.setUpdateBy(getLoginName());\n        return toAjax(deptService.updateDept(dept));\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysRoleController.java",
        "method_name": "editSave",
        "old_function": "@RequiresPermissions(\"system:role:edit\")\n    @Log(title = \"角色管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysRole role)\n    {\n        roleService.checkRoleAllowed(role);\n        if (UserConstants.ROLE_NAME_NOT_UNIQUE.equals(roleService.checkRoleNameUnique(role)))\n        {\n            return error(\"修改角色'\" + role.getRoleName() + \"'失败，角色名称已存在\");\n        }\n        else if (UserConstants.ROLE_KEY_NOT_UNIQUE.equals(roleService.checkRoleKeyUnique(role)))\n        {\n            return error(\"修改角色'\" + role.getRoleName() + \"'失败，角色权限已存在\");\n        }\n        role.setUpdateBy(getLoginName());\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return toAjax(roleService.updateRole(role));\n    }",
        "new_function": "@RequiresPermissions(\"system:role:edit\")\n    @Log(title = \"角色管理\", businessType = BusinessType.UPDATE)\n    @PostMapping(\"/edit\")\n    @ResponseBody\n    public AjaxResult editSave(@Validated SysRole role)\n    {\n        roleService.checkRoleAllowed(role);\n        roleService.checkRoleDataScope(role.getRoleId());\n        if (UserConstants.ROLE_NAME_NOT_UNIQUE.equals(roleService.checkRoleNameUnique(role)))\n        {\n            return error(\"修改角色'\" + role.getRoleName() + \"'失败，角色名称已存在\");\n        }\n        else if (UserConstants.ROLE_KEY_NOT_UNIQUE.equals(roleService.checkRoleKeyUnique(role)))\n        {\n            return error(\"修改角色'\" + role.getRoleName() + \"'失败，角色权限已存在\");\n        }\n        role.setUpdateBy(getLoginName());\n        AuthorizationUtils.clearAllCachedAuthorizationInfo();\n        return toAjax(roleService.updateRole(role));\n    }",
        "commit": "ed1e7e69a8cbb8beb59eade9ce052046f7a9371c",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "remove",
        "old_function": "@RequiresPermissions(\"system:user:remove\")\n    @Log(title = \"用户管理\", businessType = BusinessType.DELETE)\n    @PostMapping(\"/remove\")\n    @ResponseBody\n    public AjaxResult remove(String ids)\n    {\n        return toAjax(userService.deleteUserByIds(ids));\n    }",
        "new_function": "@RequiresPermissions(\"system:user:remove\")\n    @Log(title = \"用户管理\", businessType = BusinessType.DELETE)\n    @PostMapping(\"/remove\")\n    @ResponseBody\n    public AjaxResult remove(String ids)\n    {\n        if (ArrayUtils.contains(Convert.toLongArray(ids), getUserId()))\n        {\n            return error(\"当前用户不能删除\");\n        }\n        return toAjax(userService.deleteUserByIds(ids));\n    }",
        "commit": "ef414392600ed057bacc4fdd2aacb83e0d3b040b",
        "project_name": "ruoyi"
    },
    {
        "file": "ruoyi-admin/src/main/java/com/ruoyi/web/controller/system/SysUserController.java",
        "method_name": "authRole",
        "old_function": "@GetMapping(\"/authRole/{userId}\")\n    public String authRole(@PathVariable(\"userId\") Long userId, ModelMap mmap)\n    {\n        SysUser user = userService.selectUserById(userId);\n        // 获取用户所属的角色列表\n        List<SysUserRole> userRoles = userService.selectUserRoleByUserId(userId);\n        mmap.put(\"user\", user);\n        mmap.put(\"userRoles\", userRoles);\n        return prefix + \"/authRole\";\n    }",
        "new_function": "@GetMapping(\"/authRole/{userId}\")\n    public String authRole(@PathVariable(\"userId\") Long userId, ModelMap mmap)\n    {\n        SysUser user = userService.selectUserById(userId);\n        // 获取用户所属的角色列表\n        List<SysRole> roles = roleService.selectRolesByUserId(userId);\n        mmap.put(\"user\", user);\n        mmap.put(\"roles\", SysUser.isAdmin(userId) ? roles : roles.stream().filter(r -> !r.isAdmin()).collect(Collectors.toList()));\n        return prefix + \"/authRole\";\n    }",
        "commit": "23b98a3ef8960f1499bb51c420417f5c28e28880",
        "project_name": "ruoyi"
    }    
]